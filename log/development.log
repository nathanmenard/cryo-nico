  [1m[35m (116.5ms)[0m  [1m[35mCREATE DATABASE "test_app_development" ENCODING = 'unicode'[0m
  [1m[35m (70.9ms)[0m  [1m[35mCREATE DATABASE "test_app_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35mSQL (422.6ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "unaccent"[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_attachments" CASCADE[0m
  [1m[35m (12.0ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_blobs" CASCADE[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "byte_size" bigint NOT NULL, "checksum" character varying NOT NULL, "created_at" timestamp NOT NULL, "service_name" character varying NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_variant_records" CASCADE[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "blockers" CASCADE[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "blockers" ("id" bigserial primary key, "start_time" timestamp NOT NULL, "end_time" timestamp NOT NULL, "notes" text NOT NULL, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "franchise_id" bigint NOT NULL, "room_id" bigint NOT NULL, "blocking" boolean DEFAULT TRUE, "global" boolean DEFAULT FALSE, "blocker_id" bigint)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_blocker_id" ON "blockers" ("blocker_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_franchise_id" ON "blockers" ("franchise_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_room_id" ON "blockers" ("room_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_user_id" ON "blockers" ("user_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "business_hours" CASCADE[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "business_hours" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "day" character varying NOT NULL, "morning_start_time" time NOT NULL, "morning_end_time" time NOT NULL, "afternoon_start_time" time NOT NULL, "afternoon_end_time" time NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE INDEX "index_business_hours_on_franchise_id" ON "business_hours" ("franchise_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "campaign_templates" CASCADE[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "campaign_templates" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "external_id" integer NOT NULL, "name" text NOT NULL, "subject" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "html" text NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_campaign_templates_on_external_id" ON "campaign_templates" ("external_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_campaign_templates_on_franchise_id" ON "campaign_templates" ("franchise_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "campaigns" CASCADE[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "campaigns" ("id" bigserial primary key, "name" character varying NOT NULL, "body" text NOT NULL, "recipients" character varying[], "sms" boolean NOT NULL, "draft" boolean DEFAULT TRUE NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "filters" json, "sendinblue_list_id" integer, "sendinblue_campaign_id" integer, "campaign_template_id" bigint)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_campaigns_on_campaign_template_id" ON "campaigns" ("campaign_template_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_campaigns_on_franchise_id" ON "campaigns" ("franchise_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients" CASCADE[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "clients" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "male" boolean NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "phone" character varying, "objectives" character varying[] DEFAULT '{}', "address" text, "zip_code" character varying, "city" character varying, "password_digest" character varying, "newsletter" boolean, "last_logged_at" timestamp, "client_id" bigint, "user_id" bigint, "birth_date" date)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_clients_on_client_id" ON "clients" ("client_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE INDEX "index_clients_on_franchise_id" ON "clients" ("franchise_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_clients_on_user_id" ON "clients" ("user_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "comments" CASCADE[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "comments" ("id" bigserial primary key, "user_id" bigint NOT NULL, "client_id" bigint NOT NULL, "body" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE INDEX "index_comments_on_client_id" ON "comments" ("client_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_comments_on_user_id" ON "comments" ("user_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying NOT NULL, "email" character varying NOT NULL, "phone" character varying NOT NULL, "address" text NOT NULL, "zip_code" character varying NOT NULL, "city" character varying NOT NULL, "siret" character varying NOT NULL, "comment" text, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE INDEX "index_companies_on_franchise_id" ON "companies" ("franchise_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_clients" CASCADE[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "company_clients" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "email" character varying NOT NULL, "job" character varying, "phone" character varying, "company_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "password_digest" character varying, "last_logged_at" timestamp, "company_client_id" bigint, "male" boolean, "objectives" character varying[] DEFAULT '{}', "address" text, "zip_code" character varying, "city" character varying, "boolean" boolean, "birth_date" date, "newsletter" boolean)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE INDEX "index_company_clients_on_company_client_id" ON "company_clients" ("company_client_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE INDEX "index_company_clients_on_company_id" ON "company_clients" ("company_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "coupons" CASCADE[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "coupons" ("id" bigserial primary key, "name" character varying NOT NULL, "value" integer NOT NULL, "code" character varying NOT NULL, "percentage" boolean NOT NULL, "start_date" date, "end_date" date, "usage_limit" integer, "usage_limit_per_person" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "male" boolean, "objectives" character varying[], "product_ids" character varying[], "new_client" boolean DEFAULT FALSE, "loyalty" boolean DEFAULT FALSE, "client_id" bigint, "company_client_id" bigint)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_coupons_on_client_id" ON "coupons" ("client_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE INDEX "index_coupons_on_company_client_id" ON "coupons" ("company_client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "coupons_franchises" CASCADE[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "coupons_franchises" ("id" bigserial primary key, "coupon_id" bigint NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_coupons_franchises_on_coupon_id_and_franchise_id" ON "coupons_franchises" ("coupon_id", "franchise_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE INDEX "index_coupons_franchises_on_coupon_id" ON "coupons_franchises" ("coupon_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE INDEX "index_coupons_franchises_on_franchise_id" ON "coupons_franchises" ("franchise_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "credits" CASCADE[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "credits" ("id" bigserial primary key, "client_id" bigint, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "company_client_id" bigint)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_credits_on_client_id" ON "credits" ("client_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_credits_on_company_client_id" ON "credits" ("company_client_id")[0m
  [1m[35m (23.3ms)[0m  [1m[35mCREATE INDEX "index_credits_on_product_id" ON "credits" ("product_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "external_products" CASCADE[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "external_products" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "name" character varying NOT NULL, "amount" integer NOT NULL, "tax_rate" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_external_products_on_franchise_id" ON "external_products" ("franchise_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "franchises" CASCADE[0m
  [1m[35m (111.2ms)[0m  [1m[35mCREATE TABLE "franchises" ("id" bigserial primary key, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "banking_provider" character varying, "banking_secret_key" text, "banking_secret_id" text, "email" character varying, "address" text, "zip_code" character varying, "city" character varying, "siret" character varying, "tax_id" character varying, "iban" character varying, "phone" character varying, "instagram_username" text, "facebook_chat_snippet" text, "sendinblue_api_key" text)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_franchises_on_name" ON "franchises" ("name")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "payments" CASCADE[0m
  [1m[35m (64.9ms)[0m  [1m[35mCREATE TABLE "payments" ("id" bigserial primary key, "client_id" bigint, "amount" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "bank_name" character varying, "transaction_id" character varying, "coupon_id" bigint, "as_paid" boolean, "product_name" character varying NOT NULL, "mode" character varying, "tax_rate" float DEFAULT 20.0, "company_client_id" bigint)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE INDEX "index_payments_on_client_id" ON "payments" ("client_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_payments_on_company_client_id" ON "payments" ("company_client_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_payments_on_coupon_id" ON "payments" ("coupon_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_prices" CASCADE[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "product_prices" ("id" bigserial primary key, "session_count" integer NOT NULL, "total" float NOT NULL, "professionnal" boolean NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "first_time" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_product_prices_on_product_id" ON "product_prices" ("product_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "products" CASCADE[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "description" text NOT NULL, "duration" integer NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "active" boolean DEFAULT TRUE)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_products_on_room_id" ON "products" ("room_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations" CASCADE[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" bigserial primary key, "start_time" timestamp, "email_notification" boolean NOT NULL, "first_time" boolean NOT NULL, "client_id" bigint, "product_price_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "company_client_id" bigint, "payment_id" bigint, "canceled" boolean DEFAULT FALSE NOT NULL, "cancelation_reason" text, "refunded" boolean DEFAULT FALSE NOT NULL, "paid_by_credit" boolean DEFAULT FALSE NOT NULL, "notes" text, "user_id" bigint, "signature" text, "to_be_paid_online" boolean NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_client_id" ON "reservations" ("client_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_company_client_id" ON "reservations" ("company_client_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_payment_id" ON "reservations" ("payment_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_product_price_id" ON "reservations" ("product_price_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_user_id" ON "reservations" ("user_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews" CASCADE[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" bigserial primary key, "body" text NOT NULL, "published" boolean, "product_id" bigint NOT NULL, "client_id" bigint, "company_client_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "homepage" boolean)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_client_id" ON "reviews" ("client_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_company_client_id" ON "reviews" ("company_client_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_product_id" ON "reviews" ("product_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "rooms" CASCADE[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "rooms" ("id" bigserial primary key, "name" character varying NOT NULL, "capacity" integer NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE INDEX "index_rooms_on_franchise_id" ON "rooms" ("franchise_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscription_plans" CASCADE[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "subscription_plans" ("id" bigserial primary key, "product_id" bigint NOT NULL, "session_count" integer NOT NULL, "total" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_subscription_plans_on_product_id" ON "subscription_plans" ("product_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "subscription_plan_id" bigint NOT NULL, "client_id" bigint NOT NULL, "external_id" character varying, "status" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "to_be_canceled_at" timestamp)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_client_id" ON "subscriptions" ("client_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_subscription_plan_id_and_client_id" ON "subscriptions" ("subscription_plan_id", "client_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_subscription_plan_id" ON "subscriptions" ("subscription_plan_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "survey_questions" CASCADE[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "survey_questions" ("id" bigserial primary key, "survey_id" bigint NOT NULL, "body" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE INDEX "index_survey_questions_on_survey_id" ON "survey_questions" ("survey_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "surveys" CASCADE[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "surveys" ("id" bigserial primary key, "product_id" bigint NOT NULL, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE INDEX "index_surveys_on_product_id" ON "surveys" ("product_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying NOT NULL, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "superuser" boolean DEFAULT FALSE NOT NULL, "last_logged_at" timestamp, "password_digest" character varying, "nutritionist" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_users_on_franchise_id" ON "users" ("franchise_id")[0m
  [1m[35m (10.6ms)[0m  [1m[35mALTER TABLE "active_storage_attachments" ADD CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "active_storage_variant_records" ADD CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_e0849eddae"
FOREIGN KEY ("blocker_id")
  REFERENCES "blockers" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_59c546b1e0"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_fc2fc1d405"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_7614b1ad87"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "business_hours" ADD CONSTRAINT "fk_rails_07296b7035"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "campaign_templates" ADD CONSTRAINT "fk_rails_9c0d24ccff"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "campaigns" ADD CONSTRAINT "fk_rails_649cc82f45"
FOREIGN KEY ("campaign_template_id")
  REFERENCES "campaign_templates" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "campaigns" ADD CONSTRAINT "fk_rails_80a802b165"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_d80a12f36a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (9.4ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_2cc4be869c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_21c421fd41"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "comments" ADD CONSTRAINT "fk_rails_b7673bd1d8"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "comments" ADD CONSTRAINT "fk_rails_03de2dc08c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_3eefe7b64c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "company_clients" ADD CONSTRAINT "fk_rails_c014da4d2a"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "company_clients" ADD CONSTRAINT "fk_rails_3a46874aaf"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "coupons" ADD CONSTRAINT "fk_rails_58e636839e"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "coupons" ADD CONSTRAINT "fk_rails_9a0bfe084f"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "coupons_franchises" ADD CONSTRAINT "fk_rails_cdbd738627"
FOREIGN KEY ("coupon_id")
  REFERENCES "coupons" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "coupons_franchises" ADD CONSTRAINT "fk_rails_09b1528f6c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (19.0ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_deafe42183"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_e446f4a120"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_d7bdca2159"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_66d0485df7"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (23.3ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_94c15b6260"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_a7af64837e"
FOREIGN KEY ("coupon_id")
  REFERENCES "coupons" ("id")
[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "product_prices" ADD CONSTRAINT "fk_rails_e7ec0c97a3"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (22.9ms)[0m  [1m[35mALTER TABLE "products" ADD CONSTRAINT "fk_rails_71119d0f74"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (3.4ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_9c963d6879"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_9089ec93d0"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_653e025ae0"
FOREIGN KEY ("payment_id")
  REFERENCES "payments" ("id")
[0m
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_57d12ba9a0"
FOREIGN KEY ("product_price_id")
  REFERENCES "product_prices" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_48a92fce51"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_09c661230e"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_9d0eb81ddb"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_bedd9094d4"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "rooms" ADD CONSTRAINT "fk_rails_f0b4b4dbb2"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "subscription_plans" ADD CONSTRAINT "fk_rails_b112070c01"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_19fca7085f"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_355348f174"
FOREIGN KEY ("subscription_plan_id")
  REFERENCES "subscription_plans" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "survey_questions" ADD CONSTRAINT "fk_rails_d0558bfd89"
FOREIGN KEY ("survey_id")
  REFERENCES "surveys" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "surveys" ADD CONSTRAINT "fk_rails_c90d5f8eac"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "users" ADD CONSTRAINT "fk_rails_59dbdb3a6d"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210403144414)[0m
  [1m[35m (1.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20201210113651),
(20201210120740),
(20201210160543),
(20201210160628),
(20201210210158),
(20201210215009),
(20201211062827),
(20201211071117),
(20201211073907),
(20201211082755),
(20201211084146),
(20201211091237),
(20201211104343),
(20201211201257),
(20201211210401),
(20201213110125),
(20201213124045),
(20201213211714),
(20201214100626),
(20201214194631),
(20201215060316),
(20201215155629),
(20201216092326),
(20201216112432),
(20201217061511),
(20201217084127),
(20201217101314),
(20201217104734),
(20201217191427),
(20201218080658),
(20201218102920),
(20201218154722),
(20201218210010),
(20201218215523),
(20201218232014),
(20201219122750),
(20201219152716),
(20201219161208),
(20201219171959),
(20201222164447),
(20201222164831),
(20210105113409),
(20210105115440),
(20210108060758),
(20210108070854),
(20210111153606),
(20210112124102),
(20210113081649),
(20210113091434),
(20210113094818),
(20210113101431),
(20210113114637),
(20210113114649),
(20210114092643),
(20210126104824),
(20210126105327),
(20210212100055),
(20210212100718),
(20210212101427),
(20210212190840),
(20210212191736),
(20210213100135),
(20210214151228),
(20210214152044),
(20210214170041),
(20210215111109),
(20210216172240),
(20210216173810),
(20210219135420),
(20210219210219),
(20210220105848),
(20210220111027),
(20210224111801),
(20210225113019),
(20210226061808),
(20210228190400),
(20210301100937),
(20210301102742),
(20210301102940),
(20210301163420),
(20210316164127),
(20210316164128),
(20210317080650),
(20210317103606),
(20210317104614),
(20210322173449),
(20210322183705),
(20210323080952),
(20210323082530),
(20210323200507),
(20210323201751),
(20210323202824),
(20210323203358),
(20210323220946),
(20210324174744),
(20210324182901),
(20210324201928),
(20210324211535),
(20210328202118),
(20210329120535),
(20210330085255),
(20210402105927),
(20210402112754),
(20210403102920);

[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (7.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-08-23 10:07:01.511410"], ["updated_at", "2021-08-23 10:07:01.511410"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "75ecc48a7c5ef8e8c2ff1c88434cba543d701699"], ["created_at", "2021-08-23 10:07:01.525482"], ["updated_at", "2021-08-23 10:07:01.525482"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35mSQL (4.6ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "unaccent"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_attachments" CASCADE[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_blobs" CASCADE[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "byte_size" bigint NOT NULL, "checksum" character varying NOT NULL, "created_at" timestamp NOT NULL, "service_name" character varying NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_variant_records" CASCADE[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "blockers" CASCADE[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "blockers" ("id" bigserial primary key, "start_time" timestamp NOT NULL, "end_time" timestamp NOT NULL, "notes" text NOT NULL, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "franchise_id" bigint NOT NULL, "room_id" bigint NOT NULL, "blocking" boolean DEFAULT TRUE, "global" boolean DEFAULT FALSE, "blocker_id" bigint)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_blocker_id" ON "blockers" ("blocker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_franchise_id" ON "blockers" ("franchise_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_room_id" ON "blockers" ("room_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_user_id" ON "blockers" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "business_hours" CASCADE[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "business_hours" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "day" character varying NOT NULL, "morning_start_time" time NOT NULL, "morning_end_time" time NOT NULL, "afternoon_start_time" time NOT NULL, "afternoon_end_time" time NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_business_hours_on_franchise_id" ON "business_hours" ("franchise_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "campaign_templates" CASCADE[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "campaign_templates" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "external_id" integer NOT NULL, "name" text NOT NULL, "subject" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "html" text NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_campaign_templates_on_external_id" ON "campaign_templates" ("external_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_campaign_templates_on_franchise_id" ON "campaign_templates" ("franchise_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "campaigns" CASCADE[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "campaigns" ("id" bigserial primary key, "name" character varying NOT NULL, "body" text NOT NULL, "recipients" character varying[], "sms" boolean NOT NULL, "draft" boolean DEFAULT TRUE NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "filters" json, "sendinblue_list_id" integer, "sendinblue_campaign_id" integer, "campaign_template_id" bigint)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_campaigns_on_campaign_template_id" ON "campaigns" ("campaign_template_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_campaigns_on_franchise_id" ON "campaigns" ("franchise_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "clients" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "male" boolean NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "phone" character varying, "objectives" character varying[] DEFAULT '{}', "address" text, "zip_code" character varying, "city" character varying, "password_digest" character varying, "newsletter" boolean, "last_logged_at" timestamp, "client_id" bigint, "user_id" bigint, "birth_date" date)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_clients_on_client_id" ON "clients" ("client_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_clients_on_franchise_id" ON "clients" ("franchise_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_clients_on_user_id" ON "clients" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "comments" CASCADE[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "comments" ("id" bigserial primary key, "user_id" bigint NOT NULL, "client_id" bigint NOT NULL, "body" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_comments_on_client_id" ON "comments" ("client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_comments_on_user_id" ON "comments" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying NOT NULL, "email" character varying NOT NULL, "phone" character varying NOT NULL, "address" text NOT NULL, "zip_code" character varying NOT NULL, "city" character varying NOT NULL, "siret" character varying NOT NULL, "comment" text, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_companies_on_franchise_id" ON "companies" ("franchise_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_clients" CASCADE[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "company_clients" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "email" character varying NOT NULL, "job" character varying, "phone" character varying, "company_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "password_digest" character varying, "last_logged_at" timestamp, "company_client_id" bigint, "male" boolean, "objectives" character varying[] DEFAULT '{}', "address" text, "zip_code" character varying, "city" character varying, "boolean" boolean, "birth_date" date, "newsletter" boolean)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_company_clients_on_company_client_id" ON "company_clients" ("company_client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_company_clients_on_company_id" ON "company_clients" ("company_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "coupons" CASCADE[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "coupons" ("id" bigserial primary key, "name" character varying NOT NULL, "value" integer NOT NULL, "code" character varying NOT NULL, "percentage" boolean NOT NULL, "start_date" date, "end_date" date, "usage_limit" integer, "usage_limit_per_person" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "male" boolean, "objectives" character varying[], "product_ids" character varying[], "new_client" boolean DEFAULT FALSE, "loyalty" boolean DEFAULT FALSE, "client_id" bigint, "company_client_id" bigint)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_coupons_on_client_id" ON "coupons" ("client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_coupons_on_company_client_id" ON "coupons" ("company_client_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "coupons_franchises" CASCADE[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "coupons_franchises" ("id" bigserial primary key, "coupon_id" bigint NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_coupons_franchises_on_coupon_id_and_franchise_id" ON "coupons_franchises" ("coupon_id", "franchise_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_coupons_franchises_on_coupon_id" ON "coupons_franchises" ("coupon_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_coupons_franchises_on_franchise_id" ON "coupons_franchises" ("franchise_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "credits" CASCADE[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "credits" ("id" bigserial primary key, "client_id" bigint, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "company_client_id" bigint)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_credits_on_client_id" ON "credits" ("client_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_credits_on_company_client_id" ON "credits" ("company_client_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_credits_on_product_id" ON "credits" ("product_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "external_products" CASCADE[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "external_products" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "name" character varying NOT NULL, "amount" integer NOT NULL, "tax_rate" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_external_products_on_franchise_id" ON "external_products" ("franchise_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "franchises" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "franchises" ("id" bigserial primary key, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "banking_provider" character varying, "banking_secret_key" text, "banking_secret_id" text, "email" character varying, "address" text, "zip_code" character varying, "city" character varying, "siret" character varying, "tax_id" character varying, "iban" character varying, "phone" character varying, "instagram_username" text, "facebook_chat_snippet" text, "sendinblue_api_key" text)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_franchises_on_name" ON "franchises" ("name")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "payments" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "payments" ("id" bigserial primary key, "client_id" bigint, "amount" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "bank_name" character varying, "transaction_id" character varying, "coupon_id" bigint, "as_paid" boolean, "product_name" character varying NOT NULL, "mode" character varying, "tax_rate" float DEFAULT 20.0, "company_client_id" bigint)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_payments_on_client_id" ON "payments" ("client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_payments_on_company_client_id" ON "payments" ("company_client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_payments_on_coupon_id" ON "payments" ("coupon_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_prices" CASCADE[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "product_prices" ("id" bigserial primary key, "session_count" integer NOT NULL, "total" float NOT NULL, "professionnal" boolean NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "first_time" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_product_prices_on_product_id" ON "product_prices" ("product_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "products" CASCADE[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "description" text NOT NULL, "duration" integer NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "active" boolean DEFAULT TRUE)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_products_on_room_id" ON "products" ("room_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations" CASCADE[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" bigserial primary key, "start_time" timestamp, "email_notification" boolean NOT NULL, "first_time" boolean NOT NULL, "client_id" bigint, "product_price_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "company_client_id" bigint, "payment_id" bigint, "canceled" boolean DEFAULT FALSE NOT NULL, "cancelation_reason" text, "refunded" boolean DEFAULT FALSE NOT NULL, "paid_by_credit" boolean DEFAULT FALSE NOT NULL, "notes" text, "user_id" bigint, "signature" text, "to_be_paid_online" boolean NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_client_id" ON "reservations" ("client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_company_client_id" ON "reservations" ("company_client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_payment_id" ON "reservations" ("payment_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_product_price_id" ON "reservations" ("product_price_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_user_id" ON "reservations" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews" CASCADE[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" bigserial primary key, "body" text NOT NULL, "published" boolean, "product_id" bigint NOT NULL, "client_id" bigint, "company_client_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "homepage" boolean)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_client_id" ON "reviews" ("client_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_company_client_id" ON "reviews" ("company_client_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_product_id" ON "reviews" ("product_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "rooms" CASCADE[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "rooms" ("id" bigserial primary key, "name" character varying NOT NULL, "capacity" integer NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_rooms_on_franchise_id" ON "rooms" ("franchise_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscription_plans" CASCADE[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "subscription_plans" ("id" bigserial primary key, "product_id" bigint NOT NULL, "session_count" integer NOT NULL, "total" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_subscription_plans_on_product_id" ON "subscription_plans" ("product_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "subscription_plan_id" bigint NOT NULL, "client_id" bigint NOT NULL, "external_id" character varying, "status" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "to_be_canceled_at" timestamp)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_client_id" ON "subscriptions" ("client_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_subscription_plan_id_and_client_id" ON "subscriptions" ("subscription_plan_id", "client_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_subscription_plan_id" ON "subscriptions" ("subscription_plan_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "survey_questions" CASCADE[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "survey_questions" ("id" bigserial primary key, "survey_id" bigint NOT NULL, "body" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_survey_questions_on_survey_id" ON "survey_questions" ("survey_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "surveys" CASCADE[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "surveys" ("id" bigserial primary key, "product_id" bigint NOT NULL, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_surveys_on_product_id" ON "surveys" ("product_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying NOT NULL, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "superuser" boolean DEFAULT FALSE NOT NULL, "last_logged_at" timestamp, "password_digest" character varying, "nutritionist" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_users_on_franchise_id" ON "users" ("franchise_id")[0m
  [1m[35m (4.4ms)[0m  [1m[35mALTER TABLE "active_storage_attachments" ADD CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "active_storage_variant_records" ADD CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_e0849eddae"
FOREIGN KEY ("blocker_id")
  REFERENCES "blockers" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_59c546b1e0"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_fc2fc1d405"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_7614b1ad87"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "business_hours" ADD CONSTRAINT "fk_rails_07296b7035"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "campaign_templates" ADD CONSTRAINT "fk_rails_9c0d24ccff"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "campaigns" ADD CONSTRAINT "fk_rails_649cc82f45"
FOREIGN KEY ("campaign_template_id")
  REFERENCES "campaign_templates" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "campaigns" ADD CONSTRAINT "fk_rails_80a802b165"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_d80a12f36a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_2cc4be869c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_21c421fd41"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "comments" ADD CONSTRAINT "fk_rails_b7673bd1d8"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "comments" ADD CONSTRAINT "fk_rails_03de2dc08c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_3eefe7b64c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "company_clients" ADD CONSTRAINT "fk_rails_c014da4d2a"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "company_clients" ADD CONSTRAINT "fk_rails_3a46874aaf"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "coupons" ADD CONSTRAINT "fk_rails_58e636839e"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "coupons" ADD CONSTRAINT "fk_rails_9a0bfe084f"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (4.0ms)[0m  [1m[35mALTER TABLE "coupons_franchises" ADD CONSTRAINT "fk_rails_cdbd738627"
FOREIGN KEY ("coupon_id")
  REFERENCES "coupons" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "coupons_franchises" ADD CONSTRAINT "fk_rails_09b1528f6c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_deafe42183"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_e446f4a120"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_d7bdca2159"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_66d0485df7"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_94c15b6260"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_a7af64837e"
FOREIGN KEY ("coupon_id")
  REFERENCES "coupons" ("id")
[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "product_prices" ADD CONSTRAINT "fk_rails_e7ec0c97a3"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "products" ADD CONSTRAINT "fk_rails_71119d0f74"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_9c963d6879"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_9089ec93d0"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_653e025ae0"
FOREIGN KEY ("payment_id")
  REFERENCES "payments" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_57d12ba9a0"
FOREIGN KEY ("product_price_id")
  REFERENCES "product_prices" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_48a92fce51"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.7ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_09c661230e"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_9d0eb81ddb"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_bedd9094d4"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "rooms" ADD CONSTRAINT "fk_rails_f0b4b4dbb2"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "subscription_plans" ADD CONSTRAINT "fk_rails_b112070c01"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (3.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_19fca7085f"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_355348f174"
FOREIGN KEY ("subscription_plan_id")
  REFERENCES "subscription_plans" ("id")
[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "survey_questions" ADD CONSTRAINT "fk_rails_d0558bfd89"
FOREIGN KEY ("survey_id")
  REFERENCES "surveys" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "surveys" ADD CONSTRAINT "fk_rails_c90d5f8eac"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "users" ADD CONSTRAINT "fk_rails_59dbdb3a6d"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210403144414)[0m
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20201210113651),
(20201210120740),
(20201210160543),
(20201210160628),
(20201210210158),
(20201210215009),
(20201211062827),
(20201211071117),
(20201211073907),
(20201211082755),
(20201211084146),
(20201211091237),
(20201211104343),
(20201211201257),
(20201211210401),
(20201213110125),
(20201213124045),
(20201213211714),
(20201214100626),
(20201214194631),
(20201215060316),
(20201215155629),
(20201216092326),
(20201216112432),
(20201217061511),
(20201217084127),
(20201217101314),
(20201217104734),
(20201217191427),
(20201218080658),
(20201218102920),
(20201218154722),
(20201218210010),
(20201218215523),
(20201218232014),
(20201219122750),
(20201219152716),
(20201219161208),
(20201219171959),
(20201222164447),
(20201222164831),
(20210105113409),
(20210105115440),
(20210108060758),
(20210108070854),
(20210111153606),
(20210112124102),
(20210113081649),
(20210113091434),
(20210113094818),
(20210113101431),
(20210113114637),
(20210113114649),
(20210114092643),
(20210126104824),
(20210126105327),
(20210212100055),
(20210212100718),
(20210212101427),
(20210212190840),
(20210212191736),
(20210213100135),
(20210214151228),
(20210214152044),
(20210214170041),
(20210215111109),
(20210216172240),
(20210216173810),
(20210219135420),
(20210219210219),
(20210220105848),
(20210220111027),
(20210224111801),
(20210225113019),
(20210226061808),
(20210228190400),
(20210301100937),
(20210301102742),
(20210301102940),
(20210301163420),
(20210316164127),
(20210316164128),
(20210317080650),
(20210317103606),
(20210317104614),
(20210322173449),
(20210322183705),
(20210323080952),
(20210323082530),
(20210323200507),
(20210323201751),
(20210323202824),
(20210323203358),
(20210323220946),
(20210324174744),
(20210324182901),
(20210324201928),
(20210324211535),
(20210328202118),
(20210329120535),
(20210330085255),
(20210402105927),
(20210402112754),
(20210403102920);

[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-08-23 10:07:02.055827"], ["updated_at", "2021-08-23 10:07:02.055827"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (1.0ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2021-08-23 10:07:02.066876"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "75ecc48a7c5ef8e8c2ff1c88434cba543d701699"], ["created_at", "2021-08-23 10:07:02.075567"], ["updated_at", "2021-08-23 10:07:02.075567"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "franchises" WHERE "franchises"."name" = $1 LIMIT $2[0m  [["name", "Reims"], ["LIMIT", 1]]
  [1m[36mFranchise Create (1.7ms)[0m  [1m[32mINSERT INTO "franchises" ("name", "created_at", "updated_at", "email", "address", "zip_code", "city", "siret", "tax_id", "phone") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "Reims"], ["created_at", "2021-08-23 10:07:02.232656"], ["updated_at", "2021-08-23 10:07:02.232656"], ["email", "contact@cryotera.fr"], ["address", "2 rue Jules Méline"], ["zip_code", "51430"], ["city", "Bezannes"], ["siret", "81501516900015"], ["tax_id", "FR81815015169"], ["phone", "0326779750"]]
  [1m[36mBusinessHour Create (2.0ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Monday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-08-23 10:07:02.265561"], ["updated_at", "2021-08-23 10:07:02.265561"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (1.2ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Tuesday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-08-23 10:07:02.269193"], ["updated_at", "2021-08-23 10:07:02.269193"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (0.6ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Wednesday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-08-23 10:07:02.271640"], ["updated_at", "2021-08-23 10:07:02.271640"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (0.8ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Thursday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-08-23 10:07:02.273552"], ["updated_at", "2021-08-23 10:07:02.273552"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (0.6ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Friday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-08-23 10:07:02.275609"], ["updated_at", "2021-08-23 10:07:02.275609"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (0.7ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Saturday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-08-23 10:07:02.277471"], ["updated_at", "2021-08-23 10:07:02.277471"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Load (0.3ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sayid.mimouni@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (3.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "franchise_id", "created_at", "updated_at", "superuser", "password_digest") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["email", "sayid.mimouni@gmail.com"], ["first_name", "Saïd"], ["last_name", "Mimouni"], ["franchise_id", 1], ["created_at", "2021-08-23 10:07:02.584276"], ["updated_at", "2021-08-23 10:07:02.584276"], ["superuser", true], ["password_digest", "$2a$12$I6Rp.4k9gxr4ohY2/8Z3EuwgqAK1/7dfsSnuL2JfIZMiYWn4eR8Ji"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Load (0.5ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Create (1.7ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "male", "franchise_id", "created_at", "updated_at", "email", "password_digest", "birth_date") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["first_name", "John"], ["last_name", "Doe"], ["male", true], ["franchise_id", 1], ["created_at", "2021-08-23 10:07:02.882932"], ["updated_at", "2021-08-23 10:07:02.882932"], ["email", "client@gmail.com"], ["password_digest", "$2a$12$yS6hD4TA0G479GHBqzCs3.OwxPfrFYFf43p6vMoRr/AUfNC7YxYUy"], ["birth_date", "1990-01-01"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Load (0.5ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Create (1.2ms)[0m  [1m[32mINSERT INTO "companies" ("name", "email", "phone", "address", "zip_code", "city", "siret", "franchise_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "Apple"], ["email", "contact@apple.com"], ["phone", "0620853909"], ["address", "60 rue des Gobelins"], ["zip_code", "51100"], ["city", "Reims"], ["siret", "81214811200012"], ["franchise_id", 1], ["created_at", "2021-08-23 10:07:02.904049"], ["updated_at", "2021-08-23 10:07:02.904049"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Load (0.5ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mRoom Create (2.0ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "capacity", "franchise_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Salle de Cryothérapie"], ["capacity", 2], ["franchise_id", 1], ["created_at", "2021-08-23 10:07:02.920777"], ["updated_at", "2021-08-23 10:07:02.920777"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (1.9ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "duration", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Cryo Localisée"], ["description", "La cryothérapie localisée consiste à exposer une partie du corps à de l’air froid pulsé à -150 degrés. De par ses vertus anti-inflammatoire, antalgique et anti-âge, elle permet la diminution des douleurs localisées ainsi que la prévention du vieillissement cutané."], ["duration", 30], ["room_id", 1], ["created_at", "2021-08-23 10:07:02.945715"], ["updated_at", "2021-08-23 10:07:02.945715"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductPrice Create (1.6ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 1], ["total", 45.0], ["professionnal", false], ["product_id", 1], ["created_at", "2021-08-23 10:07:02.963994"], ["updated_at", "2021-08-23 10:07:02.963994"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.7ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at", "first_time") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["session_count", 1], ["total", 35.0], ["professionnal", false], ["product_id", 1], ["created_at", "2021-08-23 10:07:02.969312"], ["updated_at", "2021-08-23 10:07:02.969312"], ["first_time", true]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.7ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 5], ["total", 195.0], ["professionnal", false], ["product_id", 1], ["created_at", "2021-08-23 10:07:02.973601"], ["updated_at", "2021-08-23 10:07:02.973601"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.7ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 350.0], ["professionnal", false], ["product_id", 1], ["created_at", "2021-08-23 10:07:02.977417"], ["updated_at", "2021-08-23 10:07:02.977417"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.7ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 300.0], ["professionnal", true], ["product_id", 1], ["created_at", "2021-08-23 10:07:02.981471"], ["updated_at", "2021-08-23 10:07:02.981471"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.7ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 20], ["total", 500.0], ["professionnal", true], ["product_id", 1], ["created_at", "2021-08-23 10:07:02.986007"], ["updated_at", "2021-08-23 10:07:02.986007"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (0.6ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "duration", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Cryothérapie Corps Entier"], ["description", "La chambre de cryothérapie corps entier est un outil utilisant le froid à des fins thérapeutiques. Le procédé est fondé sur des séries d’expositions du corps entier à basses températures (entre -85°C et -110°C) sur une période de 3 à 4 minutes. L’exposition à ces températures permet à l’individu de mettre en place des réflexes de protection contre le froid et de développer des effets bénéfiques durables."], ["duration", 30], ["room_id", 1], ["created_at", "2021-08-23 10:07:02.990227"], ["updated_at", "2021-08-23 10:07:02.990227"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 1], ["total", 45.0], ["professionnal", false], ["product_id", 2], ["created_at", "2021-08-23 10:07:02.994440"], ["updated_at", "2021-08-23 10:07:02.994440"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at", "first_time") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["session_count", 1], ["total", 35.0], ["professionnal", false], ["product_id", 2], ["created_at", "2021-08-23 10:07:02.998192"], ["updated_at", "2021-08-23 10:07:02.998192"], ["first_time", true]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.7ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 5], ["total", 195.0], ["professionnal", false], ["product_id", 2], ["created_at", "2021-08-23 10:07:03.002096"], ["updated_at", "2021-08-23 10:07:03.002096"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.6ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 350.0], ["professionnal", false], ["product_id", 2], ["created_at", "2021-08-23 10:07:03.006266"], ["updated_at", "2021-08-23 10:07:03.006266"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 300.0], ["professionnal", true], ["product_id", 2], ["created_at", "2021-08-23 10:07:03.010321"], ["updated_at", "2021-08-23 10:07:03.010321"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.6ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 20], ["total", 500.0], ["professionnal", true], ["product_id", 2], ["created_at", "2021-08-23 10:07:03.014179"], ["updated_at", "2021-08-23 10:07:03.014179"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Load (0.6ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "duration", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Cryolipolise"], ["description", "Le terme cryolipolyse signifie littéralement “destruction des graisses par le froid“. Il s’agit d’un traitement efficace et non invasif permettant d’éliminer les amas graisseux de manière définitive et indolore."], ["duration", 30], ["room_id", 1], ["created_at", "2021-08-23 10:07:03.030016"], ["updated_at", "2021-08-23 10:07:03.030016"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.7ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 1], ["total", 45.0], ["professionnal", false], ["product_id", 3], ["created_at", "2021-08-23 10:07:03.034448"], ["updated_at", "2021-08-23 10:07:03.034448"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.7ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at", "first_time") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["session_count", 1], ["total", 35.0], ["professionnal", false], ["product_id", 3], ["created_at", "2021-08-23 10:07:03.038470"], ["updated_at", "2021-08-23 10:07:03.038470"], ["first_time", true]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.7ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 5], ["total", 195.0], ["professionnal", false], ["product_id", 3], ["created_at", "2021-08-23 10:07:03.042353"], ["updated_at", "2021-08-23 10:07:03.042353"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.6ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 350.0], ["professionnal", false], ["product_id", 3], ["created_at", "2021-08-23 10:07:03.046273"], ["updated_at", "2021-08-23 10:07:03.046273"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.9ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 300.0], ["professionnal", true], ["product_id", 3], ["created_at", "2021-08-23 10:07:03.050237"], ["updated_at", "2021-08-23 10:07:03.050237"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.6ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 20], ["total", 500.0], ["professionnal", true], ["product_id", 3], ["created_at", "2021-08-23 10:07:03.054526"], ["updated_at", "2021-08-23 10:07:03.054526"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Load (0.4ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "duration", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Pressothérapie"], ["description", "La pressothérapie est une méthode thérapeutique provoquant l’activation de la circulation veineuse et lymphatique par un système de compression et de décompression des pneumatiques."], ["duration", 30], ["room_id", 1], ["created_at", "2021-08-23 10:07:03.058695"], ["updated_at", "2021-08-23 10:07:03.058695"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 1], ["total", 45.0], ["professionnal", false], ["product_id", 4], ["created_at", "2021-08-23 10:07:03.064252"], ["updated_at", "2021-08-23 10:07:03.064252"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.8ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at", "first_time") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["session_count", 1], ["total", 35.0], ["professionnal", false], ["product_id", 4], ["created_at", "2021-08-23 10:07:03.071189"], ["updated_at", "2021-08-23 10:07:03.071189"], ["first_time", true]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProductPrice Create (10.1ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 5], ["total", 195.0], ["professionnal", false], ["product_id", 4], ["created_at", "2021-08-23 10:07:03.093465"], ["updated_at", "2021-08-23 10:07:03.093465"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 350.0], ["professionnal", false], ["product_id", 4], ["created_at", "2021-08-23 10:07:03.108063"], ["updated_at", "2021-08-23 10:07:03.108063"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 300.0], ["professionnal", true], ["product_id", 4], ["created_at", "2021-08-23 10:07:03.111854"], ["updated_at", "2021-08-23 10:07:03.111854"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.8ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 20], ["total", 500.0], ["professionnal", true], ["product_id", 4], ["created_at", "2021-08-23 10:07:03.115523"], ["updated_at", "2021-08-23 10:07:03.115523"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Load (0.4ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "duration", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Nutrition"], ["description", "Avoir une alimentation saine, équilibrée et adaptée est un véritable pilier de la santé. Nos partenaires en micronutrition accompagnent nos clients dans l’élaboration de protocoles nutritionnels sur-mesure en fonction de leurs besoins."], ["duration", 30], ["room_id", 1], ["created_at", "2021-08-23 10:07:03.119692"], ["updated_at", "2021-08-23 10:07:03.119692"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.6ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 1], ["total", 45.0], ["professionnal", false], ["product_id", 5], ["created_at", "2021-08-23 10:07:03.123582"], ["updated_at", "2021-08-23 10:07:03.123582"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at", "first_time") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["session_count", 1], ["total", 35.0], ["professionnal", false], ["product_id", 5], ["created_at", "2021-08-23 10:07:03.126910"], ["updated_at", "2021-08-23 10:07:03.126910"], ["first_time", true]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.6ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 5], ["total", 195.0], ["professionnal", false], ["product_id", 5], ["created_at", "2021-08-23 10:07:03.130149"], ["updated_at", "2021-08-23 10:07:03.130149"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 350.0], ["professionnal", false], ["product_id", 5], ["created_at", "2021-08-23 10:07:03.133567"], ["updated_at", "2021-08-23 10:07:03.133567"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 300.0], ["professionnal", true], ["product_id", 5], ["created_at", "2021-08-23 10:07:03.136820"], ["updated_at", "2021-08-23 10:07:03.136820"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.6ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 20], ["total", 500.0], ["professionnal", true], ["product_id", 5], ["created_at", "2021-08-23 10:07:03.140020"], ["updated_at", "2021-08-23 10:07:03.140020"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7992348028875656775)[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(7992348028875656775)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "franchises" WHERE "franchises"."name" = $1 LIMIT $2[0m  [["name", "Reims"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=e3efc5ba-0ae5-43a9-b2e1-c505f284b9bb (only available if report was successful)
Started GET "/" for ::1 at 2021-08-23 10:08:28 +0200
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/railties-6.1.3/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/railties-6.1.3/lib/rails/templates/rails/welcome/index.html.erb (Duration: 5.3ms | Allocations: 482)
Completed 200 OK in 19ms (Views: 8.4ms | ActiveRecord: 0.0ms | Allocations: 4727)


Started GET "/reservations" for ::1 at 2021-08-23 10:08:53 +0200
  
ActionController::RoutingError (No route matches [GET] "/reservations"):
  
Started GET "/login" for ::1 at 2021-08-23 10:09:05 +0200
  
ActionController::RoutingError (No route matches [GET] "/login"):
  
Started GET "/admin" for ::1 at 2021-08-23 10:09:24 +0200
  
ActionController::RoutingError (No route matches [GET] "/admin"):
  
Started GET "/admin" for ::1 at 2021-08-23 10:09:26 +0200
  
ActionController::RoutingError (No route matches [GET] "/admin"):
  
Started GET "/" for ::1 at 2021-09-14 14:31:51 +0200
  [1m[35m (3.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/railties-6.1.3/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/railties-6.1.3/lib/rails/templates/rails/welcome/index.html.erb (Duration: 23.2ms | Allocations: 309)
Completed 200 OK in 34ms (Views: 25.0ms | ActiveRecord: 0.0ms | Allocations: 2948)


Started GET "/entreprises" for ::1 at 2021-09-14 14:32:14 +0200
  
ActionController::RoutingError (No route matches [GET] "/entreprises"):
  
Started GET "/login" for ::1 at 2021-09-14 14:32:22 +0200
  
ActionController::RoutingError (No route matches [GET] "/login"):
  
Started GET "/subscriptions" for ::1 at 2021-09-14 14:32:36 +0200
  
ActionController::RoutingError (No route matches [GET] "/subscriptions"):
  
Started GET "/users/sign_in" for ::1 at 2021-09-14 14:32:41 +0200
  
ActionController::RoutingError (No route matches [GET] "/users/sign_in"):
  
  [1m[35m (5.2ms)[0m  [1m[35mCREATE DATABASE "test_app_development" ENCODING = 'unicode'[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE DATABASE "test_app_test" ENCODING = 'unicode'[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (5.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35mSQL (1.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "unaccent"[0m
  [1m[35m (96.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_attachments" CASCADE[0m
  [1m[35m (20.4ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (4.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_blobs" CASCADE[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "byte_size" bigint NOT NULL, "checksum" character varying NOT NULL, "created_at" timestamp NOT NULL, "service_name" character varying NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_variant_records" CASCADE[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "blockers" CASCADE[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "blockers" ("id" bigserial primary key, "start_time" timestamp NOT NULL, "end_time" timestamp NOT NULL, "notes" text NOT NULL, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "franchise_id" bigint NOT NULL, "room_id" bigint NOT NULL, "blocking" boolean DEFAULT TRUE, "global" boolean DEFAULT FALSE, "blocker_id" bigint)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_blocker_id" ON "blockers" ("blocker_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_franchise_id" ON "blockers" ("franchise_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_room_id" ON "blockers" ("room_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_user_id" ON "blockers" ("user_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "business_hours" CASCADE[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE TABLE "business_hours" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "day" character varying NOT NULL, "morning_start_time" time NOT NULL, "morning_end_time" time NOT NULL, "afternoon_start_time" time NOT NULL, "afternoon_end_time" time NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_business_hours_on_franchise_id" ON "business_hours" ("franchise_id")[0m
  [1m[35m (4.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "campaign_templates" CASCADE[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "campaign_templates" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "external_id" integer NOT NULL, "name" text NOT NULL, "subject" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "html" text NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_campaign_templates_on_external_id" ON "campaign_templates" ("external_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_campaign_templates_on_franchise_id" ON "campaign_templates" ("franchise_id")[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "campaigns" CASCADE[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "campaigns" ("id" bigserial primary key, "name" character varying NOT NULL, "body" text NOT NULL, "recipients" character varying[], "sms" boolean NOT NULL, "draft" boolean DEFAULT TRUE NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "filters" json, "sendinblue_list_id" integer, "sendinblue_campaign_id" integer, "campaign_template_id" bigint)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_campaigns_on_campaign_template_id" ON "campaigns" ("campaign_template_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_campaigns_on_franchise_id" ON "campaigns" ("franchise_id")[0m
  [1m[35m (9.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients" CASCADE[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "clients" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "male" boolean NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "phone" character varying, "objectives" character varying[] DEFAULT '{}', "address" text, "zip_code" character varying, "city" character varying, "password_digest" character varying, "newsletter" boolean, "last_logged_at" timestamp, "client_id" bigint, "user_id" bigint, "birth_date" date)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_clients_on_client_id" ON "clients" ("client_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_clients_on_franchise_id" ON "clients" ("franchise_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_clients_on_user_id" ON "clients" ("user_id")[0m
  [1m[35m (3.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "comments" CASCADE[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "comments" ("id" bigserial primary key, "user_id" bigint NOT NULL, "client_id" bigint NOT NULL, "body" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE INDEX "index_comments_on_client_id" ON "comments" ("client_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_comments_on_user_id" ON "comments" ("user_id")[0m
  [1m[35m (5.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying NOT NULL, "email" character varying NOT NULL, "phone" character varying NOT NULL, "address" text NOT NULL, "zip_code" character varying NOT NULL, "city" character varying NOT NULL, "siret" character varying NOT NULL, "comment" text, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_companies_on_franchise_id" ON "companies" ("franchise_id")[0m
  [1m[35m (6.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_clients" CASCADE[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "company_clients" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "email" character varying NOT NULL, "job" character varying, "phone" character varying, "company_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "password_digest" character varying, "last_logged_at" timestamp, "company_client_id" bigint, "male" boolean, "objectives" character varying[] DEFAULT '{}', "address" text, "zip_code" character varying, "city" character varying, "boolean" boolean, "birth_date" date, "newsletter" boolean)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_company_clients_on_company_client_id" ON "company_clients" ("company_client_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_company_clients_on_company_id" ON "company_clients" ("company_id")[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "coupons" CASCADE[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "coupons" ("id" bigserial primary key, "name" character varying NOT NULL, "value" integer NOT NULL, "code" character varying NOT NULL, "percentage" boolean NOT NULL, "start_date" date, "end_date" date, "usage_limit" integer, "usage_limit_per_person" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "male" boolean, "objectives" character varying[], "product_ids" character varying[], "new_client" boolean DEFAULT FALSE, "loyalty" boolean DEFAULT FALSE, "client_id" bigint, "company_client_id" bigint)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_coupons_on_client_id" ON "coupons" ("client_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_coupons_on_company_client_id" ON "coupons" ("company_client_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "coupons_franchises" CASCADE[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "coupons_franchises" ("id" bigserial primary key, "coupon_id" bigint NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_coupons_franchises_on_coupon_id_and_franchise_id" ON "coupons_franchises" ("coupon_id", "franchise_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_coupons_franchises_on_coupon_id" ON "coupons_franchises" ("coupon_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_coupons_franchises_on_franchise_id" ON "coupons_franchises" ("franchise_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "credits" CASCADE[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "credits" ("id" bigserial primary key, "client_id" bigint, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "company_client_id" bigint)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_credits_on_client_id" ON "credits" ("client_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_credits_on_company_client_id" ON "credits" ("company_client_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_credits_on_product_id" ON "credits" ("product_id")[0m
  [1m[35m (3.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "external_products" CASCADE[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE TABLE "external_products" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "name" character varying NOT NULL, "amount" integer NOT NULL, "tax_rate" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_external_products_on_franchise_id" ON "external_products" ("franchise_id")[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "franchises" CASCADE[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "franchises" ("id" bigserial primary key, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "banking_provider" character varying, "banking_secret_key" text, "banking_secret_id" text, "email" character varying, "address" text, "zip_code" character varying, "city" character varying, "siret" character varying, "tax_id" character varying, "iban" character varying, "phone" character varying, "instagram_username" text, "facebook_chat_snippet" text, "sendinblue_api_key" text)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_franchises_on_name" ON "franchises" ("name")[0m
  [1m[35m (6.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "payments" CASCADE[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "payments" ("id" bigserial primary key, "client_id" bigint, "amount" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "bank_name" character varying, "transaction_id" character varying, "coupon_id" bigint, "as_paid" boolean, "product_name" character varying NOT NULL, "mode" character varying, "tax_rate" float DEFAULT 20.0, "company_client_id" bigint)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_payments_on_client_id" ON "payments" ("client_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_payments_on_company_client_id" ON "payments" ("company_client_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_payments_on_coupon_id" ON "payments" ("coupon_id")[0m
  [1m[35m (6.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_prices" CASCADE[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "product_prices" ("id" bigserial primary key, "session_count" integer NOT NULL, "total" float NOT NULL, "professionnal" boolean NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "first_time" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_product_prices_on_product_id" ON "product_prices" ("product_id")[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "products" CASCADE[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "description" text NOT NULL, "duration" integer NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "active" boolean DEFAULT TRUE)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_products_on_room_id" ON "products" ("room_id")[0m
  [1m[35m (4.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations" CASCADE[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" bigserial primary key, "start_time" timestamp, "email_notification" boolean NOT NULL, "first_time" boolean NOT NULL, "client_id" bigint, "product_price_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "company_client_id" bigint, "payment_id" bigint, "canceled" boolean DEFAULT FALSE NOT NULL, "cancelation_reason" text, "refunded" boolean DEFAULT FALSE NOT NULL, "paid_by_credit" boolean DEFAULT FALSE NOT NULL, "notes" text, "user_id" bigint, "signature" text, "to_be_paid_online" boolean NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_client_id" ON "reservations" ("client_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_company_client_id" ON "reservations" ("company_client_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_payment_id" ON "reservations" ("payment_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_product_price_id" ON "reservations" ("product_price_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_user_id" ON "reservations" ("user_id")[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews" CASCADE[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" bigserial primary key, "body" text NOT NULL, "published" boolean, "product_id" bigint NOT NULL, "client_id" bigint, "company_client_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "homepage" boolean)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_client_id" ON "reviews" ("client_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_company_client_id" ON "reviews" ("company_client_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_product_id" ON "reviews" ("product_id")[0m
  [1m[35m (3.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "rooms" CASCADE[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "rooms" ("id" bigserial primary key, "name" character varying NOT NULL, "capacity" integer NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_rooms_on_franchise_id" ON "rooms" ("franchise_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscription_plans" CASCADE[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "subscription_plans" ("id" bigserial primary key, "product_id" bigint NOT NULL, "session_count" integer NOT NULL, "total" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_subscription_plans_on_product_id" ON "subscription_plans" ("product_id")[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "subscription_plan_id" bigint NOT NULL, "client_id" bigint NOT NULL, "external_id" character varying, "status" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "to_be_canceled_at" timestamp)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_client_id" ON "subscriptions" ("client_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_subscription_plan_id_and_client_id" ON "subscriptions" ("subscription_plan_id", "client_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_subscription_plan_id" ON "subscriptions" ("subscription_plan_id")[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "survey_questions" CASCADE[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "survey_questions" ("id" bigserial primary key, "survey_id" bigint NOT NULL, "body" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_survey_questions_on_survey_id" ON "survey_questions" ("survey_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "surveys" CASCADE[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "surveys" ("id" bigserial primary key, "product_id" bigint NOT NULL, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE INDEX "index_surveys_on_product_id" ON "surveys" ("product_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying NOT NULL, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "superuser" boolean DEFAULT FALSE NOT NULL, "last_logged_at" timestamp, "password_digest" character varying, "nutritionist" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_users_on_franchise_id" ON "users" ("franchise_id")[0m
  [1m[35m (15.0ms)[0m  [1m[35mALTER TABLE "active_storage_attachments" ADD CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "active_storage_variant_records" ADD CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_e0849eddae"
FOREIGN KEY ("blocker_id")
  REFERENCES "blockers" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_59c546b1e0"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_fc2fc1d405"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (3.7ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_7614b1ad87"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.7ms)[0m  [1m[35mALTER TABLE "business_hours" ADD CONSTRAINT "fk_rails_07296b7035"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "campaign_templates" ADD CONSTRAINT "fk_rails_9c0d24ccff"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "campaigns" ADD CONSTRAINT "fk_rails_649cc82f45"
FOREIGN KEY ("campaign_template_id")
  REFERENCES "campaign_templates" ("id")
[0m
  [1m[35m (4.9ms)[0m  [1m[35mALTER TABLE "campaigns" ADD CONSTRAINT "fk_rails_80a802b165"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_d80a12f36a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_2cc4be869c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_21c421fd41"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.3ms)[0m  [1m[35mALTER TABLE "comments" ADD CONSTRAINT "fk_rails_b7673bd1d8"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "comments" ADD CONSTRAINT "fk_rails_03de2dc08c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_3eefe7b64c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "company_clients" ADD CONSTRAINT "fk_rails_c014da4d2a"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "company_clients" ADD CONSTRAINT "fk_rails_3a46874aaf"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "coupons" ADD CONSTRAINT "fk_rails_58e636839e"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "coupons" ADD CONSTRAINT "fk_rails_9a0bfe084f"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "coupons_franchises" ADD CONSTRAINT "fk_rails_cdbd738627"
FOREIGN KEY ("coupon_id")
  REFERENCES "coupons" ("id")
[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "coupons_franchises" ADD CONSTRAINT "fk_rails_09b1528f6c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_deafe42183"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (4.9ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_e446f4a120"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (3.7ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_d7bdca2159"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (3.4ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_66d0485df7"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_94c15b6260"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_a7af64837e"
FOREIGN KEY ("coupon_id")
  REFERENCES "coupons" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "product_prices" ADD CONSTRAINT "fk_rails_e7ec0c97a3"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "products" ADD CONSTRAINT "fk_rails_71119d0f74"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_9c963d6879"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_9089ec93d0"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_653e025ae0"
FOREIGN KEY ("payment_id")
  REFERENCES "payments" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_57d12ba9a0"
FOREIGN KEY ("product_price_id")
  REFERENCES "product_prices" ("id")
[0m
  [1m[35m (8.0ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_48a92fce51"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (4.6ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_09c661230e"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_9d0eb81ddb"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_bedd9094d4"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "rooms" ADD CONSTRAINT "fk_rails_f0b4b4dbb2"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscription_plans" ADD CONSTRAINT "fk_rails_b112070c01"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_19fca7085f"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_355348f174"
FOREIGN KEY ("subscription_plan_id")
  REFERENCES "subscription_plans" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "survey_questions" ADD CONSTRAINT "fk_rails_d0558bfd89"
FOREIGN KEY ("survey_id")
  REFERENCES "surveys" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "surveys" ADD CONSTRAINT "fk_rails_c90d5f8eac"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "users" ADD CONSTRAINT "fk_rails_59dbdb3a6d"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35mSQL (2.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "unaccent"[0m
  [1m[35m (18.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_attachments" CASCADE[0m
  [1m[35m (15.7ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_blobs" CASCADE[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "byte_size" bigint NOT NULL, "checksum" character varying NOT NULL, "created_at" timestamp NOT NULL, "service_name" character varying NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_variant_records" CASCADE[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (7.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "blockers" CASCADE[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "blockers" ("id" bigserial primary key, "start_time" timestamp NOT NULL, "end_time" timestamp NOT NULL, "notes" text NOT NULL, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "franchise_id" bigint NOT NULL, "room_id" bigint NOT NULL, "blocking" boolean DEFAULT TRUE, "global" boolean DEFAULT FALSE, "blocker_id" bigint)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_blocker_id" ON "blockers" ("blocker_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_franchise_id" ON "blockers" ("franchise_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_room_id" ON "blockers" ("room_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_user_id" ON "blockers" ("user_id")[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "business_hours" CASCADE[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "business_hours" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "day" character varying NOT NULL, "morning_start_time" time NOT NULL, "morning_end_time" time NOT NULL, "afternoon_start_time" time NOT NULL, "afternoon_end_time" time NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_business_hours_on_franchise_id" ON "business_hours" ("franchise_id")[0m
  [1m[35m (4.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "campaign_templates" CASCADE[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "campaign_templates" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "external_id" integer NOT NULL, "name" text NOT NULL, "subject" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "html" text NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_campaign_templates_on_external_id" ON "campaign_templates" ("external_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_campaign_templates_on_franchise_id" ON "campaign_templates" ("franchise_id")[0m
  [1m[35m (4.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "campaigns" CASCADE[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "campaigns" ("id" bigserial primary key, "name" character varying NOT NULL, "body" text NOT NULL, "recipients" character varying[], "sms" boolean NOT NULL, "draft" boolean DEFAULT TRUE NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "filters" json, "sendinblue_list_id" integer, "sendinblue_campaign_id" integer, "campaign_template_id" bigint)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_campaigns_on_campaign_template_id" ON "campaigns" ("campaign_template_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_campaigns_on_franchise_id" ON "campaigns" ("franchise_id")[0m
  [1m[35m (8.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients" CASCADE[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "clients" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "male" boolean NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "phone" character varying, "objectives" character varying[] DEFAULT '{}', "address" text, "zip_code" character varying, "city" character varying, "password_digest" character varying, "newsletter" boolean, "last_logged_at" timestamp, "client_id" bigint, "user_id" bigint, "birth_date" date)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_clients_on_client_id" ON "clients" ("client_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_clients_on_franchise_id" ON "clients" ("franchise_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_clients_on_user_id" ON "clients" ("user_id")[0m
  [1m[35m (4.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "comments" CASCADE[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "comments" ("id" bigserial primary key, "user_id" bigint NOT NULL, "client_id" bigint NOT NULL, "body" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_comments_on_client_id" ON "comments" ("client_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_comments_on_user_id" ON "comments" ("user_id")[0m
  [1m[35m (4.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying NOT NULL, "email" character varying NOT NULL, "phone" character varying NOT NULL, "address" text NOT NULL, "zip_code" character varying NOT NULL, "city" character varying NOT NULL, "siret" character varying NOT NULL, "comment" text, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_companies_on_franchise_id" ON "companies" ("franchise_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_clients" CASCADE[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "company_clients" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "email" character varying NOT NULL, "job" character varying, "phone" character varying, "company_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "password_digest" character varying, "last_logged_at" timestamp, "company_client_id" bigint, "male" boolean, "objectives" character varying[] DEFAULT '{}', "address" text, "zip_code" character varying, "city" character varying, "boolean" boolean, "birth_date" date, "newsletter" boolean)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_company_clients_on_company_client_id" ON "company_clients" ("company_client_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_company_clients_on_company_id" ON "company_clients" ("company_id")[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "coupons" CASCADE[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "coupons" ("id" bigserial primary key, "name" character varying NOT NULL, "value" integer NOT NULL, "code" character varying NOT NULL, "percentage" boolean NOT NULL, "start_date" date, "end_date" date, "usage_limit" integer, "usage_limit_per_person" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "male" boolean, "objectives" character varying[], "product_ids" character varying[], "new_client" boolean DEFAULT FALSE, "loyalty" boolean DEFAULT FALSE, "client_id" bigint, "company_client_id" bigint)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_coupons_on_client_id" ON "coupons" ("client_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_coupons_on_company_client_id" ON "coupons" ("company_client_id")[0m
  [1m[35m (4.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "coupons_franchises" CASCADE[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "coupons_franchises" ("id" bigserial primary key, "coupon_id" bigint NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_coupons_franchises_on_coupon_id_and_franchise_id" ON "coupons_franchises" ("coupon_id", "franchise_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_coupons_franchises_on_coupon_id" ON "coupons_franchises" ("coupon_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_coupons_franchises_on_franchise_id" ON "coupons_franchises" ("franchise_id")[0m
  [1m[35m (3.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "credits" CASCADE[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "credits" ("id" bigserial primary key, "client_id" bigint, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "company_client_id" bigint)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_credits_on_client_id" ON "credits" ("client_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_credits_on_company_client_id" ON "credits" ("company_client_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_credits_on_product_id" ON "credits" ("product_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "external_products" CASCADE[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "external_products" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "name" character varying NOT NULL, "amount" integer NOT NULL, "tax_rate" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_external_products_on_franchise_id" ON "external_products" ("franchise_id")[0m
  [1m[35m (3.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "franchises" CASCADE[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "franchises" ("id" bigserial primary key, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "banking_provider" character varying, "banking_secret_key" text, "banking_secret_id" text, "email" character varying, "address" text, "zip_code" character varying, "city" character varying, "siret" character varying, "tax_id" character varying, "iban" character varying, "phone" character varying, "instagram_username" text, "facebook_chat_snippet" text, "sendinblue_api_key" text)[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_franchises_on_name" ON "franchises" ("name")[0m
  [1m[35m (5.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "payments" CASCADE[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "payments" ("id" bigserial primary key, "client_id" bigint, "amount" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "bank_name" character varying, "transaction_id" character varying, "coupon_id" bigint, "as_paid" boolean, "product_name" character varying NOT NULL, "mode" character varying, "tax_rate" float DEFAULT 20.0, "company_client_id" bigint)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_payments_on_client_id" ON "payments" ("client_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_payments_on_company_client_id" ON "payments" ("company_client_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_payments_on_coupon_id" ON "payments" ("coupon_id")[0m
  [1m[35m (3.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_prices" CASCADE[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "product_prices" ("id" bigserial primary key, "session_count" integer NOT NULL, "total" float NOT NULL, "professionnal" boolean NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "first_time" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_product_prices_on_product_id" ON "product_prices" ("product_id")[0m
  [1m[35m (5.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "products" CASCADE[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "description" text NOT NULL, "duration" integer NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "active" boolean DEFAULT TRUE)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_products_on_room_id" ON "products" ("room_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations" CASCADE[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" bigserial primary key, "start_time" timestamp, "email_notification" boolean NOT NULL, "first_time" boolean NOT NULL, "client_id" bigint, "product_price_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "company_client_id" bigint, "payment_id" bigint, "canceled" boolean DEFAULT FALSE NOT NULL, "cancelation_reason" text, "refunded" boolean DEFAULT FALSE NOT NULL, "paid_by_credit" boolean DEFAULT FALSE NOT NULL, "notes" text, "user_id" bigint, "signature" text, "to_be_paid_online" boolean NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_client_id" ON "reservations" ("client_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_company_client_id" ON "reservations" ("company_client_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_payment_id" ON "reservations" ("payment_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_product_price_id" ON "reservations" ("product_price_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_user_id" ON "reservations" ("user_id")[0m
  [1m[35m (9.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews" CASCADE[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" bigserial primary key, "body" text NOT NULL, "published" boolean, "product_id" bigint NOT NULL, "client_id" bigint, "company_client_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "homepage" boolean)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_client_id" ON "reviews" ("client_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_company_client_id" ON "reviews" ("company_client_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_product_id" ON "reviews" ("product_id")[0m
  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "rooms" CASCADE[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "rooms" ("id" bigserial primary key, "name" character varying NOT NULL, "capacity" integer NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE INDEX "index_rooms_on_franchise_id" ON "rooms" ("franchise_id")[0m
  [1m[35m (3.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscription_plans" CASCADE[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "subscription_plans" ("id" bigserial primary key, "product_id" bigint NOT NULL, "session_count" integer NOT NULL, "total" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_subscription_plans_on_product_id" ON "subscription_plans" ("product_id")[0m
  [1m[35m (11.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "subscription_plan_id" bigint NOT NULL, "client_id" bigint NOT NULL, "external_id" character varying, "status" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "to_be_canceled_at" timestamp)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_client_id" ON "subscriptions" ("client_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_subscription_plan_id_and_client_id" ON "subscriptions" ("subscription_plan_id", "client_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_subscription_plan_id" ON "subscriptions" ("subscription_plan_id")[0m
  [1m[35m (10.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "survey_questions" CASCADE[0m
  [1m[35m (12.0ms)[0m  [1m[35mCREATE TABLE "survey_questions" ("id" bigserial primary key, "survey_id" bigint NOT NULL, "body" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE INDEX "index_survey_questions_on_survey_id" ON "survey_questions" ("survey_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "surveys" CASCADE[0m
  [1m[35m (12.0ms)[0m  [1m[35mCREATE TABLE "surveys" ("id" bigserial primary key, "product_id" bigint NOT NULL, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_surveys_on_product_id" ON "surveys" ("product_id")[0m
  [1m[35m (4.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (11.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying NOT NULL, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "superuser" boolean DEFAULT FALSE NOT NULL, "last_logged_at" timestamp, "password_digest" character varying, "nutritionist" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_users_on_franchise_id" ON "users" ("franchise_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mALTER TABLE "active_storage_attachments" ADD CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "active_storage_variant_records" ADD CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_e0849eddae"
FOREIGN KEY ("blocker_id")
  REFERENCES "blockers" ("id")
[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_59c546b1e0"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_fc2fc1d405"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_7614b1ad87"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "business_hours" ADD CONSTRAINT "fk_rails_07296b7035"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (4.6ms)[0m  [1m[35mALTER TABLE "campaign_templates" ADD CONSTRAINT "fk_rails_9c0d24ccff"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "campaigns" ADD CONSTRAINT "fk_rails_649cc82f45"
FOREIGN KEY ("campaign_template_id")
  REFERENCES "campaign_templates" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "campaigns" ADD CONSTRAINT "fk_rails_80a802b165"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_d80a12f36a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_2cc4be869c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_21c421fd41"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "comments" ADD CONSTRAINT "fk_rails_b7673bd1d8"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "comments" ADD CONSTRAINT "fk_rails_03de2dc08c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_3eefe7b64c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "company_clients" ADD CONSTRAINT "fk_rails_c014da4d2a"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "company_clients" ADD CONSTRAINT "fk_rails_3a46874aaf"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "coupons" ADD CONSTRAINT "fk_rails_58e636839e"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "coupons" ADD CONSTRAINT "fk_rails_9a0bfe084f"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "coupons_franchises" ADD CONSTRAINT "fk_rails_cdbd738627"
FOREIGN KEY ("coupon_id")
  REFERENCES "coupons" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "coupons_franchises" ADD CONSTRAINT "fk_rails_09b1528f6c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (3.3ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_deafe42183"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_e446f4a120"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_d7bdca2159"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_66d0485df7"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_94c15b6260"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_a7af64837e"
FOREIGN KEY ("coupon_id")
  REFERENCES "coupons" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "product_prices" ADD CONSTRAINT "fk_rails_e7ec0c97a3"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "products" ADD CONSTRAINT "fk_rails_71119d0f74"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_9c963d6879"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_9089ec93d0"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_653e025ae0"
FOREIGN KEY ("payment_id")
  REFERENCES "payments" ("id")
[0m
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_57d12ba9a0"
FOREIGN KEY ("product_price_id")
  REFERENCES "product_prices" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_48a92fce51"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_09c661230e"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_9d0eb81ddb"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_bedd9094d4"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "rooms" ADD CONSTRAINT "fk_rails_f0b4b4dbb2"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "subscription_plans" ADD CONSTRAINT "fk_rails_b112070c01"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_19fca7085f"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_355348f174"
FOREIGN KEY ("subscription_plan_id")
  REFERENCES "subscription_plans" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "survey_questions" ADD CONSTRAINT "fk_rails_d0558bfd89"
FOREIGN KEY ("survey_id")
  REFERENCES "surveys" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "surveys" ADD CONSTRAINT "fk_rails_c90d5f8eac"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "users" ADD CONSTRAINT "fk_rails_59dbdb3a6d"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (1.2ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "development"], ["updated_at", "2021-09-14 14:32:55.019736"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.7ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2021-09-14 14:32:55.031022"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "franchises" WHERE "franchises"."name" = $1 LIMIT $2[0m  [["name", "Reims"], ["LIMIT", 1]]
  [1m[36mFranchise Create (0.9ms)[0m  [1m[32mINSERT INTO "franchises" ("name", "created_at", "updated_at", "email", "address", "zip_code", "city", "siret", "tax_id", "phone") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "Reims"], ["created_at", "2021-09-14 14:32:55.180129"], ["updated_at", "2021-09-14 14:32:55.180129"], ["email", "contact@cryotera.fr"], ["address", "2 rue Jules Méline"], ["zip_code", "51430"], ["city", "Bezannes"], ["siret", "81501516900015"], ["tax_id", "FR81815015169"], ["phone", "0326779750"]]
  [1m[36mBusinessHour Create (2.2ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Monday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-09-14 14:32:55.204054"], ["updated_at", "2021-09-14 14:32:55.204054"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (0.4ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Tuesday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-09-14 14:32:55.208081"], ["updated_at", "2021-09-14 14:32:55.208081"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (0.3ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Wednesday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-09-14 14:32:55.209896"], ["updated_at", "2021-09-14 14:32:55.209896"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (0.5ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Thursday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-09-14 14:32:55.211549"], ["updated_at", "2021-09-14 14:32:55.211549"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (0.3ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Friday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-09-14 14:32:55.213445"], ["updated_at", "2021-09-14 14:32:55.213445"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (0.4ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Saturday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-09-14 14:32:55.215155"], ["updated_at", "2021-09-14 14:32:55.215155"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Load (4.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sayid.mimouni@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (26.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "franchise_id", "created_at", "updated_at", "superuser", "password_digest") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["email", "sayid.mimouni@gmail.com"], ["first_name", "Saïd"], ["last_name", "Mimouni"], ["franchise_id", 1], ["created_at", "2021-09-14 14:32:55.511661"], ["updated_at", "2021-09-14 14:32:55.511661"], ["superuser", true], ["password_digest", "$2a$12$TlV0FaKarslePEbzIuE8ruJyKpeqSa9ZQJud0NHLWLCc4zAn64g6C"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Load (0.5ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Create (1.6ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "male", "franchise_id", "created_at", "updated_at", "email", "password_digest", "birth_date") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["first_name", "John"], ["last_name", "Doe"], ["male", true], ["franchise_id", 1], ["created_at", "2021-09-14 14:32:55.828467"], ["updated_at", "2021-09-14 14:32:55.828467"], ["email", "client@gmail.com"], ["password_digest", "$2a$12$7AE37ZbXnRdXaZl4F6IaAeBPqnCj01SWhsqo4qmSai.lU5H2mplpK"], ["birth_date", "1990-01-01"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Load (0.6ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Create (1.1ms)[0m  [1m[32mINSERT INTO "companies" ("name", "email", "phone", "address", "zip_code", "city", "siret", "franchise_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "Apple"], ["email", "contact@apple.com"], ["phone", "0620853909"], ["address", "60 rue des Gobelins"], ["zip_code", "51100"], ["city", "Reims"], ["siret", "81214811200012"], ["franchise_id", 1], ["created_at", "2021-09-14 14:32:55.850345"], ["updated_at", "2021-09-14 14:32:55.850345"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Load (0.5ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mRoom Create (6.7ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "capacity", "franchise_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Salle de Cryothérapie"], ["capacity", 2], ["franchise_id", 1], ["created_at", "2021-09-14 14:32:55.866194"], ["updated_at", "2021-09-14 14:32:55.866194"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (1.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "duration", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Cryo Localisée"], ["description", "La cryothérapie localisée consiste à exposer une partie du corps à de l’air froid pulsé à -150 degrés. De par ses vertus anti-inflammatoire, antalgique et anti-âge, elle permet la diminution des douleurs localisées ainsi que la prévention du vieillissement cutané."], ["duration", 30], ["room_id", 1], ["created_at", "2021-09-14 14:32:55.892902"], ["updated_at", "2021-09-14 14:32:55.892902"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductPrice Create (1.7ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 1], ["total", 45.0], ["professionnal", false], ["product_id", 1], ["created_at", "2021-09-14 14:32:55.919450"], ["updated_at", "2021-09-14 14:32:55.919450"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at", "first_time") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["session_count", 1], ["total", 35.0], ["professionnal", false], ["product_id", 1], ["created_at", "2021-09-14 14:32:55.924404"], ["updated_at", "2021-09-14 14:32:55.924404"], ["first_time", true]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.6ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 5], ["total", 195.0], ["professionnal", false], ["product_id", 1], ["created_at", "2021-09-14 14:32:55.927775"], ["updated_at", "2021-09-14 14:32:55.927775"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 350.0], ["professionnal", false], ["product_id", 1], ["created_at", "2021-09-14 14:32:55.931435"], ["updated_at", "2021-09-14 14:32:55.931435"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 300.0], ["professionnal", true], ["product_id", 1], ["created_at", "2021-09-14 14:32:55.934948"], ["updated_at", "2021-09-14 14:32:55.934948"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 20], ["total", 500.0], ["professionnal", true], ["product_id", 1], ["created_at", "2021-09-14 14:32:55.938169"], ["updated_at", "2021-09-14 14:32:55.938169"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "duration", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Cryothérapie Corps Entier"], ["description", "La chambre de cryothérapie corps entier est un outil utilisant le froid à des fins thérapeutiques. Le procédé est fondé sur des séries d’expositions du corps entier à basses températures (entre -85°C et -110°C) sur une période de 3 à 4 minutes. L’exposition à ces températures permet à l’individu de mettre en place des réflexes de protection contre le froid et de développer des effets bénéfiques durables."], ["duration", 30], ["room_id", 1], ["created_at", "2021-09-14 14:32:55.941407"], ["updated_at", "2021-09-14 14:32:55.941407"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.8ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 1], ["total", 45.0], ["professionnal", false], ["product_id", 2], ["created_at", "2021-09-14 14:32:55.944511"], ["updated_at", "2021-09-14 14:32:55.944511"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at", "first_time") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["session_count", 1], ["total", 35.0], ["professionnal", false], ["product_id", 2], ["created_at", "2021-09-14 14:32:55.948246"], ["updated_at", "2021-09-14 14:32:55.948246"], ["first_time", true]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 5], ["total", 195.0], ["professionnal", false], ["product_id", 2], ["created_at", "2021-09-14 14:32:55.952108"], ["updated_at", "2021-09-14 14:32:55.952108"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 350.0], ["professionnal", false], ["product_id", 2], ["created_at", "2021-09-14 14:32:55.955582"], ["updated_at", "2021-09-14 14:32:55.955582"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 300.0], ["professionnal", true], ["product_id", 2], ["created_at", "2021-09-14 14:32:55.959168"], ["updated_at", "2021-09-14 14:32:55.959168"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductPrice Create (1.1ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 20], ["total", 500.0], ["professionnal", true], ["product_id", 2], ["created_at", "2021-09-14 14:32:55.962428"], ["updated_at", "2021-09-14 14:32:55.962428"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (1.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "duration", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Cryolipolise"], ["description", "Le terme cryolipolyse signifie littéralement “destruction des graisses par le froid“. Il s’agit d’un traitement efficace et non invasif permettant d’éliminer les amas graisseux de manière définitive et indolore."], ["duration", 30], ["room_id", 1], ["created_at", "2021-09-14 14:32:55.966791"], ["updated_at", "2021-09-14 14:32:55.966791"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 1], ["total", 45.0], ["professionnal", false], ["product_id", 3], ["created_at", "2021-09-14 14:32:55.971212"], ["updated_at", "2021-09-14 14:32:55.971212"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at", "first_time") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["session_count", 1], ["total", 35.0], ["professionnal", false], ["product_id", 3], ["created_at", "2021-09-14 14:32:55.974804"], ["updated_at", "2021-09-14 14:32:55.974804"], ["first_time", true]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.6ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 5], ["total", 195.0], ["professionnal", false], ["product_id", 3], ["created_at", "2021-09-14 14:32:55.978297"], ["updated_at", "2021-09-14 14:32:55.978297"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 350.0], ["professionnal", false], ["product_id", 3], ["created_at", "2021-09-14 14:32:55.982240"], ["updated_at", "2021-09-14 14:32:55.982240"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 300.0], ["professionnal", true], ["product_id", 3], ["created_at", "2021-09-14 14:32:55.985843"], ["updated_at", "2021-09-14 14:32:55.985843"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 20], ["total", 500.0], ["professionnal", true], ["product_id", 3], ["created_at", "2021-09-14 14:32:55.989613"], ["updated_at", "2021-09-14 14:32:55.989613"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (0.5ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "duration", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Pressothérapie"], ["description", "La pressothérapie est une méthode thérapeutique provoquant l’activation de la circulation veineuse et lymphatique par un système de compression et de décompression des pneumatiques."], ["duration", 30], ["room_id", 1], ["created_at", "2021-09-14 14:32:55.993363"], ["updated_at", "2021-09-14 14:32:55.993363"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 1], ["total", 45.0], ["professionnal", false], ["product_id", 4], ["created_at", "2021-09-14 14:32:55.997134"], ["updated_at", "2021-09-14 14:32:55.997134"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at", "first_time") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["session_count", 1], ["total", 35.0], ["professionnal", false], ["product_id", 4], ["created_at", "2021-09-14 14:32:56.000763"], ["updated_at", "2021-09-14 14:32:56.000763"], ["first_time", true]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 5], ["total", 195.0], ["professionnal", false], ["product_id", 4], ["created_at", "2021-09-14 14:32:56.004160"], ["updated_at", "2021-09-14 14:32:56.004160"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 350.0], ["professionnal", false], ["product_id", 4], ["created_at", "2021-09-14 14:32:56.007611"], ["updated_at", "2021-09-14 14:32:56.007611"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 300.0], ["professionnal", true], ["product_id", 4], ["created_at", "2021-09-14 14:32:56.011048"], ["updated_at", "2021-09-14 14:32:56.011048"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 20], ["total", 500.0], ["professionnal", true], ["product_id", 4], ["created_at", "2021-09-14 14:32:56.014809"], ["updated_at", "2021-09-14 14:32:56.014809"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (0.5ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "duration", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Nutrition"], ["description", "Avoir une alimentation saine, équilibrée et adaptée est un véritable pilier de la santé. Nos partenaires en micronutrition accompagnent nos clients dans l’élaboration de protocoles nutritionnels sur-mesure en fonction de leurs besoins."], ["duration", 30], ["room_id", 1], ["created_at", "2021-09-14 14:32:56.018771"], ["updated_at", "2021-09-14 14:32:56.018771"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 1], ["total", 45.0], ["professionnal", false], ["product_id", 5], ["created_at", "2021-09-14 14:32:56.022600"], ["updated_at", "2021-09-14 14:32:56.022600"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at", "first_time") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["session_count", 1], ["total", 35.0], ["professionnal", false], ["product_id", 5], ["created_at", "2021-09-14 14:32:56.026065"], ["updated_at", "2021-09-14 14:32:56.026065"], ["first_time", true]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductPrice Create (1.0ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 5], ["total", 195.0], ["professionnal", false], ["product_id", 5], ["created_at", "2021-09-14 14:32:56.029494"], ["updated_at", "2021-09-14 14:32:56.029494"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductPrice Create (1.0ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 350.0], ["professionnal", false], ["product_id", 5], ["created_at", "2021-09-14 14:32:56.033598"], ["updated_at", "2021-09-14 14:32:56.033598"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 300.0], ["professionnal", true], ["product_id", 5], ["created_at", "2021-09-14 14:32:56.037711"], ["updated_at", "2021-09-14 14:32:56.037711"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.6ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 20], ["total", 500.0], ["professionnal", true], ["product_id", 5], ["created_at", "2021-09-14 14:32:56.051600"], ["updated_at", "2021-09-14 14:32:56.051600"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Started GET "/" for ::1 at 2021-10-05 10:24:43 +0200
  [1m[35m (3.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/railties-6.1.3/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/railties-6.1.3/lib/rails/templates/rails/welcome/index.html.erb (Duration: 22.8ms | Allocations: 309)
Completed 200 OK in 33ms (Views: 24.4ms | ActiveRecord: 0.0ms | Allocations: 2853)


Started GET "/users/sign_in" for ::1 at 2021-10-05 10:24:53 +0200
  
ActionController::RoutingError (No route matches [GET] "/users/sign_in"):
  
Started GET "/users/sign_in" for ::1 at 2021-10-05 10:25:21 +0200
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/users/sign_in"):
  
Started GET "/users/sign_in" for ::1 at 2021-10-05 10:25:22 +0200
  
ActionController::RoutingError (No route matches [GET] "/users/sign_in"):
  
Started GET "/users/sign_in" for ::1 at 2021-10-05 10:25:27 +0200
  
ActionController::RoutingError (No route matches [GET] "/users/sign_in"):
  
Started GET "/users/sign_in" for ::1 at 2021-10-05 10:26:57 +0200
  
ActionController::RoutingError (No route matches [GET] "/users/sign_in"):
  
Started GET "/users/sign_in" for ::1 at 2021-10-05 10:26:58 +0200
  
ActionController::RoutingError (No route matches [GET] "/users/sign_in"):
  
Started GET "/users/sign_in" for ::1 at 2021-10-05 10:27:15 +0200
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/users/sign_in"):
  
Started GET "/users/sign_in" for ::1 at 2021-10-05 10:27:16 +0200
  
ActionController::RoutingError (No route matches [GET] "/users/sign_in"):
  
Started GET "/" for ::1 at 2021-10-05 10:27:21 +0200
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (7.6ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises"[0m
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
Completed 500 Internal Server Error in 177ms (ActiveRecord: 22.4ms | Allocations: 181449)


Redirected to http://localhost:3000/admin
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=6526d0c6-46aa-4cf2-a8c5-67ded65c2bcf (only available if report was successful)
  
NoMethodError (undefined method `products' for nil:NilClass):
  
app/controllers/welcome_controller.rb:7:in `home'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "franchises" WHERE "franchises"."name" = $1 LIMIT $2[0m  [["name", "Reims"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=070c41df-398b-418d-9f7b-9443b5ee4422 (only available if report was successful)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (76.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "test_app_development"[0m
  [1m[35m (43.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "test_app_test"[0m
  [1m[35m (91.1ms)[0m  [1m[35mCREATE DATABASE "test_app_development" ENCODING = 'unicode'[0m
  [1m[35m (30.6ms)[0m  [1m[35mCREATE DATABASE "test_app_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35mSQL (21.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "unaccent"[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_attachments" CASCADE[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_blobs" CASCADE[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "byte_size" bigint NOT NULL, "checksum" character varying NOT NULL, "created_at" timestamp NOT NULL, "service_name" character varying NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_variant_records" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "blockers" CASCADE[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "blockers" ("id" bigserial primary key, "start_time" timestamp NOT NULL, "end_time" timestamp NOT NULL, "notes" text NOT NULL, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "franchise_id" bigint NOT NULL, "room_id" bigint NOT NULL, "blocking" boolean DEFAULT TRUE, "global" boolean DEFAULT FALSE, "blocker_id" bigint)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_blocker_id" ON "blockers" ("blocker_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_franchise_id" ON "blockers" ("franchise_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_room_id" ON "blockers" ("room_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_user_id" ON "blockers" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "business_hours" CASCADE[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "business_hours" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "day" character varying NOT NULL, "morning_start_time" time NOT NULL, "morning_end_time" time NOT NULL, "afternoon_start_time" time NOT NULL, "afternoon_end_time" time NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_business_hours_on_franchise_id" ON "business_hours" ("franchise_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "campaign_templates" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "campaign_templates" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "external_id" integer NOT NULL, "name" text NOT NULL, "subject" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "html" text NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_campaign_templates_on_external_id" ON "campaign_templates" ("external_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_campaign_templates_on_franchise_id" ON "campaign_templates" ("franchise_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "campaigns" CASCADE[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "campaigns" ("id" bigserial primary key, "name" character varying NOT NULL, "body" text NOT NULL, "recipients" character varying[], "sms" boolean NOT NULL, "draft" boolean DEFAULT TRUE NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "filters" json, "sendinblue_list_id" integer, "sendinblue_campaign_id" integer, "campaign_template_id" bigint)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_campaigns_on_campaign_template_id" ON "campaigns" ("campaign_template_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_campaigns_on_franchise_id" ON "campaigns" ("franchise_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients" CASCADE[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "clients" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "male" boolean NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "phone" character varying, "objectives" character varying[] DEFAULT '{}', "address" text, "zip_code" character varying, "city" character varying, "password_digest" character varying, "newsletter" boolean, "last_logged_at" timestamp, "client_id" bigint, "user_id" bigint, "birth_date" date)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_clients_on_client_id" ON "clients" ("client_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_clients_on_franchise_id" ON "clients" ("franchise_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_clients_on_user_id" ON "clients" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "comments" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "comments" ("id" bigserial primary key, "user_id" bigint NOT NULL, "client_id" bigint NOT NULL, "body" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_comments_on_client_id" ON "comments" ("client_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_comments_on_user_id" ON "comments" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying NOT NULL, "email" character varying NOT NULL, "phone" character varying NOT NULL, "address" text NOT NULL, "zip_code" character varying NOT NULL, "city" character varying NOT NULL, "siret" character varying NOT NULL, "comment" text, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_companies_on_franchise_id" ON "companies" ("franchise_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_clients" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "company_clients" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "email" character varying NOT NULL, "job" character varying, "phone" character varying, "company_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "password_digest" character varying, "last_logged_at" timestamp, "company_client_id" bigint, "male" boolean, "objectives" character varying[] DEFAULT '{}', "address" text, "zip_code" character varying, "city" character varying, "boolean" boolean, "birth_date" date, "newsletter" boolean)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_company_clients_on_company_client_id" ON "company_clients" ("company_client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_company_clients_on_company_id" ON "company_clients" ("company_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "coupons" CASCADE[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "coupons" ("id" bigserial primary key, "name" character varying NOT NULL, "value" integer NOT NULL, "code" character varying NOT NULL, "percentage" boolean NOT NULL, "start_date" date, "end_date" date, "usage_limit" integer, "usage_limit_per_person" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "male" boolean, "objectives" character varying[], "product_ids" character varying[], "new_client" boolean DEFAULT FALSE, "loyalty" boolean DEFAULT FALSE, "client_id" bigint, "company_client_id" bigint)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_coupons_on_client_id" ON "coupons" ("client_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_coupons_on_company_client_id" ON "coupons" ("company_client_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "coupons_franchises" CASCADE[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "coupons_franchises" ("id" bigserial primary key, "coupon_id" bigint NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_coupons_franchises_on_coupon_id_and_franchise_id" ON "coupons_franchises" ("coupon_id", "franchise_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_coupons_franchises_on_coupon_id" ON "coupons_franchises" ("coupon_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_coupons_franchises_on_franchise_id" ON "coupons_franchises" ("franchise_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "credits" CASCADE[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "credits" ("id" bigserial primary key, "client_id" bigint, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "company_client_id" bigint)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_credits_on_client_id" ON "credits" ("client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_credits_on_company_client_id" ON "credits" ("company_client_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_credits_on_product_id" ON "credits" ("product_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "external_products" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "external_products" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "name" character varying NOT NULL, "amount" integer NOT NULL, "tax_rate" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_external_products_on_franchise_id" ON "external_products" ("franchise_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "franchises" CASCADE[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "franchises" ("id" bigserial primary key, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "banking_provider" character varying, "banking_secret_key" text, "banking_secret_id" text, "email" character varying, "address" text, "zip_code" character varying, "city" character varying, "siret" character varying, "tax_id" character varying, "iban" character varying, "phone" character varying, "instagram_username" text, "facebook_chat_snippet" text, "sendinblue_api_key" text)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_franchises_on_name" ON "franchises" ("name")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "payments" CASCADE[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "payments" ("id" bigserial primary key, "client_id" bigint, "amount" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "bank_name" character varying, "transaction_id" character varying, "coupon_id" bigint, "as_paid" boolean, "product_name" character varying NOT NULL, "mode" character varying, "tax_rate" float DEFAULT 20.0, "company_client_id" bigint)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_payments_on_client_id" ON "payments" ("client_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_payments_on_company_client_id" ON "payments" ("company_client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_payments_on_coupon_id" ON "payments" ("coupon_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_prices" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "product_prices" ("id" bigserial primary key, "session_count" integer NOT NULL, "total" float NOT NULL, "professionnal" boolean NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "first_time" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_product_prices_on_product_id" ON "product_prices" ("product_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "products" CASCADE[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "description" text NOT NULL, "duration" integer NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "active" boolean DEFAULT TRUE)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_products_on_room_id" ON "products" ("room_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" bigserial primary key, "start_time" timestamp, "email_notification" boolean NOT NULL, "first_time" boolean NOT NULL, "client_id" bigint, "product_price_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "company_client_id" bigint, "payment_id" bigint, "canceled" boolean DEFAULT FALSE NOT NULL, "cancelation_reason" text, "refunded" boolean DEFAULT FALSE NOT NULL, "paid_by_credit" boolean DEFAULT FALSE NOT NULL, "notes" text, "user_id" bigint, "signature" text, "to_be_paid_online" boolean NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_client_id" ON "reservations" ("client_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_company_client_id" ON "reservations" ("company_client_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_payment_id" ON "reservations" ("payment_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_product_price_id" ON "reservations" ("product_price_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_user_id" ON "reservations" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews" CASCADE[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" bigserial primary key, "body" text NOT NULL, "published" boolean, "product_id" bigint NOT NULL, "client_id" bigint, "company_client_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "homepage" boolean)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_client_id" ON "reviews" ("client_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_company_client_id" ON "reviews" ("company_client_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_product_id" ON "reviews" ("product_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "rooms" CASCADE[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "rooms" ("id" bigserial primary key, "name" character varying NOT NULL, "capacity" integer NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_rooms_on_franchise_id" ON "rooms" ("franchise_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscription_plans" CASCADE[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "subscription_plans" ("id" bigserial primary key, "product_id" bigint NOT NULL, "session_count" integer NOT NULL, "total" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_subscription_plans_on_product_id" ON "subscription_plans" ("product_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "subscription_plan_id" bigint NOT NULL, "client_id" bigint NOT NULL, "external_id" character varying, "status" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "to_be_canceled_at" timestamp)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_client_id" ON "subscriptions" ("client_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_subscription_plan_id_and_client_id" ON "subscriptions" ("subscription_plan_id", "client_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_subscription_plan_id" ON "subscriptions" ("subscription_plan_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "survey_questions" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "survey_questions" ("id" bigserial primary key, "survey_id" bigint NOT NULL, "body" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_survey_questions_on_survey_id" ON "survey_questions" ("survey_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "surveys" CASCADE[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "surveys" ("id" bigserial primary key, "product_id" bigint NOT NULL, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_surveys_on_product_id" ON "surveys" ("product_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying NOT NULL, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "superuser" boolean DEFAULT FALSE NOT NULL, "last_logged_at" timestamp, "password_digest" character varying, "nutritionist" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_users_on_franchise_id" ON "users" ("franchise_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "active_storage_attachments" ADD CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "active_storage_variant_records" ADD CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_e0849eddae"
FOREIGN KEY ("blocker_id")
  REFERENCES "blockers" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_59c546b1e0"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_fc2fc1d405"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_7614b1ad87"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "business_hours" ADD CONSTRAINT "fk_rails_07296b7035"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "campaign_templates" ADD CONSTRAINT "fk_rails_9c0d24ccff"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "campaigns" ADD CONSTRAINT "fk_rails_649cc82f45"
FOREIGN KEY ("campaign_template_id")
  REFERENCES "campaign_templates" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "campaigns" ADD CONSTRAINT "fk_rails_80a802b165"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_d80a12f36a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_2cc4be869c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_21c421fd41"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "comments" ADD CONSTRAINT "fk_rails_b7673bd1d8"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "comments" ADD CONSTRAINT "fk_rails_03de2dc08c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_3eefe7b64c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "company_clients" ADD CONSTRAINT "fk_rails_c014da4d2a"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "company_clients" ADD CONSTRAINT "fk_rails_3a46874aaf"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "coupons" ADD CONSTRAINT "fk_rails_58e636839e"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "coupons" ADD CONSTRAINT "fk_rails_9a0bfe084f"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "coupons_franchises" ADD CONSTRAINT "fk_rails_cdbd738627"
FOREIGN KEY ("coupon_id")
  REFERENCES "coupons" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "coupons_franchises" ADD CONSTRAINT "fk_rails_09b1528f6c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_deafe42183"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_e446f4a120"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_d7bdca2159"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_66d0485df7"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_94c15b6260"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_a7af64837e"
FOREIGN KEY ("coupon_id")
  REFERENCES "coupons" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "product_prices" ADD CONSTRAINT "fk_rails_e7ec0c97a3"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "products" ADD CONSTRAINT "fk_rails_71119d0f74"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_9c963d6879"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_9089ec93d0"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_653e025ae0"
FOREIGN KEY ("payment_id")
  REFERENCES "payments" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_57d12ba9a0"
FOREIGN KEY ("product_price_id")
  REFERENCES "product_prices" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_48a92fce51"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_09c661230e"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_9d0eb81ddb"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_bedd9094d4"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "rooms" ADD CONSTRAINT "fk_rails_f0b4b4dbb2"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "subscription_plans" ADD CONSTRAINT "fk_rails_b112070c01"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_19fca7085f"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_355348f174"
FOREIGN KEY ("subscription_plan_id")
  REFERENCES "subscription_plans" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "survey_questions" ADD CONSTRAINT "fk_rails_d0558bfd89"
FOREIGN KEY ("survey_id")
  REFERENCES "surveys" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "surveys" ADD CONSTRAINT "fk_rails_c90d5f8eac"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "users" ADD CONSTRAINT "fk_rails_59dbdb3a6d"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210403144414)[0m
  [1m[35m (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20201210113651),
(20201210120740),
(20201210160543),
(20201210160628),
(20201210210158),
(20201210215009),
(20201211062827),
(20201211071117),
(20201211073907),
(20201211082755),
(20201211084146),
(20201211091237),
(20201211104343),
(20201211201257),
(20201211210401),
(20201213110125),
(20201213124045),
(20201213211714),
(20201214100626),
(20201214194631),
(20201215060316),
(20201215155629),
(20201216092326),
(20201216112432),
(20201217061511),
(20201217084127),
(20201217101314),
(20201217104734),
(20201217191427),
(20201218080658),
(20201218102920),
(20201218154722),
(20201218210010),
(20201218215523),
(20201218232014),
(20201219122750),
(20201219152716),
(20201219161208),
(20201219171959),
(20201222164447),
(20201222164831),
(20210105113409),
(20210105115440),
(20210108060758),
(20210108070854),
(20210111153606),
(20210112124102),
(20210113081649),
(20210113091434),
(20210113094818),
(20210113101431),
(20210113114637),
(20210113114649),
(20210114092643),
(20210126104824),
(20210126105327),
(20210212100055),
(20210212100718),
(20210212101427),
(20210212190840),
(20210212191736),
(20210213100135),
(20210214151228),
(20210214152044),
(20210214170041),
(20210215111109),
(20210216172240),
(20210216173810),
(20210219135420),
(20210219210219),
(20210220105848),
(20210220111027),
(20210224111801),
(20210225113019),
(20210226061808),
(20210228190400),
(20210301100937),
(20210301102742),
(20210301102940),
(20210301163420),
(20210316164127),
(20210316164128),
(20210317080650),
(20210317103606),
(20210317104614),
(20210322173449),
(20210322183705),
(20210323080952),
(20210323082530),
(20210323200507),
(20210323201751),
(20210323202824),
(20210323203358),
(20210323220946),
(20210324174744),
(20210324182901),
(20210324201928),
(20210324211535),
(20210328202118),
(20210329120535),
(20210330085255),
(20210402105927),
(20210402112754),
(20210403102920);

[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-05 10:28:10.722647"], ["updated_at", "2021-10-05 10:28:10.722647"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "75ecc48a7c5ef8e8c2ff1c88434cba543d701699"], ["created_at", "2021-10-05 10:28:10.734552"], ["updated_at", "2021-10-05 10:28:10.734552"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35mSQL (7.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "unaccent"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_attachments" CASCADE[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_blobs" CASCADE[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "byte_size" bigint NOT NULL, "checksum" character varying NOT NULL, "created_at" timestamp NOT NULL, "service_name" character varying NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_variant_records" CASCADE[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "blockers" CASCADE[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "blockers" ("id" bigserial primary key, "start_time" timestamp NOT NULL, "end_time" timestamp NOT NULL, "notes" text NOT NULL, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "franchise_id" bigint NOT NULL, "room_id" bigint NOT NULL, "blocking" boolean DEFAULT TRUE, "global" boolean DEFAULT FALSE, "blocker_id" bigint)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_blocker_id" ON "blockers" ("blocker_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_franchise_id" ON "blockers" ("franchise_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_room_id" ON "blockers" ("room_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_user_id" ON "blockers" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "business_hours" CASCADE[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "business_hours" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "day" character varying NOT NULL, "morning_start_time" time NOT NULL, "morning_end_time" time NOT NULL, "afternoon_start_time" time NOT NULL, "afternoon_end_time" time NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_business_hours_on_franchise_id" ON "business_hours" ("franchise_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "campaign_templates" CASCADE[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "campaign_templates" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "external_id" integer NOT NULL, "name" text NOT NULL, "subject" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "html" text NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_campaign_templates_on_external_id" ON "campaign_templates" ("external_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_campaign_templates_on_franchise_id" ON "campaign_templates" ("franchise_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "campaigns" CASCADE[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "campaigns" ("id" bigserial primary key, "name" character varying NOT NULL, "body" text NOT NULL, "recipients" character varying[], "sms" boolean NOT NULL, "draft" boolean DEFAULT TRUE NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "filters" json, "sendinblue_list_id" integer, "sendinblue_campaign_id" integer, "campaign_template_id" bigint)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_campaigns_on_campaign_template_id" ON "campaigns" ("campaign_template_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_campaigns_on_franchise_id" ON "campaigns" ("franchise_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients" CASCADE[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "clients" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "male" boolean NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "phone" character varying, "objectives" character varying[] DEFAULT '{}', "address" text, "zip_code" character varying, "city" character varying, "password_digest" character varying, "newsletter" boolean, "last_logged_at" timestamp, "client_id" bigint, "user_id" bigint, "birth_date" date)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_clients_on_client_id" ON "clients" ("client_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_clients_on_franchise_id" ON "clients" ("franchise_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_clients_on_user_id" ON "clients" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "comments" CASCADE[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "comments" ("id" bigserial primary key, "user_id" bigint NOT NULL, "client_id" bigint NOT NULL, "body" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_comments_on_client_id" ON "comments" ("client_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_comments_on_user_id" ON "comments" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying NOT NULL, "email" character varying NOT NULL, "phone" character varying NOT NULL, "address" text NOT NULL, "zip_code" character varying NOT NULL, "city" character varying NOT NULL, "siret" character varying NOT NULL, "comment" text, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_companies_on_franchise_id" ON "companies" ("franchise_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_clients" CASCADE[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "company_clients" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "email" character varying NOT NULL, "job" character varying, "phone" character varying, "company_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "password_digest" character varying, "last_logged_at" timestamp, "company_client_id" bigint, "male" boolean, "objectives" character varying[] DEFAULT '{}', "address" text, "zip_code" character varying, "city" character varying, "boolean" boolean, "birth_date" date, "newsletter" boolean)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_company_clients_on_company_client_id" ON "company_clients" ("company_client_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_company_clients_on_company_id" ON "company_clients" ("company_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "coupons" CASCADE[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "coupons" ("id" bigserial primary key, "name" character varying NOT NULL, "value" integer NOT NULL, "code" character varying NOT NULL, "percentage" boolean NOT NULL, "start_date" date, "end_date" date, "usage_limit" integer, "usage_limit_per_person" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "male" boolean, "objectives" character varying[], "product_ids" character varying[], "new_client" boolean DEFAULT FALSE, "loyalty" boolean DEFAULT FALSE, "client_id" bigint, "company_client_id" bigint)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_coupons_on_client_id" ON "coupons" ("client_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_coupons_on_company_client_id" ON "coupons" ("company_client_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "coupons_franchises" CASCADE[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "coupons_franchises" ("id" bigserial primary key, "coupon_id" bigint NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_coupons_franchises_on_coupon_id_and_franchise_id" ON "coupons_franchises" ("coupon_id", "franchise_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_coupons_franchises_on_coupon_id" ON "coupons_franchises" ("coupon_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_coupons_franchises_on_franchise_id" ON "coupons_franchises" ("franchise_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "credits" CASCADE[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "credits" ("id" bigserial primary key, "client_id" bigint, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "company_client_id" bigint)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_credits_on_client_id" ON "credits" ("client_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_credits_on_company_client_id" ON "credits" ("company_client_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_credits_on_product_id" ON "credits" ("product_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "external_products" CASCADE[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "external_products" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "name" character varying NOT NULL, "amount" integer NOT NULL, "tax_rate" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_external_products_on_franchise_id" ON "external_products" ("franchise_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "franchises" CASCADE[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "franchises" ("id" bigserial primary key, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "banking_provider" character varying, "banking_secret_key" text, "banking_secret_id" text, "email" character varying, "address" text, "zip_code" character varying, "city" character varying, "siret" character varying, "tax_id" character varying, "iban" character varying, "phone" character varying, "instagram_username" text, "facebook_chat_snippet" text, "sendinblue_api_key" text)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_franchises_on_name" ON "franchises" ("name")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "payments" CASCADE[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "payments" ("id" bigserial primary key, "client_id" bigint, "amount" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "bank_name" character varying, "transaction_id" character varying, "coupon_id" bigint, "as_paid" boolean, "product_name" character varying NOT NULL, "mode" character varying, "tax_rate" float DEFAULT 20.0, "company_client_id" bigint)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_payments_on_client_id" ON "payments" ("client_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_payments_on_company_client_id" ON "payments" ("company_client_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_payments_on_coupon_id" ON "payments" ("coupon_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_prices" CASCADE[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "product_prices" ("id" bigserial primary key, "session_count" integer NOT NULL, "total" float NOT NULL, "professionnal" boolean NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "first_time" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_product_prices_on_product_id" ON "product_prices" ("product_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "products" CASCADE[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "description" text NOT NULL, "duration" integer NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "active" boolean DEFAULT TRUE)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_products_on_room_id" ON "products" ("room_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations" CASCADE[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" bigserial primary key, "start_time" timestamp, "email_notification" boolean NOT NULL, "first_time" boolean NOT NULL, "client_id" bigint, "product_price_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "company_client_id" bigint, "payment_id" bigint, "canceled" boolean DEFAULT FALSE NOT NULL, "cancelation_reason" text, "refunded" boolean DEFAULT FALSE NOT NULL, "paid_by_credit" boolean DEFAULT FALSE NOT NULL, "notes" text, "user_id" bigint, "signature" text, "to_be_paid_online" boolean NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_client_id" ON "reservations" ("client_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_company_client_id" ON "reservations" ("company_client_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_payment_id" ON "reservations" ("payment_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_product_price_id" ON "reservations" ("product_price_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_user_id" ON "reservations" ("user_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews" CASCADE[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" bigserial primary key, "body" text NOT NULL, "published" boolean, "product_id" bigint NOT NULL, "client_id" bigint, "company_client_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "homepage" boolean)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_client_id" ON "reviews" ("client_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_company_client_id" ON "reviews" ("company_client_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_product_id" ON "reviews" ("product_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "rooms" CASCADE[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "rooms" ("id" bigserial primary key, "name" character varying NOT NULL, "capacity" integer NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_rooms_on_franchise_id" ON "rooms" ("franchise_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscription_plans" CASCADE[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "subscription_plans" ("id" bigserial primary key, "product_id" bigint NOT NULL, "session_count" integer NOT NULL, "total" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_subscription_plans_on_product_id" ON "subscription_plans" ("product_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "subscription_plan_id" bigint NOT NULL, "client_id" bigint NOT NULL, "external_id" character varying, "status" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "to_be_canceled_at" timestamp)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_client_id" ON "subscriptions" ("client_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_subscription_plan_id_and_client_id" ON "subscriptions" ("subscription_plan_id", "client_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_subscription_plan_id" ON "subscriptions" ("subscription_plan_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "survey_questions" CASCADE[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "survey_questions" ("id" bigserial primary key, "survey_id" bigint NOT NULL, "body" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_survey_questions_on_survey_id" ON "survey_questions" ("survey_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "surveys" CASCADE[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "surveys" ("id" bigserial primary key, "product_id" bigint NOT NULL, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_surveys_on_product_id" ON "surveys" ("product_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying NOT NULL, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "superuser" boolean DEFAULT FALSE NOT NULL, "last_logged_at" timestamp, "password_digest" character varying, "nutritionist" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_users_on_franchise_id" ON "users" ("franchise_id")[0m
  [1m[35m (4.5ms)[0m  [1m[35mALTER TABLE "active_storage_attachments" ADD CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "active_storage_variant_records" ADD CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_e0849eddae"
FOREIGN KEY ("blocker_id")
  REFERENCES "blockers" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_59c546b1e0"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_fc2fc1d405"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_7614b1ad87"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "business_hours" ADD CONSTRAINT "fk_rails_07296b7035"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "campaign_templates" ADD CONSTRAINT "fk_rails_9c0d24ccff"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (5.0ms)[0m  [1m[35mALTER TABLE "campaigns" ADD CONSTRAINT "fk_rails_649cc82f45"
FOREIGN KEY ("campaign_template_id")
  REFERENCES "campaign_templates" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "campaigns" ADD CONSTRAINT "fk_rails_80a802b165"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (3.3ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_d80a12f36a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_2cc4be869c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (4.1ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_21c421fd41"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "comments" ADD CONSTRAINT "fk_rails_b7673bd1d8"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "comments" ADD CONSTRAINT "fk_rails_03de2dc08c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_3eefe7b64c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "company_clients" ADD CONSTRAINT "fk_rails_c014da4d2a"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "company_clients" ADD CONSTRAINT "fk_rails_3a46874aaf"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (4.0ms)[0m  [1m[35mALTER TABLE "coupons" ADD CONSTRAINT "fk_rails_58e636839e"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "coupons" ADD CONSTRAINT "fk_rails_9a0bfe084f"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "coupons_franchises" ADD CONSTRAINT "fk_rails_cdbd738627"
FOREIGN KEY ("coupon_id")
  REFERENCES "coupons" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "coupons_franchises" ADD CONSTRAINT "fk_rails_09b1528f6c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_deafe42183"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_e446f4a120"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_d7bdca2159"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (3.7ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_66d0485df7"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (4.2ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_94c15b6260"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (3.8ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_a7af64837e"
FOREIGN KEY ("coupon_id")
  REFERENCES "coupons" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "product_prices" ADD CONSTRAINT "fk_rails_e7ec0c97a3"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "products" ADD CONSTRAINT "fk_rails_71119d0f74"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (4.4ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_9c963d6879"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_9089ec93d0"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_653e025ae0"
FOREIGN KEY ("payment_id")
  REFERENCES "payments" ("id")
[0m
  [1m[35m (3.3ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_57d12ba9a0"
FOREIGN KEY ("product_price_id")
  REFERENCES "product_prices" ("id")
[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_48a92fce51"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (4.6ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_09c661230e"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_9d0eb81ddb"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_bedd9094d4"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "rooms" ADD CONSTRAINT "fk_rails_f0b4b4dbb2"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "subscription_plans" ADD CONSTRAINT "fk_rails_b112070c01"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_19fca7085f"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_355348f174"
FOREIGN KEY ("subscription_plan_id")
  REFERENCES "subscription_plans" ("id")
[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "survey_questions" ADD CONSTRAINT "fk_rails_d0558bfd89"
FOREIGN KEY ("survey_id")
  REFERENCES "surveys" ("id")
[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "surveys" ADD CONSTRAINT "fk_rails_c90d5f8eac"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "users" ADD CONSTRAINT "fk_rails_59dbdb3a6d"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210403144414)[0m
  [1m[35m (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20201210113651),
(20201210120740),
(20201210160543),
(20201210160628),
(20201210210158),
(20201210215009),
(20201211062827),
(20201211071117),
(20201211073907),
(20201211082755),
(20201211084146),
(20201211091237),
(20201211104343),
(20201211201257),
(20201211210401),
(20201213110125),
(20201213124045),
(20201213211714),
(20201214100626),
(20201214194631),
(20201215060316),
(20201215155629),
(20201216092326),
(20201216112432),
(20201217061511),
(20201217084127),
(20201217101314),
(20201217104734),
(20201217191427),
(20201218080658),
(20201218102920),
(20201218154722),
(20201218210010),
(20201218215523),
(20201218232014),
(20201219122750),
(20201219152716),
(20201219161208),
(20201219171959),
(20201222164447),
(20201222164831),
(20210105113409),
(20210105115440),
(20210108060758),
(20210108070854),
(20210111153606),
(20210112124102),
(20210113081649),
(20210113091434),
(20210113094818),
(20210113101431),
(20210113114637),
(20210113114649),
(20210114092643),
(20210126104824),
(20210126105327),
(20210212100055),
(20210212100718),
(20210212101427),
(20210212190840),
(20210212191736),
(20210213100135),
(20210214151228),
(20210214152044),
(20210214170041),
(20210215111109),
(20210216172240),
(20210216173810),
(20210219135420),
(20210219210219),
(20210220105848),
(20210220111027),
(20210224111801),
(20210225113019),
(20210226061808),
(20210228190400),
(20210301100937),
(20210301102742),
(20210301102940),
(20210301163420),
(20210316164127),
(20210316164128),
(20210317080650),
(20210317103606),
(20210317104614),
(20210322173449),
(20210322183705),
(20210323080952),
(20210323082530),
(20210323200507),
(20210323201751),
(20210323202824),
(20210323203358),
(20210323220946),
(20210324174744),
(20210324182901),
(20210324201928),
(20210324211535),
(20210328202118),
(20210329120535),
(20210330085255),
(20210402105927),
(20210402112754),
(20210403102920);

[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-05 10:28:11.339124"], ["updated_at", "2021-10-05 10:28:11.339124"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.7ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2021-10-05 10:28:11.347855"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "75ecc48a7c5ef8e8c2ff1c88434cba543d701699"], ["created_at", "2021-10-05 10:28:11.355381"], ["updated_at", "2021-10-05 10:28:11.355381"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "franchises" WHERE "franchises"."name" = $1 LIMIT $2[0m  [["name", "Reims"], ["LIMIT", 1]]
  [1m[36mFranchise Create (0.7ms)[0m  [1m[32mINSERT INTO "franchises" ("name", "created_at", "updated_at", "email", "address", "zip_code", "city", "siret", "tax_id", "phone") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "Reims"], ["created_at", "2021-10-05 10:28:11.482434"], ["updated_at", "2021-10-05 10:28:11.482434"], ["email", "contact@cryotera.fr"], ["address", "2 rue Jules Méline"], ["zip_code", "51430"], ["city", "Bezannes"], ["siret", "81501516900015"], ["tax_id", "FR81815015169"], ["phone", "0326779750"]]
  [1m[36mBusinessHour Create (3.0ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Monday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-10-05 10:28:11.510609"], ["updated_at", "2021-10-05 10:28:11.510609"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (0.6ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Tuesday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-10-05 10:28:11.515755"], ["updated_at", "2021-10-05 10:28:11.515755"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (2.3ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Wednesday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-10-05 10:28:11.517973"], ["updated_at", "2021-10-05 10:28:11.517973"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (0.9ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Thursday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-10-05 10:28:11.521868"], ["updated_at", "2021-10-05 10:28:11.521868"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (0.7ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Friday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-10-05 10:28:11.524378"], ["updated_at", "2021-10-05 10:28:11.524378"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (0.3ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Saturday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-10-05 10:28:11.526794"], ["updated_at", "2021-10-05 10:28:11.526794"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sayid.mimouni@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "franchise_id", "created_at", "updated_at", "superuser", "password_digest") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["email", "sayid.mimouni@gmail.com"], ["first_name", "Saïd"], ["last_name", "Mimouni"], ["franchise_id", 1], ["created_at", "2021-10-05 10:28:11.823407"], ["updated_at", "2021-10-05 10:28:11.823407"], ["superuser", true], ["password_digest", "$2a$12$6TjUFDgd3oXG380aGNi7UOyY9HoSeePTSRSzy.wqP0Ii/DW08RUom"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Create (1.7ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "male", "franchise_id", "created_at", "updated_at", "email", "password_digest", "birth_date") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["first_name", "John"], ["last_name", "Doe"], ["male", true], ["franchise_id", 1], ["created_at", "2021-10-05 10:28:12.108487"], ["updated_at", "2021-10-05 10:28:12.108487"], ["email", "client@gmail.com"], ["password_digest", "$2a$12$E0EReWcDb5Zy2AGvErKcnO7JTN/3GTswgN4H2drck15U.Msvv7F9q"], ["birth_date", "1990-01-01"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Create (1.6ms)[0m  [1m[32mINSERT INTO "companies" ("name", "email", "phone", "address", "zip_code", "city", "siret", "franchise_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "Apple"], ["email", "contact@apple.com"], ["phone", "0620853909"], ["address", "60 rue des Gobelins"], ["zip_code", "51100"], ["city", "Reims"], ["siret", "81214811200012"], ["franchise_id", 1], ["created_at", "2021-10-05 10:28:12.137315"], ["updated_at", "2021-10-05 10:28:12.137315"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Load (0.3ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mRoom Create (2.1ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "capacity", "franchise_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Salle de Cryothérapie"], ["capacity", 2], ["franchise_id", 1], ["created_at", "2021-10-05 10:28:12.152805"], ["updated_at", "2021-10-05 10:28:12.152805"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Load (0.5ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (1.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "duration", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Cryo Localisée"], ["description", "La cryothérapie localisée consiste à exposer une partie du corps à de l’air froid pulsé à -150 degrés. De par ses vertus anti-inflammatoire, antalgique et anti-âge, elle permet la diminution des douleurs localisées ainsi que la prévention du vieillissement cutané."], ["duration", 30], ["room_id", 1], ["created_at", "2021-10-05 10:28:12.173382"], ["updated_at", "2021-10-05 10:28:12.173382"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductPrice Create (1.7ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 1], ["total", 45.0], ["professionnal", false], ["product_id", 1], ["created_at", "2021-10-05 10:28:12.188506"], ["updated_at", "2021-10-05 10:28:12.188506"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at", "first_time") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["session_count", 1], ["total", 35.0], ["professionnal", false], ["product_id", 1], ["created_at", "2021-10-05 10:28:12.193554"], ["updated_at", "2021-10-05 10:28:12.193554"], ["first_time", true]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 5], ["total", 195.0], ["professionnal", false], ["product_id", 1], ["created_at", "2021-10-05 10:28:12.197422"], ["updated_at", "2021-10-05 10:28:12.197422"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 350.0], ["professionnal", false], ["product_id", 1], ["created_at", "2021-10-05 10:28:12.201785"], ["updated_at", "2021-10-05 10:28:12.201785"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.6ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 300.0], ["professionnal", true], ["product_id", 1], ["created_at", "2021-10-05 10:28:12.205608"], ["updated_at", "2021-10-05 10:28:12.205608"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 20], ["total", 500.0], ["professionnal", true], ["product_id", 1], ["created_at", "2021-10-05 10:28:12.209955"], ["updated_at", "2021-10-05 10:28:12.209955"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Load (0.1ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "duration", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Cryothérapie Corps Entier"], ["description", "La chambre de cryothérapie corps entier est un outil utilisant le froid à des fins thérapeutiques. Le procédé est fondé sur des séries d’expositions du corps entier à basses températures (entre -85°C et -110°C) sur une période de 3 à 4 minutes. L’exposition à ces températures permet à l’individu de mettre en place des réflexes de protection contre le froid et de développer des effets bénéfiques durables."], ["duration", 30], ["room_id", 1], ["created_at", "2021-10-05 10:28:12.213748"], ["updated_at", "2021-10-05 10:28:12.213748"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.6ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 1], ["total", 45.0], ["professionnal", false], ["product_id", 2], ["created_at", "2021-10-05 10:28:12.217558"], ["updated_at", "2021-10-05 10:28:12.217558"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at", "first_time") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["session_count", 1], ["total", 35.0], ["professionnal", false], ["product_id", 2], ["created_at", "2021-10-05 10:28:12.221905"], ["updated_at", "2021-10-05 10:28:12.221905"], ["first_time", true]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 5], ["total", 195.0], ["professionnal", false], ["product_id", 2], ["created_at", "2021-10-05 10:28:12.225925"], ["updated_at", "2021-10-05 10:28:12.225925"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 350.0], ["professionnal", false], ["product_id", 2], ["created_at", "2021-10-05 10:28:12.229782"], ["updated_at", "2021-10-05 10:28:12.229782"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 300.0], ["professionnal", true], ["product_id", 2], ["created_at", "2021-10-05 10:28:12.233281"], ["updated_at", "2021-10-05 10:28:12.233281"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 20], ["total", 500.0], ["professionnal", true], ["product_id", 2], ["created_at", "2021-10-05 10:28:12.236970"], ["updated_at", "2021-10-05 10:28:12.236970"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Load (0.4ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (0.6ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "duration", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Cryolipolise"], ["description", "Le terme cryolipolyse signifie littéralement “destruction des graisses par le froid“. Il s’agit d’un traitement efficace et non invasif permettant d’éliminer les amas graisseux de manière définitive et indolore."], ["duration", 30], ["room_id", 1], ["created_at", "2021-10-05 10:28:12.240932"], ["updated_at", "2021-10-05 10:28:12.240932"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.2ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 1], ["total", 45.0], ["professionnal", false], ["product_id", 3], ["created_at", "2021-10-05 10:28:12.244981"], ["updated_at", "2021-10-05 10:28:12.244981"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at", "first_time") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["session_count", 1], ["total", 35.0], ["professionnal", false], ["product_id", 3], ["created_at", "2021-10-05 10:28:12.248423"], ["updated_at", "2021-10-05 10:28:12.248423"], ["first_time", true]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 5], ["total", 195.0], ["professionnal", false], ["product_id", 3], ["created_at", "2021-10-05 10:28:12.251865"], ["updated_at", "2021-10-05 10:28:12.251865"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 350.0], ["professionnal", false], ["product_id", 3], ["created_at", "2021-10-05 10:28:12.255165"], ["updated_at", "2021-10-05 10:28:12.255165"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 300.0], ["professionnal", true], ["product_id", 3], ["created_at", "2021-10-05 10:28:12.258660"], ["updated_at", "2021-10-05 10:28:12.258660"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 20], ["total", 500.0], ["professionnal", true], ["product_id", 3], ["created_at", "2021-10-05 10:28:12.261982"], ["updated_at", "2021-10-05 10:28:12.261982"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Load (0.2ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "duration", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Pressothérapie"], ["description", "La pressothérapie est une méthode thérapeutique provoquant l’activation de la circulation veineuse et lymphatique par un système de compression et de décompression des pneumatiques."], ["duration", 30], ["room_id", 1], ["created_at", "2021-10-05 10:28:12.265697"], ["updated_at", "2021-10-05 10:28:12.265697"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 1], ["total", 45.0], ["professionnal", false], ["product_id", 4], ["created_at", "2021-10-05 10:28:12.269301"], ["updated_at", "2021-10-05 10:28:12.269301"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProductPrice Create (1.1ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at", "first_time") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["session_count", 1], ["total", 35.0], ["professionnal", false], ["product_id", 4], ["created_at", "2021-10-05 10:28:12.283517"], ["updated_at", "2021-10-05 10:28:12.283517"], ["first_time", true]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.6ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 5], ["total", 195.0], ["professionnal", false], ["product_id", 4], ["created_at", "2021-10-05 10:28:12.287905"], ["updated_at", "2021-10-05 10:28:12.287905"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 350.0], ["professionnal", false], ["product_id", 4], ["created_at", "2021-10-05 10:28:12.291703"], ["updated_at", "2021-10-05 10:28:12.291703"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 300.0], ["professionnal", true], ["product_id", 4], ["created_at", "2021-10-05 10:28:12.295300"], ["updated_at", "2021-10-05 10:28:12.295300"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 20], ["total", 500.0], ["professionnal", true], ["product_id", 4], ["created_at", "2021-10-05 10:28:12.298705"], ["updated_at", "2021-10-05 10:28:12.298705"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRoom Load (0.3ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms" WHERE "rooms"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (0.6ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "duration", "room_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Nutrition"], ["description", "Avoir une alimentation saine, équilibrée et adaptée est un véritable pilier de la santé. Nos partenaires en micronutrition accompagnent nos clients dans l’élaboration de protocoles nutritionnels sur-mesure en fonction de leurs besoins."], ["duration", 30], ["room_id", 1], ["created_at", "2021-10-05 10:28:12.302208"], ["updated_at", "2021-10-05 10:28:12.302208"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 1], ["total", 45.0], ["professionnal", false], ["product_id", 5], ["created_at", "2021-10-05 10:28:12.306009"], ["updated_at", "2021-10-05 10:28:12.306009"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.5ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at", "first_time") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["session_count", 1], ["total", 35.0], ["professionnal", false], ["product_id", 5], ["created_at", "2021-10-05 10:28:12.309756"], ["updated_at", "2021-10-05 10:28:12.309756"], ["first_time", true]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 5], ["total", 195.0], ["professionnal", false], ["product_id", 5], ["created_at", "2021-10-05 10:28:12.313264"], ["updated_at", "2021-10-05 10:28:12.313264"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 350.0], ["professionnal", false], ["product_id", 5], ["created_at", "2021-10-05 10:28:12.316990"], ["updated_at", "2021-10-05 10:28:12.316990"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.4ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 10], ["total", 300.0], ["professionnal", true], ["product_id", 5], ["created_at", "2021-10-05 10:28:12.320425"], ["updated_at", "2021-10-05 10:28:12.320425"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProductPrice Create (0.3ms)[0m  [1m[32mINSERT INTO "product_prices" ("session_count", "total", "professionnal", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["session_count", 20], ["total", 500.0], ["professionnal", true], ["product_id", 5], ["created_at", "2021-10-05 10:28:12.323762"], ["updated_at", "2021-10-05 10:28:12.323762"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Started GET "/" for ::1 at 2021-10-05 10:28:19 +0200
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (1.7ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises"[0m
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
Completed 500 Internal Server Error in 130ms (ActiveRecord: 8.2ms | Allocations: 140467)


Redirected to http://localhost:3000/admin
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=a6b679d3-c3ac-48c5-a0ba-c32397f827be (only available if report was successful)
  
NoMethodError (undefined method `products' for nil:NilClass):
  
app/controllers/welcome_controller.rb:7:in `home'
Started GET "/" for ::1 at 2021-10-05 10:28:44 +0200
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises"[0m
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.4ms | Allocations: 1610)


Redirected to http://www.localhost:3000/admin
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=4ec9b74d-5576-41ed-9dea-8310007a4de1 (only available if report was successful)
  
NoMethodError (undefined method `products' for nil:NilClass):
  
app/controllers/welcome_controller.rb:7:in `home'
Started GET "/inscription" for ::1 at 2021-10-05 10:29:34 +0200
Processing by AuthController#signup as HTML
Redirected to http://localhost:3000/
Filter chain halted as :authenticate_franchise rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 350)


Started GET "/" for ::1 at 2021-10-05 10:29:34 +0200
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (0.3ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises"[0m
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms | Allocations: 1491)


Redirected to http://localhost:3000/admin
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=6ea58acd-8a51-44cc-ba92-77556800429c (only available if report was successful)
  
NoMethodError (undefined method `products' for nil:NilClass):
  
app/controllers/welcome_controller.rb:7:in `home'
Started GET "/login" for ::1 at 2021-10-05 10:29:41 +0200
Processing by AuthController#login as HTML
Redirected to http://localhost:3000/
Filter chain halted as :authenticate_franchise rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 262)


Started GET "/" for ::1 at 2021-10-05 10:29:41 +0200
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises"[0m
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.4ms | Allocations: 1474)


Redirected to http://localhost:3000/admin
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=35499360-6f9f-4b74-a9ae-5861d7aef2d1 (only available if report was successful)
  
NoMethodError (undefined method `products' for nil:NilClass):
  
app/controllers/welcome_controller.rb:7:in `home'
Started GET "/" for ::1 at 2021-10-05 10:30:02 +0200
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/railties-6.1.3/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/railties-6.1.3/lib/rails/templates/rails/welcome/index.html.erb (Duration: 4.5ms | Allocations: 189)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.0ms | Allocations: 1005)


Started GET "/" for ::1 at 2021-10-05 10:30:07 +0200
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/railties-6.1.3/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/railties-6.1.3/lib/rails/templates/rails/welcome/index.html.erb (Duration: 13.2ms | Allocations: 242)
Completed 200 OK in 19ms (Views: 17.4ms | ActiveRecord: 0.0ms | Allocations: 1015)


Started GET "/" for ::1 at 2021-10-05 10:31:49 +0200
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises"[0m
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
Completed 500 Internal Server Error in 49ms (ActiveRecord: 10.4ms | Allocations: 23092)


Redirected to http://www.localhost:3000/admin
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=b1fd43d2-dc9e-465c-889b-e98dbd583cba (only available if report was successful)
  
NoMethodError (undefined method `products' for nil:NilClass):
  
app/controllers/welcome_controller.rb:7:in `home'
Started GET "/admin" for ::1 at 2021-10-05 10:31:54 +0200
Started GET "/admin" for ::1 at 2021-10-05 10:33:09 +0200
Processing by AuthController#admin as HTML
  Rendering auth/admin.html.erb
  Rendered auth/admin.html.erb (Duration: 4.0ms | Allocations: 4830)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.0ms | Allocations: 5588)


  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "nathan@drakkr.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "nathan@drakkr.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Load (0.8ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "sayid.mimouni@gmail.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "password_digest" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-10-05 10:35:10.088631"], ["password_digest", "$2a$12$6HUce.6e44SNGREdgA3JfevGTq9FxVmlT5vaajMBMe6.mXc1pkHMC"], ["id", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
Started POST "/admin" for ::1 at 2021-10-05 10:35:18 +0200
Processing by AuthController#admin as HTML
  Parameters: {"authenticity_token"=>"/qYYOgHjDHKnToCFvelCfaHbU8xsbq2xxCuse6+MUMVYlGxvWD8/MK2LgOOpMRYcqPboLas6YxxY3SumSEH6wg==", "email"=>"sayid.mimouni@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sayid.mimouni@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/auth_controller.rb:72:in `admin'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/auth_controller.rb:75:in `admin'
  [1m[36mFranchise Load (0.2ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/auth_controller.rb:75:in `admin'
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "sayid.mimouni@gmail.com"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/auth_controller.rb:75:in `admin'
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "last_logged_at" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-10-05 10:35:19.037270"], ["last_logged_at", "2021-10-05 10:35:19.007549"], ["id", 1]]
  ↳ app/controllers/auth_controller.rb:75:in `admin'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/auth_controller.rb:75:in `admin'
Redirected to http://www.localhost:3000/clients
Completed 302 Found in 349ms (ActiveRecord: 17.5ms | Allocations: 36641)


Started GET "/clients" for ::1 at 2021-10-05 10:35:19 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/clients_controller.rb:7:in `index'
  Rendering layout layouts/application.html.erb
  Rendering clients/index.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.6ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/application/_filter.html.erb:6
  Rendered application/_filter.html.erb (Duration: 2.2ms | Allocations: 1703)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mClient Load (0.7ms)[0m  [1m[34mSELECT "clients".* FROM "clients" ORDER BY "clients"."last_name" ASC, "clients"."first_name" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 30], ["OFFSET", 0]]
  ↳ app/views/clients/index.html.erb:19
  [1m[36mFranchise Load (0.2ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1[0m  [["id", 1]]
  ↳ app/views/clients/index.html.erb:19
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/clients/_form.html.erb:10
  Rendered clients/_form.html.erb (Duration: 6.5ms | Allocations: 3905)
  Rendered clients/index.html.erb within layouts/application (Duration: 16.8ms | Allocations: 10366)
[Webpacker] Compiling...
Started POST "/admin" for ::1 at 2021-10-05 10:35:19 +0200
Processing by AuthController#admin as HTML
  Parameters: {"authenticity_token"=>"/qYYOgHjDHKnToCFvelCfaHbU8xsbq2xxCuse6+MUMVYlGxvWD8/MK2LgOOpMRYcqPboLas6YxxY3SumSEH6wg==", "email"=>"sayid.mimouni@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sayid.mimouni@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/auth_controller.rb:72:in `admin'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/auth_controller.rb:75:in `admin'
  [1m[36mFranchise Load (0.7ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/auth_controller.rb:75:in `admin'
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "sayid.mimouni@gmail.com"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/auth_controller.rb:75:in `admin'
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "last_logged_at" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-10-05 10:35:19.659609"], ["last_logged_at", "2021-10-05 10:35:19.653945"], ["id", 1]]
  ↳ app/controllers/auth_controller.rb:75:in `admin'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/auth_controller.rb:75:in `admin'
Redirected to http://www.localhost:3000/clients
Completed 302 Found in 315ms (ActiveRecord: 10.9ms | Allocations: 6756)


Started GET "/clients" for ::1 at 2021-10-05 10:35:19 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.2ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/clients_controller.rb:7:in `index'
  Rendering layout layouts/application.html.erb
  Rendering clients/index.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.6ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/application/_filter.html.erb:6
  Rendered application/_filter.html.erb (Duration: 1.8ms | Allocations: 1474)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mClient Load (0.7ms)[0m  [1m[34mSELECT "clients".* FROM "clients" ORDER BY "clients"."last_name" ASC, "clients"."first_name" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 30], ["OFFSET", 0]]
  ↳ app/views/clients/index.html.erb:19
  [1m[36mFranchise Load (0.2ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1[0m  [["id", 1]]
  ↳ app/views/clients/index.html.erb:19
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/clients/_form.html.erb:10
  Rendered clients/_form.html.erb (Duration: 1.8ms | Allocations: 2073)
  Rendered clients/index.html.erb within layouts/application (Duration: 6.9ms | Allocations: 5987)
[Webpacker] Compiling...
[Webpacker] Compiled all packs in /Users/nathanmenard/code/drakkr/cryo/public/packs
[Webpacker] Browserslist: caniuse-lite is outdated. Please run:
npx browserslist@latest --update-db

Why you should do it regularly:
https://github.com/browserslist/browserslist#browsers-data-updating

[Webpacker] Compiled all packs in /Users/nathanmenard/code/drakkr/cryo/public/packs
[Webpacker] Hash: ddec9899f153cf43488e
Version: webpack 4.44.2
Time: 5258ms
Built at: 10/05/2021 10:35:26 AM
                                     Asset       Size       Chunks                         Chunk Names
    js/application-acd6384544a447e5af74.js   1.24 MiB  application  [emitted] [immutable]  application
js/application-acd6384544a447e5af74.js.map   1.24 MiB  application  [emitted] [dev]        application
                             manifest.json  364 bytes               [emitted]              
Entrypoint application = js/application-acd6384544a447e5af74.js js/application-acd6384544a447e5af74.js.map
[./app/javascript/channels sync recursive _channel\.js$] ./app/javascript/channels sync _channel\.js$ 160 bytes {application} [built]
[./app/javascript/channels/index.js] 211 bytes {application} [built]
[./app/javascript/custom/jquery-ui.min.js] 341 KiB {application} [built]
[./app/javascript/custom/jquery.datetimepicker.full.min.js] 78.8 KiB {application} [built]
[./app/javascript/custom/jquery.multiselect.js] 32.4 KiB {application} [built]
[./app/javascript/packs/application.js] 14.1 KiB {application} [built]
[./node_modules/webpack/buildin/global.js] (webpack)/buildin/global.js 905 bytes {application} [built]
[./node_modules/webpack/buildin/module.js] (webpack)/buildin/module.js 552 bytes {application} [built]
    + 111 hidden modules

[Webpacker] Browserslist: caniuse-lite is outdated. Please run:
npx browserslist@latest --update-db

Why you should do it regularly:
https://github.com/browserslist/browserslist#browsers-data-updating

[Webpacker] Hash: ddec9899f153cf43488e
Version: webpack 4.44.2
Time: 5286ms
Built at: 10/05/2021 10:35:26 AM
                                     Asset       Size       Chunks                         Chunk Names
    js/application-acd6384544a447e5af74.js   1.24 MiB  application  [emitted] [immutable]  application
js/application-acd6384544a447e5af74.js.map   1.24 MiB  application  [emitted] [dev]        application
                             manifest.json  364 bytes               [emitted]              
Entrypoint application = js/application-acd6384544a447e5af74.js js/application-acd6384544a447e5af74.js.map
[./app/javascript/channels sync recursive _channel\.js$] ./app/javascript/channels sync _channel\.js$ 160 bytes {application} [built]
[./app/javascript/channels/index.js] 211 bytes {application} [built]
[./app/javascript/custom/jquery-ui.min.js] 341 KiB {application} [built]
[./app/javascript/custom/jquery.datetimepicker.full.min.js] 78.8 KiB {application} [built]
[./app/javascript/custom/jquery.multiselect.js] 32.4 KiB {application} [built]
[./app/javascript/packs/application.js] 14.1 KiB {application} [built]
[./node_modules/webpack/buildin/global.js] (webpack)/buildin/global.js 905 bytes {application} [built]
[./node_modules/webpack/buildin/module.js] (webpack)/buildin/module.js 552 bytes {application} [built]
    + 111 hidden modules

  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_header.html.erb (Duration: 3.9ms | Allocations: 3975)
  Rendered application/_header.html.erb (Duration: 3.9ms | Allocations: 4017)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_nav.html.erb (Duration: 1.6ms | Allocations: 1720)
  Rendered application/_nav.html.erb (Duration: 1.6ms | Allocations: 1752)
  Rendered application/_footer.html.erb (Duration: 0.2ms | Allocations: 113)
  Rendered application/_footer.html.erb (Duration: 0.2ms | Allocations: 103)
  Rendered layout layouts/application.html.erb (Duration: 6499.5ms | Allocations: 19453)
  Rendered layout layouts/application.html.erb (Duration: 7083.8ms | Allocations: 45592)
Completed 200 OK in 6504ms (Views: 6498.4ms | ActiveRecord: 2.1ms | Allocations: 22293)


Completed 200 OK in 7116ms (Views: 7090.3ms | ActiveRecord: 8.8ms | Allocations: 66489)


Started GET "/franchises" for ::1 at 2021-10-05 10:35:30 +0200
Processing by FranchisesController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:54:in `authenticate_superadmin'
  Rendering layout layouts/application.html.erb
  Rendering franchises/index.html.erb within layouts/application
  [1m[36mFranchise Load (0.6ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/franchises/index.html.erb:13
  [1m[35m (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."franchise_id" = $1[0m  [["franchise_id", 1]]
  ↳ app/views/franchises/index.html.erb:17
  Rendered franchises/_form.html.erb (Duration: 4.2ms | Allocations: 1199)
  Rendered franchises/index.html.erb within layouts/application (Duration: 17.4ms | Allocations: 3506)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_header.html.erb (Duration: 2.9ms | Allocations: 1805)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_nav.html.erb (Duration: 0.5ms | Allocations: 470)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 30.8ms | Allocations: 9141)
Completed 200 OK in 40ms (Views: 30.1ms | ActiveRecord: 4.3ms | Allocations: 10772)


Started GET "/employes" for ::1 at 2021-10-05 10:35:31 +0200
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.6ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:7:in `index'
  Rendering layout layouts/application.html.erb
  Rendering users/index.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.7ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/application/_filter.html.erb:6
  Rendered application/_filter.html.erb (Duration: 5.3ms | Allocations: 1474)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/views/users/index.html.erb:18
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/users/index.html.erb:23
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/users/_form.html.erb:8
  Rendered users/_form.html.erb (Duration: 47.5ms | Allocations: 2038)
  Rendered users/index.html.erb within layouts/application (Duration: 63.5ms | Allocations: 6490)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_header.html.erb (Duration: 1.9ms | Allocations: 1804)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_nav.html.erb (Duration: 0.4ms | Allocations: 470)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 72.7ms | Allocations: 12227)
Completed 200 OK in 89ms (Views: 74.3ms | ActiveRecord: 2.4ms | Allocations: 15430)


Started GET "/clients" for ::1 at 2021-10-05 10:35:33 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/clients_controller.rb:7:in `index'
  Rendering layout layouts/application.html.erb
  Rendering clients/index.html.erb within layouts/application
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.7ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/application/_filter.html.erb:6
  Rendered application/_filter.html.erb (Duration: 6.5ms | Allocations: 1474)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT "clients".* FROM "clients" ORDER BY "clients"."last_name" ASC, "clients"."first_name" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 30], ["OFFSET", 0]]
  ↳ app/views/clients/index.html.erb:19
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1[0m  [["id", 1]]
  ↳ app/views/clients/index.html.erb:19
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/clients/_form.html.erb:10
  Rendered clients/_form.html.erb (Duration: 5.6ms | Allocations: 2075)
  Rendered clients/index.html.erb within layouts/application (Duration: 19.8ms | Allocations: 5939)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_header.html.erb (Duration: 4.3ms | Allocations: 1799)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_nav.html.erb (Duration: 0.5ms | Allocations: 456)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 33.3ms | Allocations: 10918)
Completed 200 OK in 42ms (Views: 32.1ms | ActiveRecord: 2.6ms | Allocations: 13658)


Started GET "/reservations" for ::1 at 2021-10-05 10:35:34 +0200
Processing by Welcome::ReservationsController#index as HTML
Redirected to http://www.localhost:3000/login
Filter chain halted as :authenticate_client rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms | Allocations: 419)


Started GET "/login" for ::1 at 2021-10-05 10:35:34 +0200
Processing by AuthController#login as HTML
Redirected to http://www.localhost:3000/
Filter chain halted as :authenticate_franchise rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 353)


Started GET "/" for ::1 at 2021-10-05 10:35:34 +0200
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises"[0m
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.4ms | Allocations: 1631)


  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=11734861-7dbe-4cdf-92e1-440680c5edd8 (only available if report was successful)
  
NoMethodError (undefined method `products' for nil:NilClass):
  
app/controllers/welcome_controller.rb:7:in `home'
Started GET "/subscriptions" for ::1 at 2021-10-05 10:35:40 +0200
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=40df42cc-8f1f-4810-92e5-bb8dbe864c2e (only available if report was successful)
  
AbstractController::ActionNotFound (The action 'index' could not be found for Welcome::SubscriptionsController):
  
actionpack (6.1.3) lib/abstract_controller/base.rb:160:in `process'
actionview (6.1.3) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.3) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.3) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.3) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.3) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.3) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.3) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.3) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.3) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (6.1.4) lib/bullet/rack.rb:12:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.1.3) lib/action_dispatch/http/permissions_policy.rb:22:in `call'
actionpack (6.1.3) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (6.1.3) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.3) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.3) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
rollbar (3.1.2) lib/rollbar/middleware/rails/rollbar.rb:25:in `block in call'
rollbar (3.1.2) lib/rollbar.rb:145:in `scoped'
rollbar (3.1.2) lib/rollbar/middleware/rails/rollbar.rb:22:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
rollbar (3.1.2) lib/rollbar/middleware/rails/show_exceptions.rb:22:in `call_with_rollbar'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.3) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.3) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.3) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/host_authorization.rb:98:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.1.3) lib/rails/engine.rb:539:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/codes-promo" for ::1 at 2021-10-05 10:35:43 +0200
Processing by CouponsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCoupon Load (2.2ms)[0m  [1m[34mSELECT "coupons".* FROM "coupons" WHERE ("coupons"."end_date" IS NULL OR end_date >= '2021-10-05')[0m
  ↳ app/controllers/coupons_controller.rb:60:in `get_coupons'
  [1m[36mCoupon Load (1.3ms)[0m  [1m[34mSELECT "coupons".* FROM "coupons" WHERE (end_date < '2021-10-05') ORDER BY "coupons"."end_date" DESC[0m
  ↳ app/controllers/coupons_controller.rb:60:in `get_coupons'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.5ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/coupons_controller.rb:7:in `index'
  Rendering layout layouts/application.html.erb
  Rendering coupons/index.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.7ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/application/_filter.html.erb:6
  Rendered application/_filter.html.erb (Duration: 3.0ms | Allocations: 1474)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/coupons/_form.html.erb:5
  Rendered coupons/_form.html.erb (Duration: 8.1ms | Allocations: 3670)
  Rendered coupons/index.html.erb within layouts/application (Duration: 13.8ms | Allocations: 6536)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_header.html.erb (Duration: 1.9ms | Allocations: 1804)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_nav.html.erb (Duration: 0.4ms | Allocations: 474)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 23.2ms | Allocations: 12209)
Completed 200 OK in 94ms (Views: 23.8ms | ActiveRecord: 15.1ms | Allocations: 33855)


Started GET "/stats" for ::1 at 2021-10-05 10:35:44 +0200
Processing by StatsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.9ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/stats_controller.rb:7:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/stats_controller.rb:8:in `index'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1[0m  [["franchise_id", 1]]
  ↳ app/controllers/stats_controller.rb:11:in `index'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mPayment Load (1.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:87:in `average_payments_amount'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:88:in `average_payments_amount'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:87:in `average_payments_amount'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:88:in `average_payments_amount'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:87:in `average_payments_amount'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:88:in `average_payments_amount'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 4]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:87:in `average_payments_amount'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 4]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:88:in `average_payments_amount'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 5]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:87:in `average_payments_amount'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 5]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:88:in `average_payments_amount'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."product_name" = $1[0m  [["product_name", "Cryo Localisée"]]
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE "payments"."product_name" = $1 AND 1=0[0m  [["product_name", "Cryo Localisée"]]
  ↳ app/controllers/stats_controller.rb:17:in `block in index'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."product_name" = $1[0m  [["product_name", "Cryothérapie Corps Entier"]]
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE "payments"."product_name" = $1 AND 1=0[0m  [["product_name", "Cryothérapie Corps Entier"]]
  ↳ app/controllers/stats_controller.rb:17:in `block in index'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."product_name" = $1[0m  [["product_name", "Cryolipolise"]]
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE "payments"."product_name" = $1 AND 1=0[0m  [["product_name", "Cryolipolise"]]
  ↳ app/controllers/stats_controller.rb:17:in `block in index'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."product_name" = $1[0m  [["product_name", "Pressothérapie"]]
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE "payments"."product_name" = $1 AND 1=0[0m  [["product_name", "Pressothérapie"]]
  ↳ app/controllers/stats_controller.rb:17:in `block in index'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."product_name" = $1[0m  [["product_name", "Nutrition"]]
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE "payments"."product_name" = $1 AND 1=0[0m  [["product_name", "Nutrition"]]
  ↳ app/controllers/stats_controller.rb:17:in `block in index'
  [1m[36mReservation Load (0.4ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1 AND 1=0[0m  [["product_id", 1]]
  ↳ app/controllers/stats_controller.rb:22:in `block in index'
  [1m[36mReservation Load (0.5ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1 AND 1=0[0m  [["product_id", 2]]
  ↳ app/controllers/stats_controller.rb:22:in `block in index'
  [1m[36mReservation Load (0.3ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1 AND 1=0[0m  [["product_id", 3]]
  ↳ app/controllers/stats_controller.rb:22:in `block in index'
  [1m[36mReservation Load (0.3ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 4]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1 AND 1=0[0m  [["product_id", 4]]
  ↳ app/controllers/stats_controller.rb:22:in `block in index'
  [1m[36mReservation Load (0.3ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 5]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1 AND 1=0[0m  [["product_id", 5]]
  ↳ app/controllers/stats_controller.rb:22:in `block in index'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 4]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 5]]
  ↳ app/models/reservation.rb:56:in `paid'
  Rendering layout layouts/application.html.erb
  Rendering stats/index.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/application/_filter.html.erb:6
  Rendered application/_filter.html.erb (Duration: 2.0ms | Allocations: 1474)
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1 ORDER BY "products"."name" ASC[0m  [["franchise_id", 1]]
  ↳ app/views/stats/index.html.erb:27
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 5]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 5]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 4]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 4]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mExternalProduct Load (1.1ms)[0m  [1m[34mSELECT "external_products".* FROM "external_products" WHERE "external_products"."franchise_id" = $1 ORDER BY "external_products"."name" ASC[0m  [["franchise_id", 1]]
  ↳ app/views/stats/index.html.erb:38
  Rendered stats/index.html.erb within layouts/application (Duration: 38.2ms | Allocations: 15500)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_header.html.erb (Duration: 1.5ms | Allocations: 1804)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_nav.html.erb (Duration: 0.4ms | Allocations: 488)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 45.0ms | Allocations: 21204)
Completed 200 OK in 175ms (Views: 42.2ms | ActiveRecord: 37.8ms | Allocations: 89106)


Started GET "/" for ::1 at 2021-10-05 10:35:49 +0200
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises"[0m
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.4ms | Allocations: 1563)


  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=0f6abde2-301b-4188-b1f3-a803d237662a (only available if report was successful)
  
NoMethodError (undefined method `products' for nil:NilClass):
  
app/controllers/welcome_controller.rb:7:in `home'
Started GET "/stats?view=month" for ::1 at 2021-10-05 10:35:59 +0200
Processing by StatsController#index as HTML
  Parameters: {"view"=>"month"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.5ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/stats_controller.rb:7:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/stats_controller.rb:8:in `index'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1[0m  [["franchise_id", 1]]
  ↳ app/controllers/stats_controller.rb:11:in `index'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:87:in `average_payments_amount'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:88:in `average_payments_amount'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:87:in `average_payments_amount'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:88:in `average_payments_amount'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:87:in `average_payments_amount'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:88:in `average_payments_amount'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 4]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:87:in `average_payments_amount'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 4]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:88:in `average_payments_amount'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 5]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:87:in `average_payments_amount'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 5]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:88:in `average_payments_amount'
  [1m[36mPayment Load (0.5ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."product_name" = $1[0m  [["product_name", "Cryo Localisée"]]
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE "payments"."product_name" = $1 AND 1=0[0m  [["product_name", "Cryo Localisée"]]
  ↳ app/controllers/stats_controller.rb:17:in `block in index'
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."product_name" = $1[0m  [["product_name", "Cryothérapie Corps Entier"]]
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE "payments"."product_name" = $1 AND 1=0[0m  [["product_name", "Cryothérapie Corps Entier"]]
  ↳ app/controllers/stats_controller.rb:17:in `block in index'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."product_name" = $1[0m  [["product_name", "Cryolipolise"]]
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE "payments"."product_name" = $1 AND 1=0[0m  [["product_name", "Cryolipolise"]]
  ↳ app/controllers/stats_controller.rb:17:in `block in index'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."product_name" = $1[0m  [["product_name", "Pressothérapie"]]
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE "payments"."product_name" = $1 AND 1=0[0m  [["product_name", "Pressothérapie"]]
  ↳ app/controllers/stats_controller.rb:17:in `block in index'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."product_name" = $1[0m  [["product_name", "Nutrition"]]
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE "payments"."product_name" = $1 AND 1=0[0m  [["product_name", "Nutrition"]]
  ↳ app/controllers/stats_controller.rb:17:in `block in index'
  [1m[36mReservation Load (0.7ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1 AND 1=0[0m  [["product_id", 1]]
  ↳ app/controllers/stats_controller.rb:22:in `block in index'
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1 AND 1=0[0m  [["product_id", 2]]
  ↳ app/controllers/stats_controller.rb:22:in `block in index'
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1 AND 1=0[0m  [["product_id", 3]]
  ↳ app/controllers/stats_controller.rb:22:in `block in index'
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 4]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1 AND 1=0[0m  [["product_id", 4]]
  ↳ app/controllers/stats_controller.rb:22:in `block in index'
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 5]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1 AND 1=0[0m  [["product_id", 5]]
  ↳ app/controllers/stats_controller.rb:22:in `block in index'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 4]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 5]]
  ↳ app/models/reservation.rb:56:in `paid'
  Rendering layout layouts/application.html.erb
  Rendering stats/index.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.5ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/application/_filter.html.erb:6
  Rendered application/_filter.html.erb (Duration: 2.2ms | Allocations: 1473)
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1 ORDER BY "products"."name" ASC[0m  [["franchise_id", 1]]
  ↳ app/views/stats/index.html.erb:27
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 5]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 5]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 4]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 4]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mExternalProduct Load (0.4ms)[0m  [1m[34mSELECT "external_products".* FROM "external_products" WHERE "external_products"."franchise_id" = $1 ORDER BY "external_products"."name" ASC[0m  [["franchise_id", 1]]
  ↳ app/views/stats/index.html.erb:38
  Rendered stats/index.html.erb within layouts/application (Duration: 12.5ms | Allocations: 12147)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_header.html.erb (Duration: 1.5ms | Allocations: 1799)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_nav.html.erb (Duration: 0.4ms | Allocations: 488)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 19.3ms | Allocations: 17099)
Completed 200 OK in 146ms (Views: 18.2ms | ActiveRecord: 17.3ms | Allocations: 54952)


Started GET "/stats?view=year" for ::1 at 2021-10-05 10:36:00 +0200
Processing by StatsController#index as HTML
  Parameters: {"view"=>"year"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.3ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/stats_controller.rb:7:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/stats_controller.rb:8:in `index'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1[0m  [["franchise_id", 1]]
  ↳ app/controllers/stats_controller.rb:11:in `index'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mPayment Load (1.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:87:in `average_payments_amount'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:88:in `average_payments_amount'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:87:in `average_payments_amount'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:88:in `average_payments_amount'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:87:in `average_payments_amount'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:88:in `average_payments_amount'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 4]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:87:in `average_payments_amount'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 4]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:88:in `average_payments_amount'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 5]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:87:in `average_payments_amount'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "reservations"."payment_id" FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 5]]
  ↳ app/models/product.rb:77:in `payments'
  [1m[36mCACHE Payment Load (0.0ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE (id IN (NULL))[0m
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "payments" WHERE (id IN (NULL)) AND 1=0[0m
  ↳ app/models/product.rb:88:in `average_payments_amount'
  [1m[36mPayment Load (0.2ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."product_name" = $1[0m  [["product_name", "Cryo Localisée"]]
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE "payments"."product_name" = $1 AND 1=0[0m  [["product_name", "Cryo Localisée"]]
  ↳ app/controllers/stats_controller.rb:17:in `block in index'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."product_name" = $1[0m  [["product_name", "Cryothérapie Corps Entier"]]
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE "payments"."product_name" = $1 AND 1=0[0m  [["product_name", "Cryothérapie Corps Entier"]]
  ↳ app/controllers/stats_controller.rb:17:in `block in index'
  [1m[36mPayment Load (0.1ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."product_name" = $1[0m  [["product_name", "Cryolipolise"]]
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE "payments"."product_name" = $1 AND 1=0[0m  [["product_name", "Cryolipolise"]]
  ↳ app/controllers/stats_controller.rb:17:in `block in index'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."product_name" = $1[0m  [["product_name", "Pressothérapie"]]
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE "payments"."product_name" = $1 AND 1=0[0m  [["product_name", "Pressothérapie"]]
  ↳ app/controllers/stats_controller.rb:17:in `block in index'
  [1m[36mPayment Load (0.3ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."product_name" = $1[0m  [["product_name", "Nutrition"]]
  ↳ app/models/payment.rb:61:in `successful'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT SUM("payments"."amount") FROM "payments" WHERE "payments"."product_name" = $1 AND 1=0[0m  [["product_name", "Nutrition"]]
  ↳ app/controllers/stats_controller.rb:17:in `block in index'
  [1m[36mReservation Load (0.4ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1 AND 1=0[0m  [["product_id", 1]]
  ↳ app/controllers/stats_controller.rb:22:in `block in index'
  [1m[36mReservation Load (0.3ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1 AND 1=0[0m  [["product_id", 2]]
  ↳ app/controllers/stats_controller.rb:22:in `block in index'
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1 AND 1=0[0m  [["product_id", 3]]
  ↳ app/controllers/stats_controller.rb:22:in `block in index'
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 4]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1 AND 1=0[0m  [["product_id", 4]]
  ↳ app/controllers/stats_controller.rb:22:in `block in index'
  [1m[36mReservation Load (0.9ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 5]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1 AND 1=0[0m  [["product_id", 5]]
  ↳ app/controllers/stats_controller.rb:22:in `block in index'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 4]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 5]]
  ↳ app/models/reservation.rb:56:in `paid'
  Rendering layout layouts/application.html.erb
  Rendering stats/index.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/application/_filter.html.erb:6
  Rendered application/_filter.html.erb (Duration: 2.9ms | Allocations: 1473)
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1 ORDER BY "products"."name" ASC[0m  [["franchise_id", 1]]
  ↳ app/views/stats/index.html.erb:27
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 1]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 3]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 2]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 5]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 5]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 4]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mCACHE Reservation Load (0.0ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "product_prices" ON "reservations"."product_price_id" = "product_prices"."id" WHERE "product_prices"."product_id" = $1[0m  [["product_id", 4]]
  ↳ app/models/reservation.rb:56:in `paid'
  [1m[36mExternalProduct Load (0.5ms)[0m  [1m[34mSELECT "external_products".* FROM "external_products" WHERE "external_products"."franchise_id" = $1 ORDER BY "external_products"."name" ASC[0m  [["franchise_id", 1]]
  ↳ app/views/stats/index.html.erb:38
  Rendered stats/index.html.erb within layouts/application (Duration: 13.9ms | Allocations: 12047)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_header.html.erb (Duration: 2.1ms | Allocations: 1799)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_nav.html.erb (Duration: 0.5ms | Allocations: 488)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 22.4ms | Allocations: 16999)
Completed 200 OK in 117ms (Views: 21.2ms | ActiveRecord: 16.6ms | Allocations: 54841)


Started GET "/paiements" for ::1 at 2021-10-05 10:36:02 +0200
Processing by WelcomeController#payments as HTML
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:30:in `current_client'
  [1m[36mCompanyClient Load (0.8ms)[0m  [1m[34mSELECT "company_clients".* FROM "company_clients" WHERE "company_clients"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:30:in `current_client'
Completed 500 Internal Server Error in 40ms (ActiveRecord: 4.2ms | Allocations: 10010)


  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Error processing the item: Net::OpenTimeout, execution expired. Item: {"data"=>{:timestamp=>1633422962, :environment=>"development", :level=>"error", :language=>"ruby", :framework=>"Rails: 6.1.3", :server=>{:host=>"Nathans-MacBook-Pro.local", :root=>"/Users/nathanmenard/code/drakkr/cryo", :pid=>11204}, :notifier=>{:name=>"rollbar-gem", :version=>"3.1.2", :configured_options=>{:access_token=>"******", :environment=>"development", :default_logger=>#<Proc:0x00007fc4dad68cc8@/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/rollbar-3.1.2/lib/rollbar/plugins/rails/railtie_mixin.rb:13>, :root=>#<Pathname:/Users/nathanmenard/code/drakkr/cryo>, :framework=>"Rails: 6.1.3", :filepath=>"TestApp.rollbar"}}, :body=>{:trace=>{:frames=>[{:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/puma-4.3.7/lib/puma/thread_pool.rb", :lineno=>134, :method=>"block in spawn_thread"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/puma-4.3.7/lib/puma/server.rb", :lineno=>328, :method=>"block in run"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/puma-4.3.7/lib/puma/server.rb", :lineno=>472, :method=>"process_client"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/puma-4.3.7/lib/puma/server.rb", :lineno=>713, :method=>"handle_request"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/puma-4.3.7/lib/puma/configuration.rb", :lineno=>228, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/railties-6.1.3/lib/rails/engine.rb", :lineno=>539, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/rack-proxy-0.6.5/lib/rack/proxy.rb", :lineno=>57, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/webpacker-4.3.0/lib/webpacker/dev_server_proxy.rb", :lineno=>23, :method=>"perform_request"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/rack-cors-1.1.1/lib/rack/cors.rb", :lineno=>100, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/middleware/host_authorization.rb", :lineno=>98, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/sendfile.rb", :lineno=>110, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/middleware/static.rb", :lineno=>24, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/middleware/executor.rb", :lineno=>14, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/activesupport-6.1.3/lib/active_support/cache/strategy/local_cache_middleware.rb", :lineno=>29, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/runtime.rb", :lineno=>22, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/method_override.rb", :lineno=>24, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/middleware/request_id.rb", :lineno=>26, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/middleware/remote_ip.rb", :lineno=>81, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/sprockets-rails-3.2.2/lib/sprockets/rails/quiet_assets.rb", :lineno=>13, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/railties-6.1.3/lib/rails/rack/logger.rb", :lineno=>26, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/activesupport-6.1.3/lib/active_support/tagged_logging.rb", :lineno=>99, :method=>"tagged"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/activesupport-6.1.3/lib/active_support/tagged_logging.rb", :lineno=>37, :method=>"tagged"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/activesupport-6.1.3/lib/active_support/tagged_logging.rb", :lineno=>99, :method=>"block in tagged"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/railties-6.1.3/lib/rails/rack/logger.rb", :lineno=>26, :method=>"block in call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/railties-6.1.3/lib/rails/rack/logger.rb", :lineno=>37, :method=>"call_app"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/middleware/show_exceptions.rb", :lineno=>33, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/web-console-4.1.0/lib/web_console/middleware.rb", :lineno=>17, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/web-console-4.1.0/lib/web_console/middleware.rb", :lineno=>17, :method=>"catch"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/web-console-4.1.0/lib/web_console/middleware.rb", :lineno=>28, :method=>"block in call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/web-console-4.1.0/lib/web_console/middleware.rb", :lineno=>132, :method=>"call_app"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/rollbar-3.1.2/lib/rollbar/middleware/rails/show_exceptions.rb", :lineno=>22, :method=>"call_with_rollbar"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/middleware/debug_exceptions.rb", :lineno=>29, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/rollbar-3.1.2/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>22, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/rollbar-3.1.2/lib/rollbar.rb", :lineno=>145, :method=>"scoped"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/rollbar-3.1.2/lib/rollbar/middleware/rails/rollbar.rb", :lineno=>25, :method=>"block in call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/middleware/actionable_exceptions.rb", :lineno=>18, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/middleware/executor.rb", :lineno=>14, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/middleware/callbacks.rb", :lineno=>26, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/activesupport-6.1.3/lib/active_support/callbacks.rb", :lineno=>98, :method=>"run_callbacks"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/middleware/callbacks.rb", :lineno=>27, :method=>"block in call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/activerecord-6.1.3/lib/active_record/migration.rb", :lineno=>601, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/middleware/cookies.rb", :lineno=>689, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/session/abstract/id.rb", :lineno=>260, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/session/abstract/id.rb", :lineno=>266, :method=>"context"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/http/content_security_policy.rb", :lineno=>18, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/http/permissions_policy.rb", :lineno=>22, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/head.rb", :lineno=>12, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/conditional_get.rb", :lineno=>27, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/etag.rb", :lineno=>27, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/rack-2.2.3/lib/rack/tempfile_reaper.rb", :lineno=>15, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/bullet-6.1.4/lib/bullet/rack.rb", :lineno=>12, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/routing/route_set.rb", :lineno=>842, :method=>"call"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/journey/router.rb", :lineno=>32, :method=>"serve"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/journey/router.rb", :lineno=>32, :method=>"each"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/journey/router.rb", :lineno=>50, :method=>"block in serve"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/routing/route_set.rb", :lineno=>33, :method=>"serve"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_dispatch/routing/route_set.rb", :lineno=>50, :method=>"dispatch"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_controller/metal.rb", :lineno=>254, :method=>"dispatch"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_controller/metal.rb", :lineno=>190, :method=>"dispatch"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionview-6.1.3/lib/action_view/rendering.rb", :lineno=>39, :method=>"process"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/abstract_controller/base.rb", :lineno=>165, :method=>"process"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/activerecord-6.1.3/lib/active_record/railties/controller_runtime.rb", :lineno=>27, :method=>"process_action"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_controller/metal/params_wrapper.rb", :lineno=>249, :method=>"process_action"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_controller/metal/instrumentation.rb", :lineno=>33, :method=>"process_action"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/activesupport-6.1.3/lib/active_support/notifications.rb", :lineno=>203, :method=>"instrument"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/activesupport-6.1.3/lib/active_support/notifications/instrumenter.rb", :lineno=>24, :method=>"instrument"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/activesupport-6.1.3/lib/active_support/notifications.rb", :lineno=>203, :method=>"block in instrument"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_controller/metal/instrumentation.rb", :lineno=>34, :method=>"block in process_action"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_controller/metal/rescue.rb", :lineno=>22, :method=>"process_action"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/abstract_controller/callbacks.rb", :lineno=>41, :method=>"process_action"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/activesupport-6.1.3/lib/active_support/callbacks.rb", :lineno=>137, :method=>"run_callbacks"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/activesupport-6.1.3/lib/active_support/callbacks.rb", :lineno=>126, :method=>"block in run_callbacks"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/activesupport-6.1.3/lib/active_support/callbacks.rb", :lineno=>126, :method=>"instance_exec"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actiontext-6.1.3/lib/action_text/engine.rb", :lineno=>55, :method=>"block (4 levels) in <class:Engine>"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actiontext-6.1.3/lib/action_text/rendering.rb", :lineno=>20, :method=>"with_renderer"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/activesupport-6.1.3/lib/active_support/callbacks.rb", :lineno=>117, :method=>"block in run_callbacks"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/abstract_controller/callbacks.rb", :lineno=>42, :method=>"block in process_action"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_controller/metal/rendering.rb", :lineno=>30, :method=>"process_action"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/abstract_controller/base.rb", :lineno=>228, :method=>"process_action"}, {:filename=>"/Users/nathanmenard/.rbenv/versions/2.6.6/lib/ruby/gems/2.6.0/gems/actionpack-6.1.3/lib/action_controller/metal/basic_implicit_render.rb", :lineno=>6, :method=>"send_action"}, {:filename=>"/Users/nathanmenard/code/drakkr/cryo/app/controllers/welcome_controller.rb", :lineno=>166, :method=>"payments"}], :exception=>{:class=>"NoMethodError", :message=>"undefined method `payments' for nil:NilClass"}}}, :uuid=>"ffbf0a67-f055-4554-8937-bc0900ff24ab", :request=>{:url=>"http://www.localhost:3000/paiements", :params=>{:controller=>"welcome", :action=>"payments"}, :GET=>{}, :POST=>{}, :body=>"{}", :user_ip=>"::1", :headers=>{"Version"=>"HTTP/1.1", "Host"=>"www.localhost:3000", "Connection"=>"keep-alive", "Upgrade-Insecure-Requests"=>"1", "User-Agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.71 Safari/537.36", "Accept"=>"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9", "Sec-Gpc"=>"1", "Sec-Fetch-Site"=>"same-origin", "Sec-Fetch-Mode"=>"navigate", "Sec-Fetch-User"=>"?1", "Sec-Fetch-Dest"=>"document", "Referer"=>"http://www.localhost:3000/stats?view=year", "Accept-Encoding"=>"gzip, deflate, br", "Accept-Language"=>"en-GB,en-US;q=0.9,en;q=0.8"}, :cookies=>{"_test_app_session"=>"TzBvmS0MR8qL0tBsdaMaTD9h1H+Ee2DB12FHNn38+0cjFx09pIA1ZIi4nMWav+8mAquRKdk4rbb9wZLNesj+h65xrjGADPbM7NZUW8jPiRubTUZ58Di1kxwzI3BXYG0pQfEKhRKH6THlOrUv1Xj0hac+mCMW9IqzrcEhQdYEKkYvu4c3+rS4eoXiA1quwWDMJNFbF2euwxQvmgpT8nEPmklQDwGDX9VCX3Te3RP5OKNyvfW9efcYggStWoyHc+2vlpcSeIt2Myb1DJdoeN2gj8hlwfIqY8KAmfaYk/SI2lmI87un9rorv/3ySFOinbzImv5YN1NsbNdA34wSMf9WM37KuV44wfncdfRJPhHgMqZe--CrtxSMo+eHpsUQyG--ChluesbdmvjfKmYEjQyG8A=="}, :session=>{"session_id"=>"******", "_csrf_token"=>"XFdBimZeFN2OgRWonEfAVgvzCEl5TMGHjbfAOMNobP8=", "user_id"=>1, "redirect_to"=>"/reservations"}, :method=>"GET", :request_id=>"7eaf2738-43b5-4ff5-845d-78f1c48b5709"}, :person=>{:id=>1, :username=>nil, :email=>nil}, :context=>"welcome#payments"}}
[Rollbar] Reporting internal error encountered while sending data to Rollbar.
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=3db6f222-5f8e-48be-9e62-552ff8140ba0 (only available if report was successful)
  
NoMethodError (undefined method `payments' for nil:NilClass):
  
app/controllers/welcome_controller.rb:166:in `payments'
Started GET "/" for ::1 at 2021-10-05 10:38:06 +0200
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises"[0m
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.4ms | Allocations: 1561)


  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=2220e121-c084-4d3a-82c1-e3308eb1d6bd (only available if report was successful)
  
NoMethodError (undefined method `products' for nil:NilClass):
  
app/controllers/welcome_controller.rb:7:in `home'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (8075.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "test_app_development"[0m
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=ecc7cae4-3565-4482-ad69-8dd77aec56b7 (only available if report was successful)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (7861.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "test_app_development"[0m
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=9b164b6f-9923-43ca-89a7-6087c847d4a4 (only available if report was successful)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (24.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "test_app_development"[0m
  [1m[35m (24.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "test_app_test"[0m
  [1m[35m (68.3ms)[0m  [1m[35mCREATE DATABASE "test_app_development" ENCODING = 'unicode'[0m
  [1m[35m (24.8ms)[0m  [1m[35mCREATE DATABASE "test_app_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35mSQL (10.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "unaccent"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_attachments" CASCADE[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_blobs" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "byte_size" bigint NOT NULL, "checksum" character varying NOT NULL, "created_at" timestamp NOT NULL, "service_name" character varying NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_variant_records" CASCADE[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "blockers" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "blockers" ("id" bigserial primary key, "start_time" timestamp NOT NULL, "end_time" timestamp NOT NULL, "notes" text NOT NULL, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "franchise_id" bigint NOT NULL, "room_id" bigint NOT NULL, "blocking" boolean DEFAULT TRUE, "global" boolean DEFAULT FALSE, "blocker_id" bigint)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_blocker_id" ON "blockers" ("blocker_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_franchise_id" ON "blockers" ("franchise_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_room_id" ON "blockers" ("room_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_user_id" ON "blockers" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "business_hours" CASCADE[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "business_hours" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "day" character varying NOT NULL, "morning_start_time" time NOT NULL, "morning_end_time" time NOT NULL, "afternoon_start_time" time NOT NULL, "afternoon_end_time" time NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_business_hours_on_franchise_id" ON "business_hours" ("franchise_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "campaign_templates" CASCADE[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "campaign_templates" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "external_id" integer NOT NULL, "name" text NOT NULL, "subject" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "html" text NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_campaign_templates_on_external_id" ON "campaign_templates" ("external_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_campaign_templates_on_franchise_id" ON "campaign_templates" ("franchise_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "campaigns" CASCADE[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "campaigns" ("id" bigserial primary key, "name" character varying NOT NULL, "body" text NOT NULL, "recipients" character varying[], "sms" boolean NOT NULL, "draft" boolean DEFAULT TRUE NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "filters" json, "sendinblue_list_id" integer, "sendinblue_campaign_id" integer, "campaign_template_id" bigint)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_campaigns_on_campaign_template_id" ON "campaigns" ("campaign_template_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_campaigns_on_franchise_id" ON "campaigns" ("franchise_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "clients" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "male" boolean NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "phone" character varying, "objectives" character varying[] DEFAULT '{}', "address" text, "zip_code" character varying, "city" character varying, "password_digest" character varying, "newsletter" boolean, "last_logged_at" timestamp, "client_id" bigint, "user_id" bigint, "birth_date" date)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_clients_on_client_id" ON "clients" ("client_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_clients_on_franchise_id" ON "clients" ("franchise_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_clients_on_user_id" ON "clients" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "comments" CASCADE[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "comments" ("id" bigserial primary key, "user_id" bigint NOT NULL, "client_id" bigint NOT NULL, "body" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_comments_on_client_id" ON "comments" ("client_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_comments_on_user_id" ON "comments" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying NOT NULL, "email" character varying NOT NULL, "phone" character varying NOT NULL, "address" text NOT NULL, "zip_code" character varying NOT NULL, "city" character varying NOT NULL, "siret" character varying NOT NULL, "comment" text, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_companies_on_franchise_id" ON "companies" ("franchise_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_clients" CASCADE[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "company_clients" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "email" character varying NOT NULL, "job" character varying, "phone" character varying, "company_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "password_digest" character varying, "last_logged_at" timestamp, "company_client_id" bigint, "male" boolean, "objectives" character varying[] DEFAULT '{}', "address" text, "zip_code" character varying, "city" character varying, "boolean" boolean, "birth_date" date, "newsletter" boolean)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_company_clients_on_company_client_id" ON "company_clients" ("company_client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_company_clients_on_company_id" ON "company_clients" ("company_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "coupons" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "coupons" ("id" bigserial primary key, "name" character varying NOT NULL, "value" integer NOT NULL, "code" character varying NOT NULL, "percentage" boolean NOT NULL, "start_date" date, "end_date" date, "usage_limit" integer, "usage_limit_per_person" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "male" boolean, "objectives" character varying[], "product_ids" character varying[], "new_client" boolean DEFAULT FALSE, "loyalty" boolean DEFAULT FALSE, "client_id" bigint, "company_client_id" bigint)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_coupons_on_client_id" ON "coupons" ("client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_coupons_on_company_client_id" ON "coupons" ("company_client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "coupons_franchises" CASCADE[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "coupons_franchises" ("id" bigserial primary key, "coupon_id" bigint NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_coupons_franchises_on_coupon_id_and_franchise_id" ON "coupons_franchises" ("coupon_id", "franchise_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_coupons_franchises_on_coupon_id" ON "coupons_franchises" ("coupon_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_coupons_franchises_on_franchise_id" ON "coupons_franchises" ("franchise_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "credits" CASCADE[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "credits" ("id" bigserial primary key, "client_id" bigint, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "company_client_id" bigint)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_credits_on_client_id" ON "credits" ("client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_credits_on_company_client_id" ON "credits" ("company_client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_credits_on_product_id" ON "credits" ("product_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "external_products" CASCADE[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "external_products" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "name" character varying NOT NULL, "amount" integer NOT NULL, "tax_rate" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_external_products_on_franchise_id" ON "external_products" ("franchise_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "franchises" CASCADE[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "franchises" ("id" bigserial primary key, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "banking_provider" character varying, "banking_secret_key" text, "banking_secret_id" text, "email" character varying, "address" text, "zip_code" character varying, "city" character varying, "siret" character varying, "tax_id" character varying, "iban" character varying, "phone" character varying, "instagram_username" text, "facebook_chat_snippet" text, "sendinblue_api_key" text)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_franchises_on_name" ON "franchises" ("name")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "payments" CASCADE[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "payments" ("id" bigserial primary key, "client_id" bigint, "amount" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "bank_name" character varying, "transaction_id" character varying, "coupon_id" bigint, "as_paid" boolean, "product_name" character varying NOT NULL, "mode" character varying, "tax_rate" float DEFAULT 20.0, "company_client_id" bigint)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_payments_on_client_id" ON "payments" ("client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_payments_on_company_client_id" ON "payments" ("company_client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_payments_on_coupon_id" ON "payments" ("coupon_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_prices" CASCADE[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "product_prices" ("id" bigserial primary key, "session_count" integer NOT NULL, "total" float NOT NULL, "professionnal" boolean NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "first_time" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_product_prices_on_product_id" ON "product_prices" ("product_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "products" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "description" text NOT NULL, "duration" integer NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "active" boolean DEFAULT TRUE)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_products_on_room_id" ON "products" ("room_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" bigserial primary key, "start_time" timestamp, "email_notification" boolean NOT NULL, "first_time" boolean NOT NULL, "client_id" bigint, "product_price_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "company_client_id" bigint, "payment_id" bigint, "canceled" boolean DEFAULT FALSE NOT NULL, "cancelation_reason" text, "refunded" boolean DEFAULT FALSE NOT NULL, "paid_by_credit" boolean DEFAULT FALSE NOT NULL, "notes" text, "user_id" bigint, "signature" text, "to_be_paid_online" boolean NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_client_id" ON "reservations" ("client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_company_client_id" ON "reservations" ("company_client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_payment_id" ON "reservations" ("payment_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_product_price_id" ON "reservations" ("product_price_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_user_id" ON "reservations" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" bigserial primary key, "body" text NOT NULL, "published" boolean, "product_id" bigint NOT NULL, "client_id" bigint, "company_client_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "homepage" boolean)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_client_id" ON "reviews" ("client_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_company_client_id" ON "reviews" ("company_client_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_product_id" ON "reviews" ("product_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "rooms" CASCADE[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "rooms" ("id" bigserial primary key, "name" character varying NOT NULL, "capacity" integer NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_rooms_on_franchise_id" ON "rooms" ("franchise_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscription_plans" CASCADE[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "subscription_plans" ("id" bigserial primary key, "product_id" bigint NOT NULL, "session_count" integer NOT NULL, "total" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_subscription_plans_on_product_id" ON "subscription_plans" ("product_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "subscription_plan_id" bigint NOT NULL, "client_id" bigint NOT NULL, "external_id" character varying, "status" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "to_be_canceled_at" timestamp)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_client_id" ON "subscriptions" ("client_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_subscription_plan_id_and_client_id" ON "subscriptions" ("subscription_plan_id", "client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_subscription_plan_id" ON "subscriptions" ("subscription_plan_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "survey_questions" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "survey_questions" ("id" bigserial primary key, "survey_id" bigint NOT NULL, "body" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_survey_questions_on_survey_id" ON "survey_questions" ("survey_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "surveys" CASCADE[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "surveys" ("id" bigserial primary key, "product_id" bigint NOT NULL, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_surveys_on_product_id" ON "surveys" ("product_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying NOT NULL, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "superuser" boolean DEFAULT FALSE NOT NULL, "last_logged_at" timestamp, "password_digest" character varying, "nutritionist" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_users_on_franchise_id" ON "users" ("franchise_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "active_storage_attachments" ADD CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "active_storage_variant_records" ADD CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_e0849eddae"
FOREIGN KEY ("blocker_id")
  REFERENCES "blockers" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_59c546b1e0"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_fc2fc1d405"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_7614b1ad87"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "business_hours" ADD CONSTRAINT "fk_rails_07296b7035"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "campaign_templates" ADD CONSTRAINT "fk_rails_9c0d24ccff"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "campaigns" ADD CONSTRAINT "fk_rails_649cc82f45"
FOREIGN KEY ("campaign_template_id")
  REFERENCES "campaign_templates" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "campaigns" ADD CONSTRAINT "fk_rails_80a802b165"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_d80a12f36a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_2cc4be869c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_21c421fd41"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "comments" ADD CONSTRAINT "fk_rails_b7673bd1d8"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "comments" ADD CONSTRAINT "fk_rails_03de2dc08c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_3eefe7b64c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "company_clients" ADD CONSTRAINT "fk_rails_c014da4d2a"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "company_clients" ADD CONSTRAINT "fk_rails_3a46874aaf"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "coupons" ADD CONSTRAINT "fk_rails_58e636839e"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "coupons" ADD CONSTRAINT "fk_rails_9a0bfe084f"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "coupons_franchises" ADD CONSTRAINT "fk_rails_cdbd738627"
FOREIGN KEY ("coupon_id")
  REFERENCES "coupons" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "coupons_franchises" ADD CONSTRAINT "fk_rails_09b1528f6c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_deafe42183"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_e446f4a120"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_d7bdca2159"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_66d0485df7"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_94c15b6260"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_a7af64837e"
FOREIGN KEY ("coupon_id")
  REFERENCES "coupons" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "product_prices" ADD CONSTRAINT "fk_rails_e7ec0c97a3"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "products" ADD CONSTRAINT "fk_rails_71119d0f74"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_9c963d6879"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_9089ec93d0"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_653e025ae0"
FOREIGN KEY ("payment_id")
  REFERENCES "payments" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_57d12ba9a0"
FOREIGN KEY ("product_price_id")
  REFERENCES "product_prices" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_48a92fce51"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_09c661230e"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_9d0eb81ddb"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_bedd9094d4"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "rooms" ADD CONSTRAINT "fk_rails_f0b4b4dbb2"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "subscription_plans" ADD CONSTRAINT "fk_rails_b112070c01"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_19fca7085f"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_355348f174"
FOREIGN KEY ("subscription_plan_id")
  REFERENCES "subscription_plans" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "survey_questions" ADD CONSTRAINT "fk_rails_d0558bfd89"
FOREIGN KEY ("survey_id")
  REFERENCES "surveys" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "surveys" ADD CONSTRAINT "fk_rails_c90d5f8eac"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD CONSTRAINT "fk_rails_59dbdb3a6d"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210403144414)[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20201210113651),
(20201210120740),
(20201210160543),
(20201210160628),
(20201210210158),
(20201210215009),
(20201211062827),
(20201211071117),
(20201211073907),
(20201211082755),
(20201211084146),
(20201211091237),
(20201211104343),
(20201211201257),
(20201211210401),
(20201213110125),
(20201213124045),
(20201213211714),
(20201214100626),
(20201214194631),
(20201215060316),
(20201215155629),
(20201216092326),
(20201216112432),
(20201217061511),
(20201217084127),
(20201217101314),
(20201217104734),
(20201217191427),
(20201218080658),
(20201218102920),
(20201218154722),
(20201218210010),
(20201218215523),
(20201218232014),
(20201219122750),
(20201219152716),
(20201219161208),
(20201219171959),
(20201222164447),
(20201222164831),
(20210105113409),
(20210105115440),
(20210108060758),
(20210108070854),
(20210111153606),
(20210112124102),
(20210113081649),
(20210113091434),
(20210113094818),
(20210113101431),
(20210113114637),
(20210113114649),
(20210114092643),
(20210126104824),
(20210126105327),
(20210212100055),
(20210212100718),
(20210212101427),
(20210212190840),
(20210212191736),
(20210213100135),
(20210214151228),
(20210214152044),
(20210214170041),
(20210215111109),
(20210216172240),
(20210216173810),
(20210219135420),
(20210219210219),
(20210220105848),
(20210220111027),
(20210224111801),
(20210225113019),
(20210226061808),
(20210228190400),
(20210301100937),
(20210301102742),
(20210301102940),
(20210301163420),
(20210316164127),
(20210316164128),
(20210317080650),
(20210317103606),
(20210317104614),
(20210322173449),
(20210322183705),
(20210323080952),
(20210323082530),
(20210323200507),
(20210323201751),
(20210323202824),
(20210323203358),
(20210323220946),
(20210324174744),
(20210324182901),
(20210324201928),
(20210324211535),
(20210328202118),
(20210329120535),
(20210330085255),
(20210402105927),
(20210402112754),
(20210403102920);

[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-05 10:39:42.684425"], ["updated_at", "2021-10-05 10:39:42.684425"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "75ecc48a7c5ef8e8c2ff1c88434cba543d701699"], ["created_at", "2021-10-05 10:39:42.692006"], ["updated_at", "2021-10-05 10:39:42.692006"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35mSQL (5.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "unaccent"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_attachments" CASCADE[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_blobs" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "byte_size" bigint NOT NULL, "checksum" character varying NOT NULL, "created_at" timestamp NOT NULL, "service_name" character varying NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "active_storage_variant_records" CASCADE[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "blockers" CASCADE[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "blockers" ("id" bigserial primary key, "start_time" timestamp NOT NULL, "end_time" timestamp NOT NULL, "notes" text NOT NULL, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "franchise_id" bigint NOT NULL, "room_id" bigint NOT NULL, "blocking" boolean DEFAULT TRUE, "global" boolean DEFAULT FALSE, "blocker_id" bigint)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_blocker_id" ON "blockers" ("blocker_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_franchise_id" ON "blockers" ("franchise_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_room_id" ON "blockers" ("room_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_blockers_on_user_id" ON "blockers" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "business_hours" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "business_hours" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "day" character varying NOT NULL, "morning_start_time" time NOT NULL, "morning_end_time" time NOT NULL, "afternoon_start_time" time NOT NULL, "afternoon_end_time" time NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_business_hours_on_franchise_id" ON "business_hours" ("franchise_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "campaign_templates" CASCADE[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "campaign_templates" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "external_id" integer NOT NULL, "name" text NOT NULL, "subject" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "html" text NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_campaign_templates_on_external_id" ON "campaign_templates" ("external_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_campaign_templates_on_franchise_id" ON "campaign_templates" ("franchise_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "campaigns" CASCADE[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "campaigns" ("id" bigserial primary key, "name" character varying NOT NULL, "body" text NOT NULL, "recipients" character varying[], "sms" boolean NOT NULL, "draft" boolean DEFAULT TRUE NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "filters" json, "sendinblue_list_id" integer, "sendinblue_campaign_id" integer, "campaign_template_id" bigint)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_campaigns_on_campaign_template_id" ON "campaigns" ("campaign_template_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_campaigns_on_franchise_id" ON "campaigns" ("franchise_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients" CASCADE[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "clients" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "male" boolean NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "phone" character varying, "objectives" character varying[] DEFAULT '{}', "address" text, "zip_code" character varying, "city" character varying, "password_digest" character varying, "newsletter" boolean, "last_logged_at" timestamp, "client_id" bigint, "user_id" bigint, "birth_date" date)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_clients_on_client_id" ON "clients" ("client_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_clients_on_franchise_id" ON "clients" ("franchise_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_clients_on_user_id" ON "clients" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "comments" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "comments" ("id" bigserial primary key, "user_id" bigint NOT NULL, "client_id" bigint NOT NULL, "body" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_comments_on_client_id" ON "comments" ("client_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_comments_on_user_id" ON "comments" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "companies" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "companies" ("id" bigserial primary key, "name" character varying NOT NULL, "email" character varying NOT NULL, "phone" character varying NOT NULL, "address" text NOT NULL, "zip_code" character varying NOT NULL, "city" character varying NOT NULL, "siret" character varying NOT NULL, "comment" text, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_companies_on_franchise_id" ON "companies" ("franchise_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "company_clients" CASCADE[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "company_clients" ("id" bigserial primary key, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "email" character varying NOT NULL, "job" character varying, "phone" character varying, "company_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "password_digest" character varying, "last_logged_at" timestamp, "company_client_id" bigint, "male" boolean, "objectives" character varying[] DEFAULT '{}', "address" text, "zip_code" character varying, "city" character varying, "boolean" boolean, "birth_date" date, "newsletter" boolean)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_company_clients_on_company_client_id" ON "company_clients" ("company_client_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_company_clients_on_company_id" ON "company_clients" ("company_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "coupons" CASCADE[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "coupons" ("id" bigserial primary key, "name" character varying NOT NULL, "value" integer NOT NULL, "code" character varying NOT NULL, "percentage" boolean NOT NULL, "start_date" date, "end_date" date, "usage_limit" integer, "usage_limit_per_person" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "male" boolean, "objectives" character varying[], "product_ids" character varying[], "new_client" boolean DEFAULT FALSE, "loyalty" boolean DEFAULT FALSE, "client_id" bigint, "company_client_id" bigint)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_coupons_on_client_id" ON "coupons" ("client_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_coupons_on_company_client_id" ON "coupons" ("company_client_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "coupons_franchises" CASCADE[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "coupons_franchises" ("id" bigserial primary key, "coupon_id" bigint NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_coupons_franchises_on_coupon_id_and_franchise_id" ON "coupons_franchises" ("coupon_id", "franchise_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_coupons_franchises_on_coupon_id" ON "coupons_franchises" ("coupon_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_coupons_franchises_on_franchise_id" ON "coupons_franchises" ("franchise_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "credits" CASCADE[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "credits" ("id" bigserial primary key, "client_id" bigint, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "company_client_id" bigint)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_credits_on_client_id" ON "credits" ("client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_credits_on_company_client_id" ON "credits" ("company_client_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_credits_on_product_id" ON "credits" ("product_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "external_products" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "external_products" ("id" bigserial primary key, "franchise_id" bigint NOT NULL, "name" character varying NOT NULL, "amount" integer NOT NULL, "tax_rate" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_external_products_on_franchise_id" ON "external_products" ("franchise_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "franchises" CASCADE[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "franchises" ("id" bigserial primary key, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "banking_provider" character varying, "banking_secret_key" text, "banking_secret_id" text, "email" character varying, "address" text, "zip_code" character varying, "city" character varying, "siret" character varying, "tax_id" character varying, "iban" character varying, "phone" character varying, "instagram_username" text, "facebook_chat_snippet" text, "sendinblue_api_key" text)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_franchises_on_name" ON "franchises" ("name")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "payments" CASCADE[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "payments" ("id" bigserial primary key, "client_id" bigint, "amount" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "bank_name" character varying, "transaction_id" character varying, "coupon_id" bigint, "as_paid" boolean, "product_name" character varying NOT NULL, "mode" character varying, "tax_rate" float DEFAULT 20.0, "company_client_id" bigint)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_payments_on_client_id" ON "payments" ("client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_payments_on_company_client_id" ON "payments" ("company_client_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_payments_on_coupon_id" ON "payments" ("coupon_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "product_prices" CASCADE[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "product_prices" ("id" bigserial primary key, "session_count" integer NOT NULL, "total" float NOT NULL, "professionnal" boolean NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "first_time" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_product_prices_on_product_id" ON "product_prices" ("product_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "products" CASCADE[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "description" text NOT NULL, "duration" integer NOT NULL, "room_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "active" boolean DEFAULT TRUE)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_products_on_room_id" ON "products" ("room_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations" CASCADE[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" bigserial primary key, "start_time" timestamp, "email_notification" boolean NOT NULL, "first_time" boolean NOT NULL, "client_id" bigint, "product_price_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "company_client_id" bigint, "payment_id" bigint, "canceled" boolean DEFAULT FALSE NOT NULL, "cancelation_reason" text, "refunded" boolean DEFAULT FALSE NOT NULL, "paid_by_credit" boolean DEFAULT FALSE NOT NULL, "notes" text, "user_id" bigint, "signature" text, "to_be_paid_online" boolean NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_client_id" ON "reservations" ("client_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_company_client_id" ON "reservations" ("company_client_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_payment_id" ON "reservations" ("payment_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_product_price_id" ON "reservations" ("product_price_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_reservations_on_user_id" ON "reservations" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews" CASCADE[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" bigserial primary key, "body" text NOT NULL, "published" boolean, "product_id" bigint NOT NULL, "client_id" bigint, "company_client_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "homepage" boolean)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_client_id" ON "reviews" ("client_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_company_client_id" ON "reviews" ("company_client_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_reviews_on_product_id" ON "reviews" ("product_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "rooms" CASCADE[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "rooms" ("id" bigserial primary key, "name" character varying NOT NULL, "capacity" integer NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_rooms_on_franchise_id" ON "rooms" ("franchise_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscription_plans" CASCADE[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "subscription_plans" ("id" bigserial primary key, "product_id" bigint NOT NULL, "session_count" integer NOT NULL, "total" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_subscription_plans_on_product_id" ON "subscription_plans" ("product_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "subscription_plan_id" bigint NOT NULL, "client_id" bigint NOT NULL, "external_id" character varying, "status" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "to_be_canceled_at" timestamp)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_client_id" ON "subscriptions" ("client_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_subscription_plan_id_and_client_id" ON "subscriptions" ("subscription_plan_id", "client_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_subscription_plan_id" ON "subscriptions" ("subscription_plan_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "survey_questions" CASCADE[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "survey_questions" ("id" bigserial primary key, "survey_id" bigint NOT NULL, "body" text NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_survey_questions_on_survey_id" ON "survey_questions" ("survey_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "surveys" CASCADE[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "surveys" ("id" bigserial primary key, "product_id" bigint NOT NULL, "name" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_surveys_on_product_id" ON "surveys" ("product_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying NOT NULL, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "franchise_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "superuser" boolean DEFAULT FALSE NOT NULL, "last_logged_at" timestamp, "password_digest" character varying, "nutritionist" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_users_on_franchise_id" ON "users" ("franchise_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "active_storage_attachments" ADD CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "active_storage_variant_records" ADD CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_e0849eddae"
FOREIGN KEY ("blocker_id")
  REFERENCES "blockers" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_59c546b1e0"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_fc2fc1d405"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "blockers" ADD CONSTRAINT "fk_rails_7614b1ad87"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "business_hours" ADD CONSTRAINT "fk_rails_07296b7035"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "campaign_templates" ADD CONSTRAINT "fk_rails_9c0d24ccff"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "campaigns" ADD CONSTRAINT "fk_rails_649cc82f45"
FOREIGN KEY ("campaign_template_id")
  REFERENCES "campaign_templates" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "campaigns" ADD CONSTRAINT "fk_rails_80a802b165"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_d80a12f36a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_2cc4be869c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_21c421fd41"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "comments" ADD CONSTRAINT "fk_rails_b7673bd1d8"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "comments" ADD CONSTRAINT "fk_rails_03de2dc08c"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "companies" ADD CONSTRAINT "fk_rails_3eefe7b64c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "company_clients" ADD CONSTRAINT "fk_rails_c014da4d2a"
FOREIGN KEY ("company_id")
  REFERENCES "companies" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "company_clients" ADD CONSTRAINT "fk_rails_3a46874aaf"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "coupons" ADD CONSTRAINT "fk_rails_58e636839e"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "coupons" ADD CONSTRAINT "fk_rails_9a0bfe084f"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "coupons_franchises" ADD CONSTRAINT "fk_rails_cdbd738627"
FOREIGN KEY ("coupon_id")
  REFERENCES "coupons" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "coupons_franchises" ADD CONSTRAINT "fk_rails_09b1528f6c"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_deafe42183"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_e446f4a120"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "credits" ADD CONSTRAINT "fk_rails_d7bdca2159"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_66d0485df7"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_94c15b6260"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "payments" ADD CONSTRAINT "fk_rails_a7af64837e"
FOREIGN KEY ("coupon_id")
  REFERENCES "coupons" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "product_prices" ADD CONSTRAINT "fk_rails_e7ec0c97a3"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "products" ADD CONSTRAINT "fk_rails_71119d0f74"
FOREIGN KEY ("room_id")
  REFERENCES "rooms" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_9c963d6879"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_9089ec93d0"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_653e025ae0"
FOREIGN KEY ("payment_id")
  REFERENCES "payments" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_57d12ba9a0"
FOREIGN KEY ("product_price_id")
  REFERENCES "product_prices" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "reservations" ADD CONSTRAINT "fk_rails_48a92fce51"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_09c661230e"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_9d0eb81ddb"
FOREIGN KEY ("company_client_id")
  REFERENCES "company_clients" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "reviews" ADD CONSTRAINT "fk_rails_bedd9094d4"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "rooms" ADD CONSTRAINT "fk_rails_f0b4b4dbb2"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "subscription_plans" ADD CONSTRAINT "fk_rails_b112070c01"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_19fca7085f"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_355348f174"
FOREIGN KEY ("subscription_plan_id")
  REFERENCES "subscription_plans" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "survey_questions" ADD CONSTRAINT "fk_rails_d0558bfd89"
FOREIGN KEY ("survey_id")
  REFERENCES "surveys" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "surveys" ADD CONSTRAINT "fk_rails_c90d5f8eac"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "users" ADD CONSTRAINT "fk_rails_59dbdb3a6d"
FOREIGN KEY ("franchise_id")
  REFERENCES "franchises" ("id")
[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210403144414)[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20201210113651),
(20201210120740),
(20201210160543),
(20201210160628),
(20201210210158),
(20201210215009),
(20201211062827),
(20201211071117),
(20201211073907),
(20201211082755),
(20201211084146),
(20201211091237),
(20201211104343),
(20201211201257),
(20201211210401),
(20201213110125),
(20201213124045),
(20201213211714),
(20201214100626),
(20201214194631),
(20201215060316),
(20201215155629),
(20201216092326),
(20201216112432),
(20201217061511),
(20201217084127),
(20201217101314),
(20201217104734),
(20201217191427),
(20201218080658),
(20201218102920),
(20201218154722),
(20201218210010),
(20201218215523),
(20201218232014),
(20201219122750),
(20201219152716),
(20201219161208),
(20201219171959),
(20201222164447),
(20201222164831),
(20210105113409),
(20210105115440),
(20210108060758),
(20210108070854),
(20210111153606),
(20210112124102),
(20210113081649),
(20210113091434),
(20210113094818),
(20210113101431),
(20210113114637),
(20210113114649),
(20210114092643),
(20210126104824),
(20210126105327),
(20210212100055),
(20210212100718),
(20210212101427),
(20210212190840),
(20210212191736),
(20210213100135),
(20210214151228),
(20210214152044),
(20210214170041),
(20210215111109),
(20210216172240),
(20210216173810),
(20210219135420),
(20210219210219),
(20210220105848),
(20210220111027),
(20210224111801),
(20210225113019),
(20210226061808),
(20210228190400),
(20210301100937),
(20210301102742),
(20210301102940),
(20210301163420),
(20210316164127),
(20210316164128),
(20210317080650),
(20210317103606),
(20210317104614),
(20210322173449),
(20210322183705),
(20210323080952),
(20210323082530),
(20210323200507),
(20210323201751),
(20210323202824),
(20210323203358),
(20210323220946),
(20210324174744),
(20210324182901),
(20210324201928),
(20210324211535),
(20210328202118),
(20210329120535),
(20210330085255),
(20210402105927),
(20210402112754),
(20210403102920);

[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-10-05 10:39:42.958677"], ["updated_at", "2021-10-05 10:39:42.958677"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.2ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2021-10-05 10:39:42.963386"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "75ecc48a7c5ef8e8c2ff1c88434cba543d701699"], ["created_at", "2021-10-05 10:39:42.967444"], ["updated_at", "2021-10-05 10:39:42.967444"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "franchises" WHERE "franchises"."name" = $1 LIMIT $2[0m  [["name", "Reims"], ["LIMIT", 1]]
  [1m[36mFranchise Create (0.4ms)[0m  [1m[32mINSERT INTO "franchises" ("name", "created_at", "updated_at", "email", "address", "zip_code", "city", "siret", "tax_id", "phone") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "Reims"], ["created_at", "2021-10-05 10:39:43.033926"], ["updated_at", "2021-10-05 10:39:43.033926"], ["email", "contact@cryotera.fr"], ["address", "2 rue Jules Méline"], ["zip_code", "51430"], ["city", "Bezannes"], ["siret", "81501516900015"], ["tax_id", "FR81815015169"], ["phone", "0326779750"]]
  [1m[36mBusinessHour Create (0.7ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Monday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-10-05 10:39:43.047954"], ["updated_at", "2021-10-05 10:39:43.047954"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (0.2ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Tuesday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-10-05 10:39:43.050010"], ["updated_at", "2021-10-05 10:39:43.050010"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (0.1ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Wednesday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-10-05 10:39:43.051215"], ["updated_at", "2021-10-05 10:39:43.051215"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (0.1ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Thursday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-10-05 10:39:43.052349"], ["updated_at", "2021-10-05 10:39:43.052349"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (0.1ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Friday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-10-05 10:39:43.053458"], ["updated_at", "2021-10-05 10:39:43.053458"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mBusinessHour Create (0.1ms)[0m  [1m[32mINSERT INTO "business_hours" ("franchise_id", "day", "morning_start_time", "morning_end_time", "afternoon_start_time", "afternoon_end_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["franchise_id", 1], ["day", "Saturday"], ["morning_start_time", "09:00:00"], ["morning_end_time", "12:00:00"], ["afternoon_start_time", "14:00:00"], ["afternoon_end_time", "20:00:00"], ["created_at", "2021-10-05 10:39:43.054560"], ["updated_at", "2021-10-05 10:39:43.054560"]]
  ↳ app/models/franchise.rb:57:in `block in create_business_hours'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "contact@drakkr.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "franchise_id", "created_at", "updated_at", "superuser", "password_digest") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["email", "contact@drakkr.com"], ["first_name", "Nathan"], ["last_name", "Menard"], ["franchise_id", 1], ["created_at", "2021-10-05 10:39:43.332433"], ["updated_at", "2021-10-05 10:39:43.332433"], ["superuser", true], ["password_digest", "$2a$12$jCOODQs7UvmFLdQxeFrYVuxwoT/GxPLVvQSEJ9TRdH7l3Wouvfh5W"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Create (2.2ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "male", "franchise_id", "created_at", "updated_at", "email", "password_digest", "birth_date") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["first_name", "John"], ["last_name", "Doe"], ["male", true], ["franchise_id", 1], ["created_at", "2021-10-05 10:39:43.615960"], ["updated_at", "2021-10-05 10:39:43.615960"], ["email", "client@gmail.com"], ["password_digest", "$2a$12$/qWWcMI1Z7eBIFk7GJe3e.QpOqEfz9UsEnAsZT2Ipf2RyuMOPT6jK"], ["birth_date", "1990-01-01"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCompany Create (1.1ms)[0m  [1m[32mINSERT INTO "companies" ("name", "email", "phone", "address", "zip_code", "city", "siret", "franchise_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "Apple"], ["email", "contact@apple.com"], ["phone", "0620853909"], ["address", "60 rue des Gobelins"], ["zip_code", "51100"], ["city", "Reims"], ["siret", "81214811200012"], ["franchise_id", 1], ["created_at", "2021-10-05 10:39:43.643824"], ["updated_at", "2021-10-05 10:39:43.643824"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFranchise Load (0.3ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mRoom Create (1.4ms)[0m  [1m[32mINSERT INTO "rooms" ("name", "capacity", "franchise_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "Salle de Cryothérapie"], ["capacity", 2], ["franchise_id", 1], ["created_at", "2021-10-05 10:39:43.658163"], ["updated_at", "2021-10-05 10:39:43.658163"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=2e396767-fed7-4d99-a1c3-505870b187e1 (only available if report was successful)
Started PUT "/__web_console/repl_sessions/bf4f1345ecd09b392aa38f84ea3d3f22" for ::1 at 2021-10-05 10:43:49 +0200
Started GET "/" for ::1 at 2021-10-05 10:44:36 +0200
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (1.3ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises"[0m
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
Completed 500 Internal Server Error in 57ms (ActiveRecord: 11.0ms | Allocations: 47723)


  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=fe84ad4a-8b00-4977-b6e4-5bb37f37b093 (only available if report was successful)
  
NoMethodError (undefined method `products' for nil:NilClass):
  
app/controllers/welcome_controller.rb:7:in `home'
Started GET "/products" for ::1 at 2021-10-05 10:44:52 +0200
  
ActionController::RoutingError (No route matches [GET] "/products"):
  
Started GET "/admin" for ::1 at 2021-10-05 10:44:56 +0200
Processing by AuthController#admin as HTML
  Rendering auth/admin.html.erb
  Rendered auth/admin.html.erb (Duration: 9.6ms | Allocations: 4422)
Completed 200 OK in 14ms (Views: 11.7ms | ActiveRecord: 0.0ms | Allocations: 5365)


Started POST "/admin" for ::1 at 2021-10-05 10:45:02 +0200
Processing by AuthController#admin as HTML
  Parameters: {"authenticity_token"=>"ewM+RhQiXRj0EuOKehZzOl2yP5bQVaoCK4COzv4asN7dMUoTTf5uWv7X4+xuzidbVJ+EdxcBZK+3dgkTGdca2Q==", "email"=>"nathan@drakkr.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "nathan@drakkr.com"], ["LIMIT", 1]]
  ↳ app/controllers/auth_controller.rb:72:in `admin'
  Rendering auth/admin.html.erb
  Rendered auth/admin.html.erb (Duration: 1.9ms | Allocations: 1964)
Completed 200 OK in 10ms (Views: 2.7ms | ActiveRecord: 0.6ms | Allocations: 3196)


Started POST "/admin" for ::1 at 2021-10-05 10:45:12 +0200
Processing by AuthController#admin as HTML
  Parameters: {"authenticity_token"=>"GaUDq0+9FUZ1enMYpIwKe2f/CxU6h7xnBfJTAh6Yjg2/l3f+FmEmBH+/c36wVF4abtKw9P3TcsqZBNTf+VUkCg==", "email"=>"contact@drakkr.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "contact@drakkr.com"], ["LIMIT", 1]]
  ↳ app/controllers/auth_controller.rb:72:in `admin'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/auth_controller.rb:75:in `admin'
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/auth_controller.rb:75:in `admin'
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "contact@drakkr.com"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/auth_controller.rb:75:in `admin'
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "last_logged_at" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-10-05 10:45:12.833996"], ["last_logged_at", "2021-10-05 10:45:12.822178"], ["id", 1]]
  ↳ app/controllers/auth_controller.rb:75:in `admin'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/auth_controller.rb:75:in `admin'
Redirected to http://www.localhost:3000/reservations
Completed 302 Found in 317ms (ActiveRecord: 3.6ms | Allocations: 9407)


Started GET "/reservations" for ::1 at 2021-10-05 10:45:12 +0200
Processing by Welcome::ReservationsController#index as HTML
Redirected to http://www.localhost:3000/login
Filter chain halted as :authenticate_client rendered or redirected
Completed 302 Found in 0ms (ActiveRecord: 0.0ms | Allocations: 433)


Started GET "/login" for ::1 at 2021-10-05 10:45:12 +0200
Processing by AuthController#login as HTML
Redirected to http://www.localhost:3000/
Filter chain halted as :authenticate_franchise rendered or redirected
Completed 302 Found in 0ms (ActiveRecord: 0.0ms | Allocations: 370)


Started GET "/" for ::1 at 2021-10-05 10:45:12 +0200
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (0.3ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises"[0m
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 1579)


  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=1c11a957-e621-40ca-8265-8a2ffbd5cb21 (only available if report was successful)
  
NoMethodError (undefined method `products' for nil:NilClass):
  
app/controllers/welcome_controller.rb:7:in `home'
Started GET "/admin" for ::1 at 2021-10-05 10:45:17 +0200
Processing by AuthController#admin as HTML
  Rendering auth/admin.html.erb
  Rendered auth/admin.html.erb (Duration: 1.6ms | Allocations: 1958)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.0ms | Allocations: 2376)


Started GET "/franchises" for ::1 at 2021-10-05 10:45:32 +0200
Processing by FranchisesController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:54:in `authenticate_superadmin'
  Rendering layout layouts/application.html.erb
  Rendering franchises/index.html.erb within layouts/application
  [1m[36mFranchise Load (0.7ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/franchises/index.html.erb:13
  [1m[35m (6.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."franchise_id" = $1[0m  [["franchise_id", 1]]
  ↳ app/views/franchises/index.html.erb:17
  Rendered franchises/_form.html.erb (Duration: 3.1ms | Allocations: 1368)
  Rendered franchises/index.html.erb within layouts/application (Duration: 16.3ms | Allocations: 4417)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_header.html.erb (Duration: 2.7ms | Allocations: 2190)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_nav.html.erb (Duration: 1.3ms | Allocations: 1280)
  Rendered application/_footer.html.erb (Duration: 0.2ms | Allocations: 82)
  Rendered layout layouts/application.html.erb (Duration: 33.0ms | Allocations: 12146)
Completed 200 OK in 39ms (Views: 28.5ms | ActiveRecord: 7.4ms | Allocations: 13957)


Started GET "/franchises/1" for ::1 at 2021-10-05 10:45:34 +0200
Processing by FranchisesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:54:in `authenticate_superadmin'
  [1m[36mFranchise Load (0.6ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/franchises_controller.rb:10:in `show'
  Rendering layout layouts/application.html.erb
  Rendering franchises/show.html.erb within layouts/application
  [1m[36mBusinessHour Load (1.0ms)[0m  [1m[34mSELECT "business_hours".* FROM "business_hours" WHERE "business_hours"."franchise_id" = $1[0m  [["franchise_id", 1]]
  ↳ app/views/franchises/show.html.erb:19
  Rendered franchises/show.html.erb within layouts/application (Duration: 49.9ms | Allocations: 14417)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_header.html.erb (Duration: 2.7ms | Allocations: 1801)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_nav.html.erb (Duration: 0.6ms | Allocations: 470)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 61.4ms | Allocations: 19307)
Completed 200 OK in 71ms (Views: 50.6ms | ActiveRecord: 12.7ms | Allocations: 20975)


Started GET "/users/sign_in" for ::1 at 2021-10-05 10:46:23 +0200
  
ActionController::RoutingError (No route matches [GET] "/users/sign_in"):
  
Started GET "/" for ::1 at 2021-10-05 10:46:25 +0200
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises"[0m
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.4ms | Allocations: 1563)


  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=03528018-1151-4d98-b213-255893d1cc91 (only available if report was successful)
  
NoMethodError (undefined method `products' for nil:NilClass):
  
app/controllers/welcome_controller.rb:7:in `home'
Started GET "/admin" for ::1 at 2021-10-05 10:46:30 +0200
Processing by AuthController#admin as HTML
  Rendering auth/admin.html.erb
  Rendered auth/admin.html.erb (Duration: 1.7ms | Allocations: 1965)
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.0ms | Allocations: 2387)


Started POST "/admin" for ::1 at 2021-10-05 10:46:33 +0200
Processing by AuthController#admin as HTML
  Parameters: {"authenticity_token"=>"9o+CTxeTO2VsVpH3hQdCxFItBpvwrkIona1NR5lObolQvfYaTk8IJ2aTkZGR3xalWwC9ejf6jIUBW8qafoPEjg==", "email"=>"client@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "client@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/auth_controller.rb:72:in `admin'
  Rendering auth/admin.html.erb
  Rendered auth/admin.html.erb (Duration: 2.2ms | Allocations: 1963)
Completed 200 OK in 8ms (Views: 3.3ms | ActiveRecord: 0.7ms | Allocations: 2904)


Started GET "/" for ::1 at 2021-10-05 10:46:36 +0200
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises"[0m
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.4ms | Allocations: 1561)


  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=bae84855-6553-4e2b-bb7b-21386dc6fa3a (only available if report was successful)
  
NoMethodError (undefined method `products' for nil:NilClass):
  
app/controllers/welcome_controller.rb:7:in `home'
Started GET "/admin" for ::1 at 2021-10-05 10:46:45 +0200
Processing by AuthController#admin as HTML
  Rendering auth/admin.html.erb
  Rendered auth/admin.html.erb (Duration: 2.0ms | Allocations: 1955)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.0ms | Allocations: 2371)


Started GET "/employes" for ::1 at 2021-10-05 10:46:51 +0200
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.5ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:7:in `index'
  Rendering layout layouts/application.html.erb
  Rendering users/index.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.6ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/application/_filter.html.erb:6
  Rendered application/_filter.html.erb (Duration: 4.1ms | Allocations: 1700)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/views/users/index.html.erb:18
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/users/index.html.erb:23
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/users/_form.html.erb:8
  Rendered users/_form.html.erb (Duration: 5.3ms | Allocations: 2133)
  Rendered users/index.html.erb within layouts/application (Duration: 17.0ms | Allocations: 6959)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_header.html.erb (Duration: 2.3ms | Allocations: 1804)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_nav.html.erb (Duration: 0.5ms | Allocations: 470)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 32.1ms | Allocations: 12652)
Completed 200 OK in 44ms (Views: 33.1ms | ActiveRecord: 2.0ms | Allocations: 15847)


Started GET "/clients" for ::1 at 2021-10-05 10:46:54 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.9ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/clients_controller.rb:7:in `index'
  Rendering layout layouts/application.html.erb
  Rendering clients/index.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mFranchise Load (0.5ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/application/_filter.html.erb:6
  Rendered application/_filter.html.erb (Duration: 2.3ms | Allocations: 1475)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mClient Load (0.9ms)[0m  [1m[34mSELECT "clients".* FROM "clients" ORDER BY "clients"."last_name" ASC, "clients"."first_name" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 30], ["OFFSET", 0]]
  ↳ app/views/clients/index.html.erb:19
  [1m[36mFranchise Load (0.2ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1[0m  [["id", 1]]
  ↳ app/views/clients/index.html.erb:19
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/clients/_form.html.erb:10
  Rendered clients/_form.html.erb (Duration: 3.4ms | Allocations: 2814)
  Rendered clients/index.html.erb within layouts/application (Duration: 13.6ms | Allocations: 8074)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_header.html.erb (Duration: 1.6ms | Allocations: 1804)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
  Rendered application/_nav.html.erb (Duration: 0.4ms | Allocations: 456)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 20.8ms | Allocations: 13729)
Completed 200 OK in 97ms (Views: 20.2ms | ActiveRecord: 9.6ms | Allocations: 33621)


Started GET "/reservations" for ::1 at 2021-10-05 10:46:55 +0200
Processing by Welcome::ReservationsController#index as HTML
Redirected to http://www.localhost:3000/login
Filter chain halted as :authenticate_client rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 359)


Started GET "/login" for ::1 at 2021-10-05 10:46:55 +0200
Processing by AuthController#login as HTML
Redirected to http://www.localhost:3000/
Filter chain halted as :authenticate_franchise rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 353)


Started GET "/" for ::1 at 2021-10-05 10:46:55 +0200
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (0.5ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises"[0m
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.5ms | Allocations: 1575)


  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:25:in `current_user'
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=3a029772-dd9d-4f1b-84dc-1359e7ae2eb5 (only available if report was successful)
  
NoMethodError (undefined method `products' for nil:NilClass):
  
app/controllers/welcome_controller.rb:7:in `home'
Started PUT "/__web_console/repl_sessions/f873a93b8b397d74c52a392a85ad98db" for ::1 at 2021-10-05 10:47:03 +0200
Started PUT "/__web_console/repl_sessions/f873a93b8b397d74c52a392a85ad98db" for ::1 at 2021-10-05 10:47:04 +0200
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:30:in `current_client'
  [1m[36mCompanyClient Load (1.2ms)[0m  [1m[34mSELECT "company_clients".* FROM "company_clients" WHERE "company_clients"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:30:in `current_client'
Started PUT "/__web_console/repl_sessions/f873a93b8b397d74c52a392a85ad98db" for ::1 at 2021-10-05 10:47:07 +0200
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises"[0m
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mFranchise Load (0.5ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mFranchise Load (1.2ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/" for ::1 at 2021-10-05 10:48:06 +0200
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (0.2ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1[0m  [["franchise_id", 1]]
  ↳ app/models/product.rb:41:in `active'
  Rendering welcome/home.html.erb
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mBusinessHour Load (0.3ms)[0m  [1m[34mSELECT "business_hours".* FROM "business_hours" WHERE "business_hours"."franchise_id" = $1 AND "business_hours"."day" = $2 LIMIT $3[0m  [["franchise_id", 1], ["day", "Monday"], ["LIMIT", 1]]
  ↳ app/views/welcome/home.html.erb:187
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mBusinessHour Load (0.3ms)[0m  [1m[34mSELECT "business_hours".* FROM "business_hours" WHERE "business_hours"."franchise_id" = $1 AND "business_hours"."day" = $2 LIMIT $3[0m  [["franchise_id", 1], ["day", "Saturday"], ["LIMIT", 1]]
  ↳ app/views/welcome/home.html.erb:189
  Rendered welcome/home.html.erb (Duration: 18.2ms | Allocations: 12863)
Completed 200 OK in 62ms (Views: 10.1ms | ActiveRecord: 23.6ms | Allocations: 49894)


Started GET "/" for ::1 at 2021-10-05 10:48:17 +0200
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1[0m  [["franchise_id", 1]]
  ↳ app/models/product.rb:41:in `active'
  Rendering welcome/home.html.erb
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mBusinessHour Load (1.1ms)[0m  [1m[34mSELECT "business_hours".* FROM "business_hours" WHERE "business_hours"."franchise_id" = $1 AND "business_hours"."day" = $2 LIMIT $3[0m  [["franchise_id", 1], ["day", "Monday"], ["LIMIT", 1]]
  ↳ app/views/welcome/home.html.erb:187
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mBusinessHour Load (0.9ms)[0m  [1m[34mSELECT "business_hours".* FROM "business_hours" WHERE "business_hours"."franchise_id" = $1 AND "business_hours"."day" = $2 LIMIT $3[0m  [["franchise_id", 1], ["day", "Saturday"], ["LIMIT", 1]]
  ↳ app/views/welcome/home.html.erb:189
  Rendered welcome/home.html.erb (Duration: 22.2ms | Allocations: 5771)
Completed 200 OK in 31ms (Views: 21.1ms | ActiveRecord: 3.4ms | Allocations: 7696)


Started GET "/stats" for ::1 at 2021-10-05 10:48:32 +0200
Processing by StatsController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mFranchise Load (0.8ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/stats_controller.rb:7:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/stats_controller.rb:8:in `index'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1[0m  [["franchise_id", 1]]
  ↳ app/controllers/stats_controller.rb:11:in `index'
  Rendering layout layouts/application.html.erb
  Rendering stats/index.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mFranchise Load (0.6ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/application/_filter.html.erb:6
  Rendered application/_filter.html.erb (Duration: 3.4ms | Allocations: 1476)
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1 ORDER BY "products"."name" ASC[0m  [["franchise_id", 1]]
  ↳ app/views/stats/index.html.erb:27
  [1m[36mExternalProduct Load (1.3ms)[0m  [1m[34mSELECT "external_products".* FROM "external_products" WHERE "external_products"."franchise_id" = $1 ORDER BY "external_products"."name" ASC[0m  [["franchise_id", 1]]
  ↳ app/views/stats/index.html.erb:38
  Rendered stats/index.html.erb within layouts/application (Duration: 13.5ms | Allocations: 4485)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_header.html.erb (Duration: 2.9ms | Allocations: 1805)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_nav.html.erb (Duration: 0.7ms | Allocations: 489)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 30.1ms | Allocations: 10193)
Completed 200 OK in 76ms (Views: 27.3ms | ActiveRecord: 12.5ms | Allocations: 24334)


Started GET "/reservations" for ::1 at 2021-10-05 10:48:34 +0200
Processing by Welcome::ReservationsController#index as HTML
Redirected to http://www.localhost:3000/login
Filter chain halted as :authenticate_client rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms | Allocations: 421)


Started GET "/login" for ::1 at 2021-10-05 10:48:34 +0200
Processing by AuthController#login as HTML
Redirected to http://www.localhost:3000/
Filter chain halted as :authenticate_franchise rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 436)


Started GET "/" for ::1 at 2021-10-05 10:48:34 +0200
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1[0m  [["franchise_id", 1]]
  ↳ app/models/product.rb:41:in `active'
  Rendering welcome/home.html.erb
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mBusinessHour Load (0.6ms)[0m  [1m[34mSELECT "business_hours".* FROM "business_hours" WHERE "business_hours"."franchise_id" = $1 AND "business_hours"."day" = $2 LIMIT $3[0m  [["franchise_id", 1], ["day", "Monday"], ["LIMIT", 1]]
  ↳ app/views/welcome/home.html.erb:187
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mBusinessHour Load (0.2ms)[0m  [1m[34mSELECT "business_hours".* FROM "business_hours" WHERE "business_hours"."franchise_id" = $1 AND "business_hours"."day" = $2 LIMIT $3[0m  [["franchise_id", 1], ["day", "Saturday"], ["LIMIT", 1]]
  ↳ app/views/welcome/home.html.erb:189
  Rendered welcome/home.html.erb (Duration: 9.9ms | Allocations: 5772)
Completed 200 OK in 18ms (Views: 9.8ms | ActiveRecord: 1.9ms | Allocations: 7689)


Started GET "/subscriptions" for ::1 at 2021-10-05 10:48:36 +0200
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=36a7b719-8641-4881-a01b-29335aed12a3 (only available if report was successful)
  
AbstractController::ActionNotFound (The action 'index' could not be found for Welcome::SubscriptionsController):
  
actionpack (6.1.3) lib/abstract_controller/base.rb:160:in `process'
actionview (6.1.3) lib/action_view/rendering.rb:39:in `process'
actionpack (6.1.3) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.3) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.3) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.3) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.3) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.3) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.3) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.3) lib/action_dispatch/routing/route_set.rb:842:in `call'
bullet (6.1.4) lib/bullet/rack.rb:12:in `call'
rack (2.2.3) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
actionpack (6.1.3) lib/action_dispatch/http/permissions_policy.rb:22:in `call'
actionpack (6.1.3) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.3) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.3) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (6.1.3) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.3) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.3) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
rollbar (3.1.2) lib/rollbar/middleware/rails/rollbar.rb:25:in `block in call'
rollbar (3.1.2) lib/rollbar.rb:145:in `scoped'
rollbar (3.1.2) lib/rollbar/middleware/rails/rollbar.rb:22:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
rollbar (3.1.2) lib/rollbar/middleware/rails/show_exceptions.rb:22:in `call_with_rollbar'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.3) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.3) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.3) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/host_authorization.rb:98:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.1.3) lib/rails/engine.rb:539:in `call'
puma (4.3.7) lib/puma/configuration.rb:228:in `call'
puma (4.3.7) lib/puma/server.rb:713:in `handle_request'
puma (4.3.7) lib/puma/server.rb:472:in `process_client'
puma (4.3.7) lib/puma/server.rb:328:in `block in run'
puma (4.3.7) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/codes-promo" for ::1 at 2021-10-05 10:48:46 +0200
Processing by CouponsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCoupon Load (1.2ms)[0m  [1m[34mSELECT "coupons".* FROM "coupons" WHERE ("coupons"."end_date" IS NULL OR end_date >= '2021-10-05')[0m
  ↳ app/controllers/coupons_controller.rb:60:in `get_coupons'
  [1m[36mCoupon Load (0.7ms)[0m  [1m[34mSELECT "coupons".* FROM "coupons" WHERE (end_date < '2021-10-05') ORDER BY "coupons"."end_date" DESC[0m
  ↳ app/controllers/coupons_controller.rb:60:in `get_coupons'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mFranchise Load (0.3ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/coupons_controller.rb:7:in `index'
  Rendering layout layouts/application.html.erb
  Rendering coupons/index.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mFranchise Load (0.6ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/application/_filter.html.erb:6
  Rendered application/_filter.html.erb (Duration: 3.1ms | Allocations: 1474)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/coupons/_form.html.erb:5
  Rendered coupons/_form.html.erb (Duration: 6.3ms | Allocations: 3134)
  Rendered coupons/index.html.erb within layouts/application (Duration: 12.2ms | Allocations: 6000)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_header.html.erb (Duration: 2.0ms | Allocations: 1804)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_nav.html.erb (Duration: 0.5ms | Allocations: 474)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 22.0ms | Allocations: 11673)
Completed 200 OK in 77ms (Views: 22.8ms | ActiveRecord: 13.2ms | Allocations: 31686)


Started GET "/paiements" for ::1 at 2021-10-05 10:48:47 +0200
Processing by WelcomeController#payments as HTML
  [1m[36mClient Load (0.3ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:31:in `current_client'
  [1m[36mCompanyClient Load (0.2ms)[0m  [1m[34mSELECT "company_clients".* FROM "company_clients" WHERE "company_clients"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:31:in `current_client'
Completed 500 Internal Server Error in 35ms (ActiveRecord: 5.1ms | Allocations: 14293)


  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=1c522d6a-896d-4f4f-9371-ab909cc94b46 (only available if report was successful)
  
NoMethodError (undefined method `payments' for nil:NilClass):
  
app/controllers/welcome_controller.rb:166:in `payments'
Started GET "/paiements" for ::1 at 2021-10-05 10:49:21 +0200
Processing by WelcomeController#payments as HTML
  [1m[36mClient Load (0.2ms)[0m  [1m[34mSELECT "clients".* FROM "clients" ORDER BY "clients"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:31:in `current_client'
  Rendering layout layouts/welcome.html.erb
  Rendering welcome/payments.html.erb within layouts/welcome
  [1m[36mPayment Load (0.7ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."client_id" = $1 ORDER BY "payments"."updated_at" DESC[0m  [["client_id", 1]]
  ↳ app/views/welcome/payments.html.erb:12
  Rendered welcome/payments.html.erb within layouts/welcome (Duration: 5.3ms | Allocations: 2026)
  [1m[36mFranchise Load (0.5ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" ORDER BY "clients"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:31:in `current_client'
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" ORDER BY "clients"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:31:in `current_client'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1 ORDER BY "products"."name" ASC[0m  [["franchise_id", 1]]
  ↳ app/views/layouts/welcome.html.erb:88
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  Rendered layout layouts/welcome.html.erb (Duration: 61.5ms | Allocations: 41654)
Completed 200 OK in 83ms (Views: 40.8ms | ActiveRecord: 27.3ms | Allocations: 61094)


Started GET "/" for ::1 at 2021-10-05 10:50:20 +0200
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (0.5ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1[0m  [["franchise_id", 1]]
  ↳ app/models/product.rb:41:in `active'
  Rendering welcome/home.html.erb
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mBusinessHour Load (0.3ms)[0m  [1m[34mSELECT "business_hours".* FROM "business_hours" WHERE "business_hours"."franchise_id" = $1 AND "business_hours"."day" = $2 LIMIT $3[0m  [["franchise_id", 1], ["day", "Monday"], ["LIMIT", 1]]
  ↳ app/views/welcome/home.html.erb:187
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mBusinessHour Load (0.4ms)[0m  [1m[34mSELECT "business_hours".* FROM "business_hours" WHERE "business_hours"."franchise_id" = $1 AND "business_hours"."day" = $2 LIMIT $3[0m  [["franchise_id", 1], ["day", "Saturday"], ["LIMIT", 1]]
  ↳ app/views/welcome/home.html.erb:189
  Rendered welcome/home.html.erb (Duration: 47.4ms | Allocations: 14882)
Completed 200 OK in 55ms (Views: 41.4ms | ActiveRecord: 7.7ms | Allocations: 16817)


Started GET "/stats" for ::1 at 2021-10-05 10:50:25 +0200
Processing by StatsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/stats_controller.rb:7:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/stats_controller.rb:8:in `index'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1[0m  [["franchise_id", 1]]
  ↳ app/controllers/stats_controller.rb:11:in `index'
  Rendering layout layouts/application.html.erb
  Rendering stats/index.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mFranchise Load (0.5ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/application/_filter.html.erb:6
  Rendered application/_filter.html.erb (Duration: 3.0ms | Allocations: 1475)
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1 ORDER BY "products"."name" ASC[0m  [["franchise_id", 1]]
  ↳ app/views/stats/index.html.erb:27
  [1m[36mExternalProduct Load (0.2ms)[0m  [1m[34mSELECT "external_products".* FROM "external_products" WHERE "external_products"."franchise_id" = $1 ORDER BY "external_products"."name" ASC[0m  [["franchise_id", 1]]
  ↳ app/views/stats/index.html.erb:38
  Rendered stats/index.html.erb within layouts/application (Duration: 8.8ms | Allocations: 3488)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_header.html.erb (Duration: 3.1ms | Allocations: 1805)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_nav.html.erb (Duration: 0.8ms | Allocations: 489)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 20.3ms | Allocations: 8456)
Completed 200 OK in 63ms (Views: 18.3ms | ActiveRecord: 10.1ms | Allocations: 22195)


Started GET "/stats" for ::1 at 2021-10-05 10:50:29 +0200
Processing by StatsController#index as HTML
Redirected to http://localhost:3000/admin
Filter chain halted as :authenticate_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 269)


Started GET "/admin" for ::1 at 2021-10-05 10:50:29 +0200
Processing by AuthController#admin as HTML
  Rendering auth/admin.html.erb
  Rendered auth/admin.html.erb (Duration: 4.1ms | Allocations: 3925)
Completed 200 OK in 7ms (Views: 5.7ms | ActiveRecord: 0.0ms | Allocations: 4578)


Started GET "/stats" for ::1 at 2021-10-05 10:50:32 +0200
Processing by StatsController#index as HTML
Redirected to http://localhost:3000/admin
Filter chain halted as :authenticate_admin rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 355)


Started GET "/admin" for ::1 at 2021-10-05 10:50:32 +0200
Processing by AuthController#admin as HTML
  Rendering auth/admin.html.erb
  Rendered auth/admin.html.erb (Duration: 1.6ms | Allocations: 1955)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms | Allocations: 2384)


Started GET "/admin" for ::1 at 2021-10-05 10:50:51 +0200
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=7f7614e2-c441-40e2-8d83-aa4556668644 (only available if report was successful)
  
NameError (uninitialized constant Subdomain):
  
config/routes.rb:21:in `block in <main>'
config/routes.rb:15:in `<main>'
Started GET "/admin" for ::1 at 2021-10-05 10:50:57 +0200
Processing by AuthController#admin as HTML
  Rendering auth/admin.html.erb
  Rendered auth/admin.html.erb (Duration: 1.5ms | Allocations: 3893)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms | Allocations: 4558)


Started POST "/admin" for ::1 at 2021-10-05 10:51:10 +0200
Processing by AuthController#admin as HTML
  Parameters: {"authenticity_token"=>"O1kZE9skLec8yJGsHvP3QrLYcHD3OKqh8i0jCe0VGISFzDznSe7mrTCUszSBWLxeFZ/h4HCooRRaYnjDuXnsRQ==", "email"=>"contact@drakkr.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "contact@drakkr.com"], ["LIMIT", 1]]
  ↳ app/controllers/auth_controller.rb:72:in `admin'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/auth_controller.rb:75:in `admin'
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/auth_controller.rb:75:in `admin'
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."id" != $2 LIMIT $3[0m  [["email", "contact@drakkr.com"], ["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/auth_controller.rb:75:in `admin'
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "last_logged_at" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-10-05 10:51:11.333509"], ["last_logged_at", "2021-10-05 10:51:11.297329"], ["id", 1]]
  ↳ app/controllers/auth_controller.rb:75:in `admin'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/auth_controller.rb:75:in `admin'
Redirected to http://localhost:3000/stats
Completed 302 Found in 365ms (ActiveRecord: 17.4ms | Allocations: 34449)


Started GET "/stats" for ::1 at 2021-10-05 10:51:11 +0200
Processing by StatsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mFranchise Load (0.2ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/stats_controller.rb:7:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/stats_controller.rb:8:in `index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1[0m  [["franchise_id", 1]]
  ↳ app/controllers/stats_controller.rb:11:in `index'
  Rendering layout layouts/application.html.erb
  Rendering stats/index.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/application/_filter.html.erb:6
  Rendered application/_filter.html.erb (Duration: 1.6ms | Allocations: 1476)
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1 ORDER BY "products"."name" ASC[0m  [["franchise_id", 1]]
  ↳ app/views/stats/index.html.erb:27
  [1m[36mExternalProduct Load (0.2ms)[0m  [1m[34mSELECT "external_products".* FROM "external_products" WHERE "external_products"."franchise_id" = $1 ORDER BY "external_products"."name" ASC[0m  [["franchise_id", 1]]
  ↳ app/views/stats/index.html.erb:38
  Rendered stats/index.html.erb within layouts/application (Duration: 5.6ms | Allocations: 3489)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_header.html.erb (Duration: 1.6ms | Allocations: 1805)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_nav.html.erb (Duration: 0.3ms | Allocations: 489)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 14.7ms | Allocations: 8457)
Completed 200 OK in 39ms (Views: 12.3ms | ActiveRecord: 14.0ms | Allocations: 25562)


Started GET "/paiements" for ::1 at 2021-10-05 10:51:17 +0200
Processing by WelcomeController#payments as HTML
  [1m[36mClient Load (0.5ms)[0m  [1m[34mSELECT "clients".* FROM "clients" ORDER BY "clients"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:31:in `current_client'
  Rendering layout layouts/welcome.html.erb
  Rendering welcome/payments.html.erb within layouts/welcome
  [1m[36mPayment Load (0.4ms)[0m  [1m[34mSELECT "payments".* FROM "payments" WHERE "payments"."client_id" = $1 ORDER BY "payments"."updated_at" DESC[0m  [["client_id", 1]]
  ↳ app/views/welcome/payments.html.erb:12
  Rendered welcome/payments.html.erb within layouts/welcome (Duration: 5.7ms | Allocations: 1680)
  [1m[36mFranchise Load (0.7ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" ORDER BY "clients"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:31:in `current_client'
  [1m[36mCACHE Client Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" ORDER BY "clients"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:31:in `current_client'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1 ORDER BY "products"."name" ASC[0m  [["franchise_id", 1]]
  ↳ app/views/layouts/welcome.html.erb:88
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  Rendered layout layouts/welcome.html.erb (Duration: 17.3ms | Allocations: 7486)
Completed 200 OK in 67ms (Views: 13.1ms | ActiveRecord: 12.9ms | Allocations: 26397)


Started GET "/" for ::1 at 2021-10-05 10:51:18 +0200
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (0.7ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1[0m  [["franchise_id", 1]]
  ↳ app/models/product.rb:41:in `active'
  Rendering welcome/home.html.erb
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mBusinessHour Load (0.3ms)[0m  [1m[34mSELECT "business_hours".* FROM "business_hours" WHERE "business_hours"."franchise_id" = $1 AND "business_hours"."day" = $2 LIMIT $3[0m  [["franchise_id", 1], ["day", "Monday"], ["LIMIT", 1]]
  ↳ app/views/welcome/home.html.erb:187
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mBusinessHour Load (1.2ms)[0m  [1m[34mSELECT "business_hours".* FROM "business_hours" WHERE "business_hours"."franchise_id" = $1 AND "business_hours"."day" = $2 LIMIT $3[0m  [["franchise_id", 1], ["day", "Saturday"], ["LIMIT", 1]]
  ↳ app/views/welcome/home.html.erb:189
  Rendered welcome/home.html.erb (Duration: 42.4ms | Allocations: 12246)
Completed 200 OK in 52ms (Views: 35.9ms | ActiveRecord: 8.6ms | Allocations: 14198)


Started GET "/" for ::1 at 2021-10-05 10:51:21 +0200
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (0.8ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1[0m  [["franchise_id", 1]]
  ↳ app/models/product.rb:41:in `active'
  Rendering welcome/home.html.erb
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.1ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mBusinessHour Load (0.5ms)[0m  [1m[34mSELECT "business_hours".* FROM "business_hours" WHERE "business_hours"."franchise_id" = $1 AND "business_hours"."day" = $2 LIMIT $3[0m  [["franchise_id", 1], ["day", "Monday"], ["LIMIT", 1]]
  ↳ app/views/welcome/home.html.erb:187
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mBusinessHour Load (0.3ms)[0m  [1m[34mSELECT "business_hours".* FROM "business_hours" WHERE "business_hours"."franchise_id" = $1 AND "business_hours"."day" = $2 LIMIT $3[0m  [["franchise_id", 1], ["day", "Saturday"], ["LIMIT", 1]]
  ↳ app/views/welcome/home.html.erb:189
  Rendered welcome/home.html.erb (Duration: 18.9ms | Allocations: 5771)
Completed 200 OK in 28ms (Views: 18.8ms | ActiveRecord: 2.1ms | Allocations: 7693)


Started GET "/employes" for ::1 at 2021-10-05 10:51:29 +0200
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mFranchise Load (0.3ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:7:in `index'
  Rendering layout layouts/application.html.erb
  Rendering users/index.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mFranchise Load (0.7ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/application/_filter.html.erb:6
  Rendered application/_filter.html.erb (Duration: 4.5ms | Allocations: 1474)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/views/users/index.html.erb:18
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/users/index.html.erb:23
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/users/_form.html.erb:8
  Rendered users/_form.html.erb (Duration: 2.5ms | Allocations: 1661)
  Rendered users/index.html.erb within layouts/application (Duration: 10.6ms | Allocations: 5295)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_header.html.erb (Duration: 2.7ms | Allocations: 1804)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_nav.html.erb (Duration: 0.7ms | Allocations: 470)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 22.0ms | Allocations: 10225)
Completed 200 OK in 32ms (Views: 22.4ms | ActiveRecord: 1.6ms | Allocations: 13466)


Started GET "/clients" for ::1 at 2021-10-05 10:51:30 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mFranchise Load (0.3ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/clients_controller.rb:7:in `index'
  Rendering layout layouts/application.html.erb
  Rendering clients/index.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mFranchise Load (1.7ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/application/_filter.html.erb:6
  Rendered application/_filter.html.erb (Duration: 8.2ms | Allocations: 1474)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT "clients".* FROM "clients" ORDER BY "clients"."last_name" ASC, "clients"."first_name" DESC LIMIT $1 OFFSET $2[0m  [["LIMIT", 30], ["OFFSET", 0]]
  ↳ app/views/clients/index.html.erb:19
  [1m[36mFranchise Load (0.3ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1[0m  [["id", 1]]
  ↳ app/views/clients/index.html.erb:19
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/clients/_form.html.erb:10
  Rendered clients/_form.html.erb (Duration: 6.2ms | Allocations: 2133)
  Rendered clients/index.html.erb within layouts/application (Duration: 22.0ms | Allocations: 6004)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_header.html.erb (Duration: 4.0ms | Allocations: 1804)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_nav.html.erb (Duration: 0.9ms | Allocations: 456)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 37.4ms | Allocations: 10920)
Completed 200 OK in 49ms (Views: 36.0ms | ActiveRecord: 3.4ms | Allocations: 14753)


Started GET "/franchises" for ::1 at 2021-10-05 10:51:32 +0200
Processing by FranchisesController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:56:in `authenticate_superadmin'
  Rendering layout layouts/application.html.erb
  Rendering franchises/index.html.erb within layouts/application
  [1m[36mFranchise Load (0.7ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/franchises/index.html.erb:13
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."franchise_id" = $1[0m  [["franchise_id", 1]]
  ↳ app/views/franchises/index.html.erb:17
  Rendered franchises/_form.html.erb (Duration: 37.4ms | Allocations: 822)
  Rendered franchises/index.html.erb within layouts/application (Duration: 43.7ms | Allocations: 2119)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_header.html.erb (Duration: 3.1ms | Allocations: 1805)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_nav.html.erb (Duration: 0.7ms | Allocations: 470)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 55.9ms | Allocations: 7118)
Completed 200 OK in 62ms (Views: 56.3ms | ActiveRecord: 1.8ms | Allocations: 8373)


Started GET "/prestations" for ::1 at 2021-10-05 10:51:33 +0200
Processing by ProductsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mFranchise Load (0.4ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/products_controller.rb:7:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendering layout layouts/application.html.erb
  Rendering products/index.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mFranchise Load (0.8ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/application/_filter.html.erb:6
  Rendered application/_filter.html.erb (Duration: 5.0ms | Allocations: 1474)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/views/products/index.html.erb:18
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mRoom Load (0.4ms)[0m  [1m[34mSELECT "rooms".* FROM "rooms"[0m
  ↳ app/views/products/_form.html.erb:8
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/room.rb:20:in `name_with_franchise'
  Rendered products/_form.html.erb (Duration: 25.8ms | Allocations: 8646)
  Rendered products/index.html.erb within layouts/application (Duration: 36.4ms | Allocations: 11932)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_header.html.erb (Duration: 2.6ms | Allocations: 1804)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_nav.html.erb (Duration: 0.6ms | Allocations: 464)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 48.4ms | Allocations: 17560)
Completed 200 OK in 84ms (Views: 45.6ms | ActiveRecord: 10.7ms | Allocations: 25551)


Started GET "/codes-promo" for ::1 at 2021-10-05 10:51:34 +0200
Processing by CouponsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCoupon Load (0.5ms)[0m  [1m[34mSELECT "coupons".* FROM "coupons" WHERE ("coupons"."end_date" IS NULL OR end_date >= '2021-10-05')[0m
  ↳ app/controllers/coupons_controller.rb:60:in `get_coupons'
  [1m[36mCoupon Load (0.4ms)[0m  [1m[34mSELECT "coupons".* FROM "coupons" WHERE (end_date < '2021-10-05') ORDER BY "coupons"."end_date" DESC[0m
  ↳ app/controllers/coupons_controller.rb:60:in `get_coupons'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mFranchise Load (3.1ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/coupons_controller.rb:7:in `index'
  Rendering layout layouts/application.html.erb
  Rendering coupons/index.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mFranchise Load (0.6ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/application/_filter.html.erb:6
  Rendered application/_filter.html.erb (Duration: 3.2ms | Allocations: 1474)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/coupons/_form.html.erb:5
  Rendered coupons/_form.html.erb (Duration: 3.7ms | Allocations: 2395)
  Rendered coupons/index.html.erb within layouts/application (Duration: 7.9ms | Allocations: 4428)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_header.html.erb (Duration: 2.1ms | Allocations: 1804)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_nav.html.erb (Duration: 0.5ms | Allocations: 474)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 17.1ms | Allocations: 9362)
Completed 200 OK in 76ms (Views: 17.3ms | ActiveRecord: 14.1ms | Allocations: 28459)


Started GET "/stats" for ::1 at 2021-10-05 10:51:34 +0200
Processing by StatsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mFranchise Load (0.5ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/stats_controller.rb:7:in `index'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" WHERE "franchises"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/stats_controller.rb:8:in `index'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1[0m  [["franchise_id", 1]]
  ↳ app/controllers/stats_controller.rb:11:in `index'
  Rendering layout layouts/application.html.erb
  Rendering stats/index.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mFranchise Load (0.8ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/application/_filter.html.erb:6
  Rendered application/_filter.html.erb (Duration: 5.8ms | Allocations: 1474)
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1 ORDER BY "products"."name" ASC[0m  [["franchise_id", 1]]
  ↳ app/views/stats/index.html.erb:27
  [1m[36mExternalProduct Load (0.5ms)[0m  [1m[34mSELECT "external_products".* FROM "external_products" WHERE "external_products"."franchise_id" = $1 ORDER BY "external_products"."name" ASC[0m  [["franchise_id", 1]]
  ↳ app/views/stats/index.html.erb:38
  Rendered stats/index.html.erb within layouts/application (Duration: 12.6ms | Allocations: 2933)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_header.html.erb (Duration: 4.3ms | Allocations: 1799)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_nav.html.erb (Duration: 1.2ms | Allocations: 488)
  Rendered application/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layout layouts/application.html.erb (Duration: 32.0ms | Allocations: 7961)
Completed 200 OK in 50ms (Views: 30.6ms | ActiveRecord: 3.6ms | Allocations: 12138)


Started GET "/" for ::1 at 2021-10-05 14:41:04 +0200
[Rollbar] Scheduling item
[Rollbar] Sending item
[Rollbar] Sending json
[Rollbar] Success
[Rollbar] Details: https://rollbar.com/instance/uuid?uuid=1c0cb481-6861-4e2c-ad90-17012b794b35 (only available if report was successful)
  
ActiveRecord::ConnectionNotEstablished (FATAL:  database "nathanmenard" does not exist
):
  
activerecord (6.1.3) lib/active_record/connection_adapters/postgresql_adapter.rb:83:in `rescue in new_client'
activerecord (6.1.3) lib/active_record/connection_adapters/postgresql_adapter.rb:77:in `new_client'
activerecord (6.1.3) lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'
activerecord (6.1.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:882:in `public_send'
activerecord (6.1.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:882:in `new_connection'
activerecord (6.1.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:926:in `checkout_new_connection'
activerecord (6.1.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:905:in `try_to_checkout_new_connection'
activerecord (6.1.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:866:in `acquire_connection'
activerecord (6.1.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:588:in `checkout'
activerecord (6.1.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:428:in `connection'
activerecord (6.1.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:1128:in `retrieve_connection'
activerecord (6.1.3) lib/active_record/connection_handling.rb:327:in `retrieve_connection'
activerecord (6.1.3) lib/active_record/connection_handling.rb:283:in `connection'
activerecord (6.1.3) lib/active_record/migration.rb:611:in `connection'
activerecord (6.1.3) lib/active_record/migration.rb:606:in `build_watcher'
activerecord (6.1.3) lib/active_record/migration.rb:588:in `block in call'
activerecord (6.1.3) lib/active_record/migration.rb:587:in `synchronize'
activerecord (6.1.3) lib/active_record/migration.rb:587:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.3) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.3) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
rollbar (3.1.2) lib/rollbar/middleware/rails/rollbar.rb:25:in `block in call'
rollbar (3.1.2) lib/rollbar.rb:145:in `scoped'
rollbar (3.1.2) lib/rollbar/middleware/rails/rollbar.rb:22:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
rollbar (3.1.2) lib/rollbar/middleware/rails/show_exceptions.rb:22:in `call_with_rollbar'
web-console (4.1.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.1.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.1.0) lib/web_console/middleware.rb:17:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.3) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.3) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.3) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.3) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.3) lib/action_dispatch/middleware/host_authorization.rb:98:in `call'
rack-cors (1.1.1) lib/rack/cors.rb:100:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.0) lib/rack/proxy.rb:63:in `call'
railties (6.1.3) lib/rails/engine.rb:539:in `call'
puma (4.3.8) lib/puma/configuration.rb:228:in `call'
puma (4.3.8) lib/puma/server.rb:718:in `handle_request'
puma (4.3.8) lib/puma/server.rb:472:in `process_client'
puma (4.3.8) lib/puma/server.rb:328:in `block in run'
puma (4.3.8) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/" for ::1 at 2021-10-05 14:41:33 +0200
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by WelcomeController#home as HTML
  [1m[36mFranchise Load (0.7ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "rooms" ON "products"."room_id" = "rooms"."id" WHERE "rooms"."franchise_id" = $1[0m  [["franchise_id", 1]]
  ↳ app/models/product.rb:41:in `active'
  Rendering welcome/home.html.erb
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mBusinessHour Load (0.6ms)[0m  [1m[34mSELECT "business_hours".* FROM "business_hours" WHERE "business_hours"."franchise_id" = $1 AND "business_hours"."day" = $2 LIMIT $3[0m  [["franchise_id", 1], ["day", "Monday"], ["LIMIT", 1]]
  ↳ app/views/welcome/home.html.erb:187
  [1m[36mCACHE Franchise Load (0.0ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `current_franchise'
  [1m[36mBusinessHour Load (1.1ms)[0m  [1m[34mSELECT "business_hours".* FROM "business_hours" WHERE "business_hours"."franchise_id" = $1 AND "business_hours"."day" = $2 LIMIT $3[0m  [["franchise_id", 1], ["day", "Saturday"], ["LIMIT", 1]]
  ↳ app/views/welcome/home.html.erb:189
  Rendered welcome/home.html.erb (Duration: 33.6ms | Allocations: 13638)
Completed 200 OK in 147ms (Views: 30.4ms | ActiveRecord: 29.1ms | Allocations: 57568)


Started GET "/franchises" for ::1 at 2021-10-05 14:45:57 +0200
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by FranchisesController#index as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:56:in `authenticate_superadmin'
  Rendering layout layouts/application.html.erb
  Rendering franchises/index.html.erb within layouts/application
  [1m[36mFranchise Load (0.8ms)[0m  [1m[34mSELECT "franchises".* FROM "franchises" ORDER BY "franchises"."name" ASC[0m
  ↳ app/views/franchises/index.html.erb:13
  [1m[35m (6.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."franchise_id" = $1[0m  [["franchise_id", 1]]
  ↳ app/views/franchises/index.html.erb:17
  Rendered franchises/_form.html.erb (Duration: 3.5ms | Allocations: 1690)
  Rendered franchises/index.html.erb within layouts/application (Duration: 19.7ms | Allocations: 5731)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_header.html.erb (Duration: 6.4ms | Allocations: 2190)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:26:in `current_user'
  Rendered application/_nav.html.erb (Duration: 3.5ms | Allocations: 1280)
  Rendered application/_footer.html.erb (Duration: 0.3ms | Allocations: 82)
  Rendered layout layouts/application.html.erb (Duration: 43.8ms | Allocations: 13453)
Completed 200 OK in 130ms (Views: 41.2ms | ActiveRecord: 24.3ms | Allocations: 49458)


